!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).window=t.window||{})}(this,(function(t){"use strict";const e=(t,e=1e4)=>(t=parseFloat(t+"")||0,Math.round((t+Number.EPSILON)*e)/e),i=function(t){if(!(t&&t instanceof Element&&t.offsetParent))return!1;const e=t.scrollHeight>t.clientHeight,i=window.getComputedStyle(t).overflowY,n=-1!==i.indexOf("hidden"),s=-1!==i.indexOf("visible");return e&&!n&&!s},n=function(t,e=void 0){return!(!t||t===document.body||e&&t===e)&&(i(t)?t:n(t.parentElement,e))},s=function(t){var e=(new DOMParser).parseFromString(t,"text/html").body;if(e.childElementCount>1){for(var i=document.createElement("div");e.firstChild;)i.appendChild(e.firstChild);return i}return e.firstChild},o=t=>`${t||""}`.split(" ").filter((t=>!!t)),a=(t,e,i)=>{t&&o(e).forEach((e=>{t.classList.toggle(e,i||!1)}))};class r{constructor(t){Object.defineProperty(this,"pageX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"pageY",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientY",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"nativePointer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.nativePointer=t,this.pageX=t.pageX,this.pageY=t.pageY,this.clientX=t.clientX,this.clientY=t.clientY,this.id=self.Touch&&t instanceof Touch?t.identifier:-1,this.time=Date.now()}}const l={passive:!1};class c{constructor(t,{start:e=(()=>!0),move:i=(()=>{}),end:n=(()=>{})}){Object.defineProperty(this,"element",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"startCallback",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"moveCallback",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"endCallback",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"currentPointers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"startPointers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),this.element=t,this.startCallback=e,this.moveCallback=i,this.endCallback=n;for(const t of["onPointerStart","onTouchStart","onMove","onTouchEnd","onPointerEnd","onWindowBlur"])this[t]=this[t].bind(this);this.element.addEventListener("mousedown",this.onPointerStart,l),this.element.addEventListener("touchstart",this.onTouchStart,l),this.element.addEventListener("touchmove",this.onMove,l),this.element.addEventListener("touchend",this.onTouchEnd),this.element.addEventListener("touchcancel",this.onTouchEnd)}onPointerStart(t){if(!t.buttons||0!==t.button)return;const e=new r(t);this.currentPointers.some((t=>t.id===e.id))||this.triggerPointerStart(e,t)&&(window.addEventListener("mousemove",this.onMove),window.addEventListener("mouseup",this.onPointerEnd),window.addEventListener("blur",this.onWindowBlur))}onTouchStart(t){for(const e of Array.from(t.changedTouches||[]))this.triggerPointerStart(new r(e),t);window.addEventListener("blur",this.onWindowBlur)}onMove(t){const e=this.currentPointers.slice(),i="changedTouches"in t?Array.from(t.changedTouches||[]).map((t=>new r(t))):[new r(t)],n=[];for(const t of i){const e=this.currentPointers.findIndex((e=>e.id===t.id));e<0||(n.push(t),this.currentPointers[e]=t)}n.length&&this.moveCallback(t,this.currentPointers.slice(),e)}onPointerEnd(t){t.buttons>0&&0!==t.button||(this.triggerPointerEnd(t,new r(t)),window.removeEventListener("mousemove",this.onMove),window.removeEventListener("mouseup",this.onPointerEnd),window.removeEventListener("blur",this.onWindowBlur))}onTouchEnd(t){for(const e of Array.from(t.changedTouches||[]))this.triggerPointerEnd(t,new r(e))}triggerPointerStart(t,e){return!!this.startCallback(e,t,this.currentPointers.slice())&&(this.currentPointers.push(t),this.startPointers.push(t),!0)}triggerPointerEnd(t,e){const i=this.currentPointers.findIndex((t=>t.id===e.id));i<0||(this.currentPointers.splice(i,1),this.startPointers.splice(i,1),this.endCallback(t,e,this.currentPointers.slice()))}onWindowBlur(){this.clear()}clear(){for(;this.currentPointers.length;){const t=this.currentPointers[this.currentPointers.length-1];this.currentPointers.splice(this.currentPointers.length-1,1),this.startPointers.splice(this.currentPointers.length-1,1),this.endCallback(new Event("touchend",{bubbles:!0,cancelable:!0,clientX:t.clientX,clientY:t.clientY}),t,this.currentPointers.slice())}}stop(){this.element.removeEventListener("mousedown",this.onPointerStart,l),this.element.removeEventListener("touchstart",this.onTouchStart,l),this.element.removeEventListener("touchmove",this.onMove,l),this.element.removeEventListener("touchend",this.onTouchEnd),this.element.removeEventListener("touchcancel",this.onTouchEnd),window.removeEventListener("mousemove",this.onMove),window.removeEventListener("mouseup",this.onPointerEnd),window.removeEventListener("blur",this.onWindowBlur)}}function h(t,e){return e?Math.sqrt(Math.pow(e.clientX-t.clientX,2)+Math.pow(e.clientY-t.clientY,2)):0}function d(t,e){return e?{clientX:(t.clientX+e.clientX)/2,clientY:(t.clientY+e.clientY)/2}:t}const u=t=>"object"==typeof t&&null!==t&&t.constructor===Object&&"[object Object]"===Object.prototype.toString.call(t),f=(t,...e)=>{const i=e.length;for(let n=0;n<i;n++){const i=e[n]||{};Object.entries(i).forEach((([e,i])=>{const n=Array.isArray(i)?[]:{};t[e]||Object.assign(t,{[e]:n}),u(i)?Object.assign(t[e],f(n,i)):Array.isArray(i)?Object.assign(t,{[e]:[...i]}):Object.assign(t,{[e]:i})}))}return t},p=function(t,e){return t.split(".").reduce(((t,e)=>"object"==typeof t?t[e]:void 0),e)};class g{constructor(t={}){Object.defineProperty(this,"options",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),this.setOptions(t);for(const t of Object.getOwnPropertyNames(Object.getPrototypeOf(this)))t.startsWith("on")&&"function"==typeof this[t]&&(this[t]=this[t].bind(this))}setOptions(t){this.options=t?f({},this.constructor.defaults,t):{};for(const[t,e]of Object.entries(this.option("on")||{}))this.on(t,e)}option(t,...e){let i=p(t,this.options);return i&&"function"==typeof i&&(i=i.call(this,this,...e)),i}optionFor(t,e,i,...n){let s=p(e,t);var o;"string"!=typeof(o=s)||isNaN(o)||isNaN(parseFloat(o))||(s=parseFloat(s)),"true"===s&&(s=!0),"false"===s&&(s=!1),s&&"function"==typeof s&&(s=s.call(this,this,t,...n));let a=p(e,this.options);return a&&"function"==typeof a?s=a.call(this,this,t,...n,s):void 0===s&&(s=a),void 0===s?i:s}cn(t){const e=this.options.classes;return e&&e[t]||""}localize(t,e=[]){t=String(t).replace(/\{\{(\w+).?(\w+)?\}\}/g,((t,e,i)=>{let n="";return i?n=this.option(`${e[0]+e.toLowerCase().substring(1)}.l10n.${i}`):e&&(n=this.option(`l10n.${e}`)),n||(n=t),n}));for(let i=0;i<e.length;i++)t=t.split(e[i][0]).join(e[i][1]);return t=t.replace(/\{\{(.*?)\}\}/g,((t,e)=>e))}on(t,e){let i=[];"string"==typeof t?i=t.split(" "):Array.isArray(t)&&(i=t),this.events||(this.events=new Map),i.forEach((t=>{let i=this.events.get(t);i||(this.events.set(t,[]),i=[]),i.includes(e)||i.push(e),this.events.set(t,i)}))}off(t,e){let i=[];"string"==typeof t?i=t.split(" "):Array.isArray(t)&&(i=t),i.forEach((t=>{const i=this.events.get(t);if(Array.isArray(i)){const t=i.indexOf(e);t>-1&&i.splice(t,1)}}))}emit(t,...e){[...this.events.get(t)||[]].forEach((t=>t(this,...e))),"*"!==t&&this.emit("*",t,...e)}}Object.defineProperty(g,"version",{enumerable:!0,configurable:!0,writable:!0,value:"5.0.32"}),Object.defineProperty(g,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{}});class m extends g{constructor(t={}){super(t),Object.defineProperty(this,"plugins",{enumerable:!0,configurable:!0,writable:!0,value:{}})}attachPlugins(t={}){const e=new Map;for(const[i,n]of Object.entries(t)){const t=this.option(i),s=this.plugins[i];s||!1===t?s&&!1===t&&(s.detach(),delete this.plugins[i]):e.set(i,new n(this,t||{}))}for(const[t,i]of e)this.plugins[t]=i,i.attach()}detachPlugins(t){t=t||Object.keys(this.plugins);for(const e of t){const t=this.plugins[e];t&&t.detach(),delete this.plugins[e]}return this.emit("detachPlugins"),this}}var v;!function(t){t[t.Init=0]="Init",t[t.Error=1]="Error",t[t.Ready=2]="Ready",t[t.Panning=3]="Panning",t[t.Mousemove=4]="Mousemove",t[t.Destroy=5]="Destroy"}(v||(v={}));const b=["a","b","c","d","e","f"],y={PANUP:"Move up",PANDOWN:"Move down",PANLEFT:"Move left",PANRIGHT:"Move right",ZOOMIN:"Zoom in",ZOOMOUT:"Zoom out",TOGGLEZOOM:"Toggle zoom level",TOGGLE1TO1:"Toggle zoom level",ITERATEZOOM:"Toggle zoom level",ROTATECCW:"Rotate counterclockwise",ROTATECW:"Rotate clockwise",FLIPX:"Flip horizontally",FLIPY:"Flip vertically",FITX:"Fit horizontally",FITY:"Fit vertically",RESET:"Reset",TOGGLEFS:"Toggle fullscreen"},w={content:null,width:"auto",height:"auto",panMode:"drag",touch:!0,dragMinThreshold:3,lockAxis:!1,mouseMoveFactor:1,mouseMoveFriction:.12,zoom:!0,pinchToZoom:!0,panOnlyZoomed:"auto",minScale:1,maxScale:2,friction:.25,dragFriction:.35,decelFriction:.05,click:"toggleZoom",dblClick:!1,wheel:"zoom",wheelLimit:7,spinner:!0,bounds:"auto",infinite:!1,rubberband:!0,bounce:!0,maxVelocity:75,transformParent:!1,classes:{content:"f-panzoom__content",isLoading:"is-loading",canZoomIn:"can-zoom_in",canZoomOut:"can-zoom_out",isDraggable:"is-draggable",isDragging:"is-dragging",inFullscreen:"in-fullscreen",htmlHasFullscreen:"with-panzoom-in-fullscreen"},l10n:y},x='<circle cx="25" cy="25" r="20"></circle>',E='<div class="f-spinner"><svg viewBox="0 0 50 50">'+x+x+"</svg></div>",S=t=>t&&null!==t&&t instanceof Element&&"nodeType"in t,P=(t,e)=>{t&&o(e).forEach((e=>{t.classList.remove(e)}))},C=(t,e)=>{t&&o(e).forEach((e=>{t.classList.add(e)}))},T={a:1,b:0,c:0,d:1,e:0,f:0},M=1e5,O=1e4,A="mousemove",L="drag",z="content";let R=null,k=null;class I extends m{get fits(){return this.contentRect.width-this.contentRect.fitWidth<1&&this.contentRect.height-this.contentRect.fitHeight<1}get isTouchDevice(){return null===k&&(k=window.matchMedia("(hover: none)").matches),k}get isMobile(){return null===R&&(R=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)),R}get panMode(){return this.options.panMode!==A||this.isTouchDevice?L:A}get panOnlyZoomed(){const t=this.options.panOnlyZoomed;return"auto"===t?this.isTouchDevice:t}get isInfinite(){return this.option("infinite")}get angle(){return 180*Math.atan2(this.current.b,this.current.a)/Math.PI||0}get targetAngle(){return 180*Math.atan2(this.target.b,this.target.a)/Math.PI||0}get scale(){const{a:t,b:e}=this.current;return Math.sqrt(t*t+e*e)||1}get targetScale(){const{a:t,b:e}=this.target;return Math.sqrt(t*t+e*e)||1}get minScale(){return this.option("minScale")||1}get fullScale(){const{contentRect:t}=this;return t.fullWidth/t.fitWidth||1}get maxScale(){return this.fullScale*(this.option("maxScale")||1)||1}get coverScale(){const{containerRect:t,contentRect:e}=this,i=Math.max(t.height/e.fitHeight,t.width/e.fitWidth)||1;return Math.min(this.fullScale,i)}get isScaling(){return Math.abs(this.targetScale-this.scale)>1e-5&&!this.isResting}get isContentLoading(){const t=this.content;return!!(t&&t instanceof HTMLImageElement)&&!t.complete}get isResting(){if(this.isBouncingX||this.isBouncingY)return!1;for(const t of b){const e="e"==t||"f"===t?1e-4:1e-5;if(Math.abs(this.target[t]-this.current[t])>e)return!1}return!(!this.ignoreBounds&&!this.checkBounds().inBounds)}constructor(t,e={},i={}){var n;if(super(e),Object.defineProperty(this,"pointerTracker",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"resizeObserver",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"updateTimer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"clickTimer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"rAF",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"isTicking",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreBounds",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"isBouncingX",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"isBouncingY",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"clicks",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"trackingPoints",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"pwt",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"cwd",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"pmme",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"friction",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:v.Init}),Object.defineProperty(this,"isDragging",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"content",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"spinner",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"containerRect",{enumerable:!0,configurable:!0,writable:!0,value:{width:0,height:0,innerWidth:0,innerHeight:0}}),Object.defineProperty(this,"contentRect",{enumerable:!0,configurable:!0,writable:!0,value:{top:0,right:0,bottom:0,left:0,fullWidth:0,fullHeight:0,fitWidth:0,fitHeight:0,width:0,height:0}}),Object.defineProperty(this,"dragStart",{enumerable:!0,configurable:!0,writable:!0,value:{x:0,y:0,top:0,left:0,time:0}}),Object.defineProperty(this,"dragOffset",{enumerable:!0,configurable:!0,writable:!0,value:{x:0,y:0,time:0}}),Object.defineProperty(this,"current",{enumerable:!0,configurable:!0,writable:!0,value:Object.assign({},T)}),Object.defineProperty(this,"target",{enumerable:!0,configurable:!0,writable:!0,value:Object.assign({},T)}),Object.defineProperty(this,"velocity",{enumerable:!0,configurable:!0,writable:!0,value:{a:0,b:0,c:0,d:0,e:0,f:0}}),Object.defineProperty(this,"lockedAxis",{enumerable:!0,configurable:!0,writable:!0,value:!1}),!t)throw new Error("Container Element Not Found");this.container=t,this.initContent(),this.attachPlugins(Object.assign(Object.assign({},I.Plugins),i)),this.emit("attachPlugins"),this.emit("init");const o=this.content;if(o.addEventListener("load",this.onLoad),o.addEventListener("error",this.onError),this.isContentLoading){if(this.option("spinner")){t.classList.add(this.cn("isLoading"));const e=s(E);!t.contains(o)||o.parentElement instanceof HTMLPictureElement?this.spinner=t.appendChild(e):this.spinner=(null===(n=o.parentElement)||void 0===n?void 0:n.insertBefore(e,o))||null}this.emit("beforeLoad")}else queueMicrotask((()=>{this.enable()}))}initContent(){const{container:t}=this,e=this.cn(z);let i=this.option(z)||t.querySelector(`.${e}`);if(i||(i=t.querySelector("img,picture")||t.firstElementChild,i&&C(i,e)),i instanceof HTMLPictureElement&&(i=i.querySelector("img")),!i)throw new Error("No content found");this.content=i}onLoad(){const{spinner:t,container:e,state:i}=this;t&&(t.remove(),this.spinner=null),this.option("spinner")&&e.classList.remove(this.cn("isLoading")),this.emit("afterLoad"),i===v.Init?this.enable():this.updateMetrics()}onError(){this.state!==v.Destroy&&(this.spinner&&(this.spinner.remove(),this.spinner=null),this.stop(),this.detachEvents(),this.state=v.Error,this.emit("error"))}attachObserver(){var t;const e=()=>{const{container:t,containerRect:e}=this;return Math.abs(e.width-t.getBoundingClientRect().width)>.1||Math.abs(e.height-t.getBoundingClientRect().height)>.1};this.resizeObserver||void 0===window.ResizeObserver||(this.resizeObserver=new ResizeObserver((()=>{this.updateTimer||(e()?(this.onResize(),this.isMobile&&(this.updateTimer=setTimeout((()=>{e()&&this.onResize(),this.updateTimer=null}),500))):this.updateTimer&&(clearTimeout(this.updateTimer),this.updateTimer=null))}))),null===(t=this.resizeObserver)||void 0===t||t.observe(this.container)}detachObserver(){var t;null===(t=this.resizeObserver)||void 0===t||t.disconnect()}attachEvents(){const{container:t}=this;t.addEventListener("click",this.onClick,{passive:!1,capture:!1}),t.addEventListener("wheel",this.onWheel,{passive:!1}),this.pointerTracker=new c(t,{start:this.onPointerDown,move:this.onPointerMove,end:this.onPointerUp}),document.addEventListener(A,this.onMouseMove)}detachEvents(){var t;const{container:e}=this;e.removeEventListener("click",this.onClick,{passive:!1,capture:!1}),e.removeEventListener("wheel",this.onWheel,{passive:!1}),null===(t=this.pointerTracker)||void 0===t||t.stop(),this.pointerTracker=null,document.removeEventListener(A,this.onMouseMove),document.removeEventListener("keydown",this.onKeydown,!0),this.clickTimer&&(clearTimeout(this.clickTimer),this.clickTimer=null),this.updateTimer&&(clearTimeout(this.updateTimer),this.updateTimer=null)}animate(){this.setTargetForce();const t=this.friction,e=this.option("maxVelocity");for(const i of b)t?(this.velocity[i]*=1-t,e&&!this.isScaling&&(this.velocity[i]=Math.max(Math.min(this.velocity[i],e),-1*e)),this.current[i]+=this.velocity[i]):this.current[i]=this.target[i];this.setTransform(),this.setEdgeForce(),!this.isResting||this.isDragging?this.rAF=requestAnimationFrame((()=>this.animate())):this.stop("current")}setTargetForce(){for(const t of b)"e"===t&&this.isBouncingX||"f"===t&&this.isBouncingY||(this.velocity[t]=(1/(1-this.friction)-1)*(this.target[t]-this.current[t]))}checkBounds(t=0,e=0){const{current:i}=this,n=i.e+t,s=i.f+e,o=this.getBounds(),{x:a,y:r}=o,l=a.min,c=a.max,h=r.min,d=r.max;let u=0,f=0;return l!==1/0&&n<l?u=l-n:c!==1/0&&n>c&&(u=c-n),h!==1/0&&s<h?f=h-s:d!==1/0&&s>d&&(f=d-s),Math.abs(u)<1e-4&&(u=0),Math.abs(f)<1e-4&&(f=0),Object.assign(Object.assign({},o),{xDiff:u,yDiff:f,inBounds:!u&&!f})}clampTargetBounds(){const{target:t}=this,{x:e,y:i}=this.getBounds();e.min!==1/0&&(t.e=Math.max(t.e,e.min)),e.max!==1/0&&(t.e=Math.min(t.e,e.max)),i.min!==1/0&&(t.f=Math.max(t.f,i.min)),i.max!==1/0&&(t.f=Math.min(t.f,i.max))}calculateContentDim(t=this.current){const{content:e,contentRect:i}=this,{fitWidth:n,fitHeight:s,fullWidth:o,fullHeight:a}=i;let r=o,l=a;if(this.option("zoom")||0!==this.angle){const i=!(e instanceof HTMLImageElement)&&("none"===window.getComputedStyle(e).maxWidth||"none"===window.getComputedStyle(e).maxHeight),c=i?o:n,h=i?a:s,d=this.getMatrix(t),u=new DOMPoint(0,0).matrixTransform(d),f=new DOMPoint(0+c,0).matrixTransform(d),p=new DOMPoint(0+c,0+h).matrixTransform(d),g=new DOMPoint(0,0+h).matrixTransform(d),m=Math.abs(p.x-u.x),v=Math.abs(p.y-u.y),b=Math.abs(g.x-f.x),y=Math.abs(g.y-f.y);r=Math.max(m,b),l=Math.max(v,y)}return{contentWidth:r,contentHeight:l}}setEdgeForce(){if(this.ignoreBounds||this.isDragging||this.panMode===A||this.targetScale<this.scale)return this.isBouncingX=!1,void(this.isBouncingY=!1);const{target:t}=this,{x:e,y:i,xDiff:n,yDiff:s}=this.checkBounds();const o=this.option("maxVelocity");let a=this.velocity.e,r=this.velocity.f;0!==n?(this.isBouncingX=!0,n*a<=0?a+=.14*n:(a=.14*n,e.min!==1/0&&(this.target.e=Math.max(t.e,e.min)),e.max!==1/0&&(this.target.e=Math.min(t.e,e.max))),o&&(a=Math.max(Math.min(a,o),-1*o))):this.isBouncingX=!1,0!==s?(this.isBouncingY=!0,s*r<=0?r+=.14*s:(r=.14*s,i.min!==1/0&&(this.target.f=Math.max(t.f,i.min)),i.max!==1/0&&(this.target.f=Math.min(t.f,i.max))),o&&(r=Math.max(Math.min(r,o),-1*o))):this.isBouncingY=!1,this.isBouncingX&&(this.velocity.e=a),this.isBouncingY&&(this.velocity.f=r)}enable(){const{content:t}=this,e=new DOMMatrixReadOnly(window.getComputedStyle(t).transform);for(const t of b)this.current[t]=this.target[t]=e[t];this.updateMetrics(),this.attachObserver(),this.attachEvents(),this.state=v.Ready,this.emit("ready")}onClick(t){var e;"click"===t.type&&0===t.detail&&(this.dragOffset.x=0,this.dragOffset.y=0),this.isDragging&&(null===(e=this.pointerTracker)||void 0===e||e.clear(),this.trackingPoints=[],this.startDecelAnim());const i=t.target;if(!i||t.defaultPrevented)return;if(i.hasAttribute("disabled"))return t.preventDefault(),void t.stopPropagation();if((()=>{const t=window.getSelection();return t&&"Range"===t.type})()&&!i.closest("button"))return;const n=i.closest("[data-panzoom-action]"),s=i.closest("[data-panzoom-change]"),o=n||s,a=o&&S(o)?o.dataset:null;if(a){const e=a.panzoomChange,i=a.panzoomAction;if((e||i)&&t.preventDefault(),e){let t={};try{t=JSON.parse(e)}catch(t){console&&console.warn("The given data was not valid JSON")}return void this.applyChange(t)}if(i)return void(this[i]&&this[i]())}if(Math.abs(this.dragOffset.x)>3||Math.abs(this.dragOffset.y)>3)return t.preventDefault(),void t.stopPropagation();if(i.closest("[data-fancybox]"))return;const r=this.content.getBoundingClientRect(),l=this.dragStart;if(l.time&&!this.canZoomOut()&&(Math.abs(r.x-l.x)>2||Math.abs(r.y-l.y)>2))return;this.dragStart.time=0;const c=e=>{this.option("zoom",t)&&e&&"string"==typeof e&&/(iterateZoom)|(toggle(Zoom|Full|Cover|Max)|(zoomTo(Fit|Cover|Max)))/.test(e)&&"function"==typeof this[e]&&(t.preventDefault(),this[e]({event:t}))},h=this.option("click",t),d=this.option("dblClick",t);d?(this.clicks++,1==this.clicks&&(this.clickTimer=setTimeout((()=>{1===this.clicks?(this.emit("click",t),!t.defaultPrevented&&h&&c(h)):(this.emit("dblClick",t),t.defaultPrevented||c(d)),this.clicks=0,this.clickTimer=null}),350))):(this.emit("click",t),!t.defaultPrevented&&h&&c(h))}addTrackingPoint(t){const e=this.trackingPoints.filter((t=>t.time>Date.now()-100));e.push(t),this.trackingPoints=e}onPointerDown(t,e,i){var n;if(!1===this.option("touch",t))return!1;this.pwt=0,this.dragOffset={x:0,y:0,time:0},this.trackingPoints=[];const s=this.content.getBoundingClientRect();if(this.dragStart={x:s.x,y:s.y,top:s.top,left:s.left,time:Date.now()},this.clickTimer)return!1;if(this.panMode===A&&this.targetScale>1)return t.preventDefault(),t.stopPropagation(),!1;const o=t.composedPath()[0];if(!i.length){if(["TEXTAREA","OPTION","INPUT","SELECT","VIDEO","IFRAME"].includes(o.nodeName)||o.closest("[contenteditable],[data-selectable],[data-draggable],[data-clickable],[data-panzoom-change],[data-panzoom-action]"))return!1;null===(n=window.getSelection())||void 0===n||n.removeAllRanges()}if("mousedown"===t.type)["A","BUTTON"].includes(o.nodeName)||t.preventDefault();else if(Math.abs(this.velocity.a)>.3)return!1;return this.target.e=this.current.e,this.target.f=this.current.f,this.stop(),this.isDragging||(this.isDragging=!0,this.addTrackingPoint(e),this.emit("touchStart",t)),!0}onPointerMove(t,i,s){if(!1===this.option("touch",t))return;if(!this.isDragging)return;if(i.length<2&&this.panOnlyZoomed&&e(this.targetScale)<=e(this.minScale))return;if(this.emit("touchMove",t),t.defaultPrevented)return;this.addTrackingPoint(i[0]);const{content:o}=this,a=d(s[0],s[1]),r=d(i[0],i[1]);let l=0,c=0;if(i.length>1){const t=o.getBoundingClientRect();l=a.clientX-t.left-.5*t.width,c=a.clientY-t.top-.5*t.height}const u=h(s[0],s[1]),f=h(i[0],i[1]);let p=u?f/u:1,g=r.clientX-a.clientX,m=r.clientY-a.clientY;this.dragOffset.x+=g,this.dragOffset.y+=m,this.dragOffset.time=Date.now()-this.dragStart.time;let v=e(this.targetScale)===e(this.minScale)&&this.option("lockAxis");if(v&&!this.lockedAxis)if("xy"===v||"y"===v||"touchmove"===t.type){if(Math.abs(this.dragOffset.x)<6&&Math.abs(this.dragOffset.y)<6)return void t.preventDefault();const e=Math.abs(180*Math.atan2(this.dragOffset.y,this.dragOffset.x)/Math.PI);this.lockedAxis=e>45&&e<135?"y":"x",this.dragOffset.x=0,this.dragOffset.y=0,g=0,m=0}else this.lockedAxis=v;if(n(t.target,this.content)&&(v="x",this.dragOffset.y=0),v&&"xy"!==v&&this.lockedAxis!==v&&e(this.targetScale)===e(this.minScale))return;t.cancelable&&t.preventDefault(),this.container.classList.add(this.cn("isDragging"));const b=this.checkBounds(g,m);this.option("rubberband")?("x"!==this.isInfinite&&(b.xDiff>0&&g<0||b.xDiff<0&&g>0)&&(g*=Math.max(0,.5-Math.abs(.75/this.contentRect.fitWidth*b.xDiff))),"y"!==this.isInfinite&&(b.yDiff>0&&m<0||b.yDiff<0&&m>0)&&(m*=Math.max(0,.5-Math.abs(.75/this.contentRect.fitHeight*b.yDiff)))):(b.xDiff&&(g=0),b.yDiff&&(m=0));const y=this.targetScale,w=this.minScale,x=this.maxScale;y<.5*w&&(p=Math.max(p,w)),y>1.5*x&&(p=Math.min(p,x)),"y"===this.lockedAxis&&e(y)===e(w)&&(g=0),"x"===this.lockedAxis&&e(y)===e(w)&&(m=0),this.applyChange({originX:l,originY:c,panX:g,panY:m,scale:p,friction:this.option("dragFriction"),ignoreBounds:!0})}onPointerUp(t,e,i){if(i.length)return this.dragOffset.x=0,this.dragOffset.y=0,void(this.trackingPoints=[]);this.container.classList.remove(this.cn("isDragging")),this.isDragging&&(this.addTrackingPoint(e),this.panOnlyZoomed&&this.contentRect.width-this.contentRect.fitWidth<1&&this.contentRect.height-this.contentRect.fitHeight<1&&(this.trackingPoints=[]),n(t.target,this.content)&&"y"===this.lockedAxis&&(this.trackingPoints=[]),this.emit("touchEnd",t),this.isDragging=!1,this.lockedAxis=!1,this.state!==v.Destroy&&(t.defaultPrevented||this.startDecelAnim()))}startDecelAnim(){var t;const i=this.isScaling;this.rAF&&(cancelAnimationFrame(this.rAF),this.rAF=null),this.isBouncingX=!1,this.isBouncingY=!1;for(const t of b)this.velocity[t]=0;this.target.e=this.current.e,this.target.f=this.current.f,P(this.container,"is-scaling"),P(this.container,"is-animating"),this.isTicking=!1;const{trackingPoints:n}=this,s=n[0],o=n[n.length-1];let a=0,r=0,l=0;o&&s&&(a=o.clientX-s.clientX,r=o.clientY-s.clientY,l=o.time-s.time);const c=(null===(t=window.visualViewport)||void 0===t?void 0:t.scale)||1;1!==c&&(a*=c,r*=c);let h=0,d=0,u=0,f=0,p=this.option("decelFriction");const g=this.targetScale;if(l>0){u=Math.abs(a)>3?a/(l/30):0,f=Math.abs(r)>3?r/(l/30):0;const t=this.option("maxVelocity");t&&(u=Math.max(Math.min(u,t),-1*t),f=Math.max(Math.min(f,t),-1*t))}u&&(h=u/(1/(1-p)-1)),f&&(d=f/(1/(1-p)-1)),("y"===this.option("lockAxis")||"xy"===this.option("lockAxis")&&"y"===this.lockedAxis&&e(g)===this.minScale)&&(h=u=0),("x"===this.option("lockAxis")||"xy"===this.option("lockAxis")&&"x"===this.lockedAxis&&e(g)===this.minScale)&&(d=f=0);const m=this.dragOffset.x,v=this.dragOffset.y,y=this.option("dragMinThreshold")||0;Math.abs(m)<y&&Math.abs(v)<y&&(h=d=0,u=f=0),(this.option("zoom")&&(g<this.minScale-1e-5||g>this.maxScale+1e-5)||i&&!h&&!d)&&(p=.35),this.applyChange({panX:h,panY:d,friction:p}),this.emit("decel",u,f,m,v)}onWheel(t){var e=[-t.deltaX||0,-t.deltaY||0,-t.detail||0].reduce((function(t,e){return Math.abs(e)>Math.abs(t)?e:t}));const i=Math.max(-1,Math.min(1,e));if(this.emit("wheel",t,i),this.panMode===A)return;if(t.defaultPrevented)return;const n=this.option("wheel");"pan"===n?(t.preventDefault(),this.panOnlyZoomed&&!this.canZoomOut()||this.applyChange({panX:2*-t.deltaX,panY:2*-t.deltaY,bounce:!1})):"zoom"===n&&!1!==this.option("zoom")&&this.zoomWithWheel(t)}onMouseMove(t){this.panWithMouse(t)}onKeydown(t){"Escape"===t.key&&this.toggleFS()}onResize(){this.updateMetrics(),this.checkBounds().inBounds||this.requestTick()}setTransform(){this.emit("beforeTransform");const{current:t,target:i,content:n,contentRect:s}=this,o=Object.assign({},T);for(const n of b){const s="e"==n||"f"===n?O:M;o[n]=e(t[n],s),Math.abs(i[n]-t[n])<("e"==n||"f"===n?.51:.001)&&(t[n]=i[n])}let{a:a,b:r,c:l,d:c,e:h,f:d}=o,u=`matrix(${a}, ${r}, ${l}, ${c}, ${h}, ${d})`,f=n.parentElement instanceof HTMLPictureElement?n.parentElement:n;if(this.option("transformParent")&&(f=f.parentElement||f),f.style.transform===u)return;f.style.transform=u;const{contentWidth:p,contentHeight:g}=this.calculateContentDim();s.width=p,s.height=g,this.emit("afterTransform")}updateMetrics(t=!1){var i;if(!this||this.state===v.Destroy)return;if(this.isContentLoading)return;const n=Math.max(1,(null===(i=window.visualViewport)||void 0===i?void 0:i.scale)||1),{container:s,content:o}=this,a=o instanceof HTMLImageElement,r=s.getBoundingClientRect(),l=getComputedStyle(this.container);let c=r.width*n,h=r.height*n;const d=parseFloat(l.paddingTop)+parseFloat(l.paddingBottom),u=c-(parseFloat(l.paddingLeft)+parseFloat(l.paddingRight)),f=h-d;this.containerRect={width:c,height:h,innerWidth:u,innerHeight:f};let p=this.option("width")||"auto",g=this.option("height")||"auto";"auto"===p&&(p=parseFloat(o.dataset.width||"")||(t=>{let e=0;return e=t instanceof HTMLImageElement?t.naturalWidth:t instanceof SVGElement?t.width.baseVal.value:Math.max(t.offsetWidth,t.scrollWidth),e||0})(o)),"auto"===g&&(g=parseFloat(o.dataset.height||"")||(t=>{let e=0;return e=t instanceof HTMLImageElement?t.naturalHeight:t instanceof SVGElement?t.height.baseVal.value:Math.max(t.offsetHeight,t.scrollHeight),e||0})(o));let m=o.parentElement instanceof HTMLPictureElement?o.parentElement:o;this.option("transformParent")&&(m=m.parentElement||m);const b=m.getAttribute("style")||"";m.style.setProperty("transform","none","important"),a&&(m.style.width="",m.style.height=""),m.offsetHeight;const y=o.getBoundingClientRect();let w=y.width*n,x=y.height*n,E=0,S=0;a&&(Math.abs(p-w)>1||Math.abs(g-x)>1)&&({width:w,height:x,top:E,left:S}=((t,e,i,n)=>{const s=i/n;return s>t/e?(i=t,n=t/s):(i=e*s,n=e),{width:i,height:n,top:.5*(e-n),left:.5*(t-i)}})(w,x,p,g)),this.contentRect=Object.assign(Object.assign({},this.contentRect),{top:y.top-r.top+E,bottom:r.bottom-y.bottom+E,left:y.left-r.left+S,right:r.right-y.right+S,fitWidth:w,fitHeight:x,width:w,height:x,fullWidth:p,fullHeight:g}),m.style.cssText=b,a&&(m.style.width=`${w}px`,m.style.height=`${x}px`),this.setTransform(),!0!==t&&this.emit("refresh"),this.ignoreBounds||(e(this.targetScale)<e(this.minScale)?this.zoomTo(this.minScale,{friction:0}):this.targetScale>this.maxScale?this.zoomTo(this.maxScale,{friction:0}):this.state===v.Init||this.checkBounds().inBounds||this.requestTick()),this.updateControls()}calculateBounds(){const{contentWidth:t,contentHeight:i}=this.calculateContentDim(this.target),{targetScale:n,lockedAxis:s}=this,{fitWidth:o,fitHeight:a}=this.contentRect;let r=0,l=0,c=0,h=0;const d=this.option("infinite");if(!0===d||s&&d===s)r=-1/0,c=1/0,l=-1/0,h=1/0;else{let{containerRect:s,contentRect:d}=this,u=e(o*n,O),f=e(a*n,O),{innerWidth:p,innerHeight:g}=s;if(s.width===u&&(p=s.width),s.width===f&&(g=s.height),t>p){c=.5*(t-p),r=-1*c;let e=.5*(d.right-d.left);r+=e,c+=e}if(o>p&&t<p&&(r-=.5*(o-p),c-=.5*(o-p)),i>g){h=.5*(i-g),l=-1*h;let t=.5*(d.bottom-d.top);l+=t,h+=t}a>g&&i<g&&(r-=.5*(a-g),c-=.5*(a-g))}return{x:{min:r,max:c},y:{min:l,max:h}}}getBounds(){const t=this.option("bounds");return"auto"!==t?t:this.calculateBounds()}updateControls(){const t=this,i=t.container,{panMode:n,contentRect:s,fullScale:o,targetScale:r,coverScale:l,maxScale:c,minScale:h}=t;let d={toggleMax:r-h<.5*(c-h)?c:h,toggleCover:r-h<.5*(l-h)?l:h,toggleZoom:r-h<.5*(o-h)?o:h}[t.option("click")||""]||h,u=t.canZoomIn(),f=t.canZoomOut(),p=n===L&&!!this.option("touch"),g=f&&p;if(p&&(e(r)<e(h)&&!this.panOnlyZoomed&&(g=!0),(e(s.width,1)>e(s.fitWidth,1)||e(s.height,1)>e(s.fitHeight,1))&&(g=!0)),e(s.width*r,1)<e(s.fitWidth,1)&&(g=!1),n===A&&(g=!1),a(i,this.cn("isDraggable"),g),!this.option("zoom"))return;let m=u&&e(d)>e(r),v=!m&&!g&&f&&e(d)<e(r);a(i,this.cn("canZoomIn"),m),a(i,this.cn("canZoomOut"),v);for(const t of i.querySelectorAll('[data-panzoom-action="zoomIn"]'))u?(t.removeAttribute("disabled"),t.removeAttribute("tabindex")):(t.setAttribute("disabled",""),t.setAttribute("tabindex","-1"));for(const t of i.querySelectorAll('[data-panzoom-action="zoomOut"]'))f?(t.removeAttribute("disabled"),t.removeAttribute("tabindex")):(t.setAttribute("disabled",""),t.setAttribute("tabindex","-1"));for(const t of i.querySelectorAll('[data-panzoom-action="toggleZoom"],[data-panzoom-action="iterateZoom"]')){u||f?(t.removeAttribute("disabled"),t.removeAttribute("tabindex")):(t.setAttribute("disabled",""),t.setAttribute("tabindex","-1"));const e=t.querySelector("g");e&&(e.style.display=u?"":"none")}}panTo({x:t=this.target.e,y:e=this.target.f,scale:i=this.targetScale,friction:n=this.option("friction"),angle:s=0,originX:o=0,originY:a=0,flipX:r=!1,flipY:l=!1,ignoreBounds:c=!1}){this.state!==v.Destroy&&this.applyChange({panX:t-this.target.e,panY:e-this.target.f,scale:i/this.targetScale,angle:s,originX:o,originY:a,friction:n,flipX:r,flipY:l,ignoreBounds:c})}applyChange({panX:t=0,panY:i=0,scale:n=1,angle:s=0,originX:o=-this.current.e,originY:a=-this.current.f,friction:r=this.option("friction"),flipX:l=!1,flipY:c=!1,ignoreBounds:h=!1,bounce:d=this.option("bounce")}){const u=this.state;if(u===v.Destroy)return;this.rAF&&(cancelAnimationFrame(this.rAF),this.rAF=null),this.friction=r||0,this.ignoreBounds=h;const{current:f}=this,p=f.e,g=f.f,m=this.getMatrix(this.target);let y=(new DOMMatrix).translate(p,g).translate(o,a).translate(t,i);if(this.option("zoom")){if(!h){const t=this.targetScale,e=this.minScale,i=this.maxScale;t*n<e&&(n=e/t),t*n>i&&(n=i/t)}y=y.scale(n)}y=y.translate(-o,-a).translate(-p,-g).multiply(m),s&&(y=y.rotate(s)),l&&(y=y.scale(-1,1)),c&&(y=y.scale(1,-1));for(const t of b)"e"!==t&&"f"!==t&&(y[t]>this.minScale+1e-5||y[t]<this.minScale-1e-5)?this.target[t]=y[t]:this.target[t]=e(y[t],O);(this.targetScale<this.scale||Math.abs(n-1)>.1||this.panMode===A||!1===d)&&!h&&this.clampTargetBounds(),u===v.Init?this.animate():this.isResting||(this.state=v.Panning,this.requestTick())}stop(t=!1){if(this.state===v.Init||this.state===v.Destroy)return;const e=this.isTicking;this.rAF&&(cancelAnimationFrame(this.rAF),this.rAF=null),this.isBouncingX=!1,this.isBouncingY=!1;for(const e of b)this.velocity[e]=0,"current"===t?this.current[e]=this.target[e]:"target"===t&&(this.target[e]=this.current[e]);this.setTransform(),P(this.container,"is-scaling"),P(this.container,"is-animating"),this.isTicking=!1,this.state=v.Ready,e&&(this.emit("endAnimation"),this.updateControls())}requestTick(){this.isTicking||(this.emit("startAnimation"),this.updateControls(),C(this.container,"is-animating"),this.isScaling&&C(this.container,"is-scaling")),this.isTicking=!0,this.rAF||(this.rAF=requestAnimationFrame((()=>this.animate())))}panWithMouse(t,i=this.option("mouseMoveFriction")){if(this.pmme=t,this.panMode!==A||!t)return;if(e(this.targetScale)<=e(this.minScale))return;this.emit("mouseMove",t);const{container:n,containerRect:s,contentRect:o}=this,a=s.width,r=s.height,l=n.getBoundingClientRect(),c=(t.clientX||0)-l.left,h=(t.clientY||0)-l.top;let{contentWidth:d,contentHeight:u}=this.calculateContentDim(this.target);const f=this.option("mouseMoveFactor");f>1&&(d!==a&&(d*=f),u!==r&&(u*=f));let p=.5*(d-a)-c/a*100/100*(d-a);p+=.5*(o.right-o.left);let g=.5*(u-r)-h/r*100/100*(u-r);g+=.5*(o.bottom-o.top),this.applyChange({panX:p-this.target.e,panY:g-this.target.f,friction:i})}zoomWithWheel(t){if(this.state===v.Destroy||this.state===v.Init)return;const i=Date.now();if(i-this.pwt<45)return void t.preventDefault();this.pwt=i;var n=[-t.deltaX||0,-t.deltaY||0,-t.detail||0].reduce((function(t,e){return Math.abs(e)>Math.abs(t)?e:t}));const s=Math.max(-1,Math.min(1,n)),{targetScale:o,maxScale:a,minScale:r}=this;let l=o*(100+45*s)/100;e(l)<e(r)&&e(o)<=e(r)?(this.cwd+=Math.abs(s),l=r):e(l)>e(a)&&e(o)>=e(a)?(this.cwd+=Math.abs(s),l=a):(this.cwd=0,l=Math.max(Math.min(l,a),r)),this.cwd>this.option("wheelLimit")||(t.preventDefault(),e(l)!==e(o)&&this.zoomTo(l,{event:t}))}canZoomIn(){return this.option("zoom")&&(e(this.contentRect.width,1)<e(this.contentRect.fitWidth,1)||e(this.targetScale)<e(this.maxScale))}canZoomOut(){return this.option("zoom")&&e(this.targetScale)>e(this.minScale)}zoomIn(t=1.25,e){this.zoomTo(this.targetScale*t,e)}zoomOut(t=.8,e){this.zoomTo(this.targetScale*t,e)}zoomToFit(t){this.zoomTo("fit",t)}zoomToCover(t){this.zoomTo("cover",t)}zoomToFull(t){this.zoomTo("full",t)}zoomToMax(t){this.zoomTo("max",t)}toggleZoom(t){this.zoomTo(this.targetScale-this.minScale<.5*(this.fullScale-this.minScale)?"full":"fit",t)}toggleMax(t){this.zoomTo(this.targetScale-this.minScale<.5*(this.maxScale-this.minScale)?"max":"fit",t)}toggleCover(t){this.zoomTo(this.targetScale-this.minScale<.5*(this.coverScale-this.minScale)?"cover":"fit",t)}iterateZoom(t){this.zoomTo("next",t)}zoomTo(t=1,{friction:e="auto",originX:i="auto",originY:n="auto",event:s}={}){if(this.isContentLoading||this.state===v.Destroy)return;const{targetScale:o}=this;this.stop();let a=1;if(this.panMode===A&&(s=this.pmme||s),s||"auto"===i||"auto"===n){const t=this.content.getBoundingClientRect(),e=this.container.getBoundingClientRect(),o=s?s.clientX:e.left+.5*e.width,a=s?s.clientY:e.top+.5*e.height;i=o-t.left-.5*t.width,n=a-t.top-.5*t.height}const r=this.fullScale,l=this.maxScale,c=this.coverScale;if("number"==typeof t)a=t/o||1;else if("full"===t)a=r/o||1;else if("cover"===t)a=c/o||1;else if("max"===t)a=l/o||1;else if("fit"===t)a=1/o||1;else if("next"===t){let t=[1,r,l].sort(((t,e)=>t-e)),e=t.findIndex((t=>t>o+1e-5));a=t[e]/o||1/o}e="auto"===e?a>1?.15:.25:e,this.applyChange({scale:a,originX:i,originY:n,friction:e}),s&&this.panMode===A&&this.panWithMouse(s,e)}rotateCCW(){this.applyChange({angle:-90})}rotateCW(){this.applyChange({angle:90})}flipX(){this.applyChange({flipX:!0})}flipY(){this.applyChange({flipY:!0})}fitX(){this.stop("target");const{containerRect:t,contentRect:e,target:i}=this;this.applyChange({panX:.5*t.width-(e.left+.5*e.fitWidth)-i.e,panY:.5*t.height-(e.top+.5*e.fitHeight)-i.f,scale:t.width/e.fitWidth/this.targetScale,originX:0,originY:0,ignoreBounds:!0})}fitY(){this.stop("target");const{containerRect:t,contentRect:e,target:i}=this;this.applyChange({panX:.5*t.width-(e.left+.5*e.fitWidth)-i.e,panY:.5*t.innerHeight-(e.top+.5*e.fitHeight)-i.f,scale:t.height/e.fitHeight/this.targetScale,originX:0,originY:0,ignoreBounds:!0})}toggleFS(){const{container:t}=this,e=this.cn("inFullscreen"),i=this.cn("htmlHasFullscreen");t.classList.toggle(e);const n=t.classList.contains(e);n?(document.documentElement.classList.add(i),document.addEventListener("keydown",this.onKeydown,!0)):(document.documentElement.classList.remove(i),document.removeEventListener("keydown",this.onKeydown,!0)),this.updateMetrics(),this.emit(n?"enterFS":"exitFS")}getMatrix(t=this.current){const{a:e,b:i,c:n,d:s,e:o,f:a}=t;return new DOMMatrix([e,i,n,s,o,a])}reset(t){if(this.state!==v.Init&&this.state!==v.Destroy){this.stop("current");for(const t of b)this.target[t]=T[t];this.target.a=this.minScale,this.target.d=this.minScale,this.clampTargetBounds(),this.isResting||(this.friction=void 0===t?this.option("friction"):t,this.state=v.Panning,this.requestTick())}}destroy(){this.stop(),this.state=v.Destroy,this.detachEvents(),this.detachObserver();const{container:t,content:e}=this,i=this.option("classes")||{};for(const e of Object.values(i))t.classList.remove(e+"");e&&(e.removeEventListener("load",this.onLoad),e.removeEventListener("error",this.onError)),this.detachPlugins()}}Object.defineProperty(I,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:w}),Object.defineProperty(I,"Plugins",{enumerable:!0,configurable:!0,writable:!0,value:{}});const D=function(t,e){let i=!0;return(...n)=>{i&&(i=!1,t(...n),setTimeout((()=>{i=!0}),e))}},F=(t,e)=>{let i=[];return t.childNodes.forEach((t=>{t.nodeType!==Node.ELEMENT_NODE||e&&!t.matches(e)||i.push(t)})),i},j={viewport:null,track:null,enabled:!0,slides:[],axis:"x",transition:"fade",preload:1,slidesPerPage:"auto",initialPage:0,friction:.12,Panzoom:{decelFriction:.12},center:!0,infinite:!0,fill:!0,dragFree:!1,adaptiveHeight:!1,direction:"ltr",classes:{container:"f-carousel",viewport:"f-carousel__viewport",track:"f-carousel__track",slide:"f-carousel__slide",isLTR:"is-ltr",isRTL:"is-rtl",isHorizontal:"is-horizontal",isVertical:"is-vertical",inTransition:"in-transition",isSelected:"is-selected"},l10n:{NEXT:"Next slide",PREV:"Previous slide",GOTO:"Go to slide #%d"}};var B;!function(t){t[t.Init=0]="Init",t[t.Ready=1]="Ready",t[t.Destroy=2]="Destroy"}(B||(B={}));const H=t=>{if("string"==typeof t||t instanceof HTMLElement)t={html:t};else{const e=t.thumb;void 0!==e&&("string"==typeof e&&(t.thumbSrc=e),e instanceof HTMLImageElement&&(t.thumbEl=e,t.thumbElSrc=e.src,t.thumbSrc=e.src),delete t.thumb)}return Object.assign({html:"",el:null,isDom:!1,class:"",customClass:"",index:-1,dim:0,gap:0,pos:0,transition:!1},t)},N=(t={})=>Object.assign({index:-1,slides:[],dim:0,pos:-1},t);class _ extends g{constructor(t,e){super(e),Object.defineProperty(this,"instance",{enumerable:!0,configurable:!0,writable:!0,value:t})}attach(){}detach(){}}const $={classes:{list:"f-carousel__dots",isDynamic:"is-dynamic",hasDots:"has-dots",dot:"f-carousel__dot",isBeforePrev:"is-before-prev",isPrev:"is-prev",isCurrent:"is-current",isNext:"is-next",isAfterNext:"is-after-next"},dotTpl:'<button type="button" data-carousel-page="%i" aria-label="{{GOTO}}"><span class="f-carousel__dot" aria-hidden="true"></span></button>',dynamicFrom:11,maxCount:1/0,minCount:2};class W extends _{constructor(){super(...arguments),Object.defineProperty(this,"isDynamic",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"list",{enumerable:!0,configurable:!0,writable:!0,value:null})}onRefresh(){this.refresh()}build(){let t=this.list;if(!t){t=document.createElement("ul"),C(t,this.cn("list")),t.setAttribute("role","tablist");const e=this.instance.container;e.appendChild(t),C(e,this.cn("hasDots")),this.list=t}return t}refresh(){var t;const e=this.instance.pages.length,i=Math.min(2,this.option("minCount")),n=Math.max(2e3,this.option("maxCount")),s=this.option("dynamicFrom");if(e<i||e>n)return void this.cleanup();const o="number"==typeof s&&e>5&&e>=s,r=!this.list||this.isDynamic!==o||this.list.children.length!==e;r&&this.cleanup();const l=this.build();if(a(l,this.cn("isDynamic"),!!o),r)for(let t=0;t<e;t++)l.append(this.createItem(t));let c,h=0;for(const e of[...l.children]){const i=h===this.instance.page;i&&(c=e),a(e,this.cn("isCurrent"),i),null===(t=e.children[0])||void 0===t||t.setAttribute("aria-selected",i?"true":"false");for(const t of["isBeforePrev","isPrev","isNext","isAfterNext"])P(e,this.cn(t));h++}if(c=c||l.firstChild,o&&c){const t=c.previousElementSibling,e=t&&t.previousElementSibling;C(t,this.cn("isPrev")),C(e,this.cn("isBeforePrev"));const i=c.nextElementSibling,n=i&&i.nextElementSibling;C(i,this.cn("isNext")),C(n,this.cn("isAfterNext"))}this.isDynamic=o}createItem(t=0){var e;const i=document.createElement("li");i.setAttribute("role","presentation");const n=s(this.instance.localize(this.option("dotTpl"),[["%d",t+1]]).replace(/\%i/g,t+""));return i.appendChild(n),null===(e=i.children[0])||void 0===e||e.setAttribute("role","tab"),i}cleanup(){this.list&&(this.list.remove(),this.list=null),this.isDynamic=!1,P(this.instance.container,this.cn("hasDots"))}attach(){this.instance.on(["refresh","change"],this.onRefresh)}detach(){this.instance.off(["refresh","change"],this.onRefresh),this.cleanup()}}Object.defineProperty(W,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:$});const X="disabled",q="next",Y="prev";class V extends _{constructor(){super(...arguments),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"prev",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"next",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"isDom",{enumerable:!0,configurable:!0,writable:!0,value:!1})}onRefresh(){const t=this.instance,e=t.pages.length,i=t.page;if(e<2)return void this.cleanup();this.build();let n=this.prev,s=this.next;n&&s&&(n.removeAttribute(X),s.removeAttribute(X),t.isInfinite||(i<=0&&n.setAttribute(X,""),i>=e-1&&s.setAttribute(X,"")))}addBtn(t){var e;const i=this.instance,n=document.createElement("button");n.setAttribute("tabindex","0"),n.setAttribute("title",i.localize(`{{${t.toUpperCase()}}}`)),C(n,this.cn("button")+" "+this.cn(t===q?"isNext":"isPrev"));const s=i.isRTL?t===q?Y:q:t;var o;return n.innerHTML=i.localize(this.option(`${s}Tpl`)),n.dataset[`carousel${o=t,o?o.match("^[a-z]")?o.charAt(0).toUpperCase()+o.substring(1):o:""}`]="true",null===(e=this.container)||void 0===e||e.appendChild(n),n}build(){const t=this.instance.container,e=this.cn("container");let{container:i,prev:n,next:s}=this;i||(i=t.querySelector("."+e),this.isDom=!!i),i||(i=document.createElement("div"),C(i,e),t.appendChild(i)),this.container=i,s||(s=i.querySelector("[data-carousel-next]")),s||(s=this.addBtn(q)),this.next=s,n||(n=i.querySelector("[data-carousel-prev]")),n||(n=this.addBtn(Y)),this.prev=n}cleanup(){this.isDom||(this.prev&&this.prev.remove(),this.next&&this.next.remove(),this.container&&this.container.remove()),this.prev=null,this.next=null,this.container=null,this.isDom=!1}attach(){this.instance.on(["refresh","change"],this.onRefresh)}detach(){this.instance.off(["refresh","change"],this.onRefresh),this.cleanup()}}Object.defineProperty(V,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{classes:{container:"f-carousel__nav",button:"f-button",isNext:"is-next",isPrev:"is-prev"},nextTpl:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M9 3l9 9-9 9"/></svg>',prevTpl:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M15 3l-9 9 9 9"/></svg>'}});class Z extends _{constructor(){super(...arguments),Object.defineProperty(this,"selectedIndex",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"target",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"nav",{enumerable:!0,configurable:!0,writable:!0,value:null})}addAsTargetFor(t){this.target=this.instance,this.nav=t,this.attachEvents()}addAsNavFor(t){this.nav=this.instance,this.target=t,this.attachEvents()}attachEvents(){const{nav:t,target:e}=this;t&&e&&(t.options.initialSlide=e.options.initialPage,t.state===B.Ready?this.onNavReady(t):t.on("ready",this.onNavReady),e.state===B.Ready?this.onTargetReady(e):e.on("ready",this.onTargetReady))}onNavReady(t){t.on("createSlide",this.onNavCreateSlide),t.on("Panzoom.click",this.onNavClick),t.on("Panzoom.touchEnd",this.onNavTouch),this.onTargetChange()}onTargetReady(t){t.on("change",this.onTargetChange),t.on("Panzoom.refresh",this.onTargetChange),this.onTargetChange()}onNavClick(t,e,i){this.onNavTouch(t,t.panzoom,i)}onNavTouch(t,e,i){var n,s;if(Math.abs(e.dragOffset.x)>3||Math.abs(e.dragOffset.y)>3)return;const o=i.target,{nav:a,target:r}=this;if(!a||!r||!o)return;const l=o.closest("[data-index]");if(i.stopPropagation(),i.preventDefault(),!l)return;const c=parseInt(l.dataset.index||"",10)||0,h=r.getPageForSlide(c),d=a.getPageForSlide(c);a.slideTo(d),r.slideTo(h,{friction:(null===(s=null===(n=this.nav)||void 0===n?void 0:n.plugins)||void 0===s?void 0:s.Sync.option("friction"))||0}),this.markSelectedSlide(c)}onNavCreateSlide(t,e){e.index===this.selectedIndex&&this.markSelectedSlide(e.index)}onTargetChange(){var t,e;const{target:i,nav:n}=this;if(!i||!n)return;if(n.state!==B.Ready||i.state!==B.Ready)return;const s=null===(e=null===(t=i.pages[i.page])||void 0===t?void 0:t.slides[0])||void 0===e?void 0:e.index,o=n.getPageForSlide(s);this.markSelectedSlide(s),n.slideTo(o,null===n.prevPage&&null===i.prevPage?{friction:0}:void 0)}markSelectedSlide(t){const e=this.nav;e&&e.state===B.Ready&&(this.selectedIndex=t,[...e.slides].map((e=>{e.el&&e.el.classList[e.index===t?"add":"remove"]("is-nav-selected")})))}attach(){const t=this;let e=t.options.target,i=t.options.nav;e?t.addAsNavFor(e):i&&t.addAsTargetFor(i)}detach(){const t=this,e=t.nav,i=t.target;e&&(e.off("ready",t.onNavReady),e.off("createSlide",t.onNavCreateSlide),e.off("Panzoom.click",t.onNavClick),e.off("Panzoom.touchEnd",t.onNavTouch)),t.nav=null,i&&(i.off("ready",t.onTargetReady),i.off("refresh",t.onTargetChange),i.off("change",t.onTargetChange)),t.target=null}}Object.defineProperty(Z,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{friction:.35}});const U={Navigation:V,Dots:W,Sync:Z},G="animationend",K="isSelected",J="slide";class Q extends m{get axis(){return this.isHorizontal?"e":"f"}get isEnabled(){return this.state===B.Ready}get isInfinite(){let t=!1;const{contentDim:e,viewportDim:i,pages:n,slides:s}=this,o=s[0];return n.length>=2&&o&&e+o.dim>=i&&(t=this.option("infinite")),t}get isRTL(){return"rtl"===this.option("direction")}get isHorizontal(){return"x"===this.option("axis")}constructor(t,e={},i={}){if(super(),Object.defineProperty(this,"bp",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"lp",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"userOptions",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"userPlugins",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:B.Init}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"prevPage",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"viewport",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"track",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"slides",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"pages",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"panzoom",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"inTransition",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"contentDim",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"viewportDim",{enumerable:!0,configurable:!0,writable:!0,value:0}),"string"==typeof t&&(t=document.querySelector(t)),!t||!S(t))throw new Error("No Element found");this.container=t,this.slideNext=D(this.slideNext.bind(this),150),this.slidePrev=D(this.slidePrev.bind(this),150),this.userOptions=e,this.userPlugins=i,queueMicrotask((()=>{this.processOptions()}))}processOptions(){var t,e;const i=f({},Q.defaults,this.userOptions);let n="";const s=i.breakpoints;if(s&&u(s))for(const[t,e]of Object.entries(s))window.matchMedia(t).matches&&u(e)&&(n+=t,f(i,e));n===this.bp&&this.state!==B.Init||(this.bp=n,this.state===B.Ready&&(i.initialSlide=(null===(e=null===(t=this.pages[this.page])||void 0===t?void 0:t.slides[0])||void 0===e?void 0:e.index)||0),this.state!==B.Init&&this.destroy(),super.setOptions(i),!1===this.option("enabled")?this.attachEvents():setTimeout((()=>{this.init()}),0))}init(){this.state=B.Init,this.emit("init"),this.attachPlugins(Object.assign(Object.assign({},Q.Plugins),this.userPlugins)),this.emit("attachPlugins"),this.initLayout(),this.initSlides(),this.updateMetrics(),this.setInitialPosition(),this.initPanzoom(),this.attachEvents(),this.state=B.Ready,this.emit("ready")}initLayout(){const{container:t}=this,e=this.option("classes");C(t,this.cn("container")),a(t,e.isLTR,!this.isRTL),a(t,e.isRTL,this.isRTL),a(t,e.isVertical,!this.isHorizontal),a(t,e.isHorizontal,this.isHorizontal);let i=this.option("viewport")||t.querySelector(`.${e.viewport}`);i||(i=document.createElement("div"),C(i,e.viewport),i.append(...F(t,`.${e.slide}`)),t.prepend(i)),i.addEventListener("scroll",this.onScroll);let n=this.option("track")||t.querySelector(`.${e.track}`);n||(n=document.createElement("div"),C(n,e.track),n.append(...Array.from(i.childNodes))),n.setAttribute("aria-live","polite"),i.contains(n)||i.prepend(n),this.viewport=i,this.track=n,this.emit("initLayout")}initSlides(){const{track:t}=this;if(!t)return;const e=[...this.slides],i=[];[...F(t,`.${this.cn(J)}`)].forEach((t=>{if(S(t)){const e=H({el:t,isDom:!0,index:this.slides.length});i.push(e)}}));for(let t of[...this.option("slides",[])||[],...e])i.push(H(t));this.slides=i;for(let t=0;t<this.slides.length;t++)this.slides[t].index=t;for(const t of i)this.emit("beforeInitSlide",t,t.index),this.emit("initSlide",t,t.index);this.emit("initSlides")}setInitialPage(){const t=this.option("initialSlide");this.page="number"==typeof t?this.getPageForSlide(t):parseInt(this.option("initialPage",0)+"",10)||0}setInitialPosition(){const{track:t,pages:e,isHorizontal:i}=this;if(!t||!e.length)return;let n=this.page;e[n]||(this.page=n=0);const s=(e[n].pos||0)*(this.isRTL&&i?1:-1),o=i?`${s}px`:"0",a=i?"0":`${s}px`;t.style.transform=`translate3d(${o}, ${a}, 0) scale(1)`,this.option("adaptiveHeight")&&this.setViewportHeight()}initPanzoom(){this.panzoom&&(this.panzoom.destroy(),this.panzoom=null);const t=this.option("Panzoom")||{};this.panzoom=new I(this.viewport,f({},{content:this.track,zoom:!1,panOnlyZoomed:!1,lockAxis:this.isHorizontal?"x":"y",infinite:this.isInfinite,click:!1,dblClick:!1,touch:t=>!(this.pages.length<2&&!t.options.infinite),bounds:()=>this.getBounds(),maxVelocity:t=>Math.abs(t.target[this.axis]-t.current[this.axis])<2*this.viewportDim?100:0},t)),this.panzoom.on("*",((t,e,...i)=>{this.emit(`Panzoom.${e}`,t,...i)})),this.panzoom.on("decel",this.onDecel),this.panzoom.on("refresh",this.onRefresh),this.panzoom.on("beforeTransform",this.onBeforeTransform),this.panzoom.on("endAnimation",this.onEndAnimation)}attachEvents(){const t=this.container;t&&(t.addEventListener("click",this.onClick,{passive:!1,capture:!1}),t.addEventListener("slideTo",this.onSlideTo)),window.addEventListener("resize",this.onResize)}createPages(){let t=[];const{contentDim:e,viewportDim:i}=this;let n=this.option("slidesPerPage");n=("auto"===n||e<=i)&&!1!==this.option("fill")?1/0:parseFloat(n+"");let s=0,o=0,a=0;for(const e of this.slides)(!t.length||o+e.dim-i>.05||a>=n)&&(t.push(N()),s=t.length-1,o=0,a=0),t[s].slides.push(e),o+=e.dim+e.gap,a++;return t}processPages(){const t=this.pages,{contentDim:i,viewportDim:n,isInfinite:s}=this,o=this.option("center"),a=this.option("fill"),r=a&&o&&i>n&&!s;if(t.forEach(((t,e)=>{var s;t.index=e,t.pos=(null===(s=t.slides[0])||void 0===s?void 0:s.pos)||0,t.dim=0;for(const[e,i]of t.slides.entries())t.dim+=i.dim,e<t.slides.length-1&&(t.dim+=i.gap);r&&t.pos+.5*t.dim<.5*n?t.pos=0:r&&t.pos+.5*t.dim>=i-.5*n?t.pos=i-n:o&&(t.pos+=-.5*(n-t.dim))})),t.forEach((t=>{a&&!s&&i>n&&(t.pos=Math.max(t.pos,0),t.pos=Math.min(t.pos,i-n)),t.pos=e(t.pos,1e3),t.dim=e(t.dim,1e3),Math.abs(t.pos)<=.1&&(t.pos=0)})),s)return t;const l=[];let c;return t.forEach((t=>{const e=Object.assign({},t);c&&e.pos===c.pos?(c.dim+=e.dim,c.slides=[...c.slides,...e.slides]):(e.index=l.length,c=e,l.push(e))})),l}getPageFromIndex(t=0){const e=this.pages.length;let i;return t=parseInt((t||0).toString())||0,i=this.isInfinite?(t%e+e)%e:Math.max(Math.min(t,e-1),0),i}getSlideMetrics(t){var i,n;const s=this.isHorizontal?"width":"height";let o=0,a=0,r=t.el;const l=!(!r||r.parentNode);if(r?o=parseFloat(r.dataset[s]||"")||0:(r=document.createElement("div"),r.style.visibility="hidden",(this.track||document.body).prepend(r)),C(r,this.cn(J)+" "+t.class+" "+t.customClass),o)r.style[s]=`${o}px`,r.style["width"===s?"height":"width"]="";else{l&&(this.track||document.body).prepend(r),o=r.getBoundingClientRect()[s]*Math.max(1,(null===(i=window.visualViewport)||void 0===i?void 0:i.scale)||1);let t=r[this.isHorizontal?"offsetWidth":"offsetHeight"];t-1>o&&(o=t)}const c=getComputedStyle(r);return"content-box"===c.boxSizing&&(this.isHorizontal?(o+=parseFloat(c.paddingLeft)||0,o+=parseFloat(c.paddingRight)||0):(o+=parseFloat(c.paddingTop)||0,o+=parseFloat(c.paddingBottom)||0)),a=parseFloat(c[this.isHorizontal?"marginRight":"marginBottom"])||0,l?null===(n=r.parentElement)||void 0===n||n.removeChild(r):t.el||r.remove(),{dim:e(o,1e3),gap:e(a,1e3)}}getBounds(){const{isInfinite:t,isRTL:e,isHorizontal:i,pages:n}=this;let s={min:0,max:0};if(t)s={min:-1/0,max:1/0};else if(n.length){const t=n[0].pos,o=n[n.length-1].pos;s=e&&i?{min:t,max:o}:{min:-1*o,max:-1*t}}return{x:i?s:{min:0,max:0},y:i?{min:0,max:0}:s}}repositionSlides(){let t,{isHorizontal:i,isRTL:n,isInfinite:s,viewport:o,viewportDim:a,contentDim:r,page:l,pages:c,slides:h,panzoom:d}=this,u=0,f=0,p=0,g=0;d?g=-1*d.current[this.axis]:c[l]&&(g=c[l].pos||0),t=i?n?"right":"left":"top",n&&i&&(g*=-1);for(const i of h){const n=i.el;n?("top"===t?(n.style.right="",n.style.left=""):n.style.top="",i.index!==u?n.style[t]=0===f?"":`${e(f,1e3)}px`:n.style[t]="",p+=i.dim+i.gap,u++):f+=i.dim+i.gap}if(s&&p&&o){let n=getComputedStyle(o),s="padding",l=i?"Right":"Bottom",c=parseFloat(n[s+(i?"Left":"Top")]);g-=c,a+=c,a+=parseFloat(n[s+l]);for(const i of h)i.el&&(e(i.pos)<e(a)&&e(i.pos+i.dim+i.gap)<e(g)&&e(g)>e(r-a)&&(i.el.style[t]=`${e(f+p,1e3)}px`),e(i.pos+i.gap)>=e(r-a)&&e(i.pos)>e(g+a)&&e(g)<e(a)&&(i.el.style[t]=`-${e(p,1e3)}px`))}let m,v,b=[...this.inTransition];if(b.length>1&&(m=c[b[0]],v=c[b[1]]),m&&v){let i=0;for(const n of h)n.el?this.inTransition.has(n.index)&&m.slides.indexOf(n)<0&&(n.el.style[t]=`${e(i+(m.pos-v.pos),1e3)}px`):i+=n.dim+n.gap}}createSlideEl(t){const{track:e,slides:i}=this;if(!e||!t)return;if(t.el&&t.el.parentNode)return;const n=t.el||document.createElement("div");C(n,this.cn(J)),C(n,t.class),C(n,t.customClass);const s=t.html;s&&(s instanceof HTMLElement?n.appendChild(s):n.innerHTML=t.html+"");const o=[];i.forEach(((t,e)=>{t.el&&o.push(e)}));const a=t.index;let r=null;if(o.length){r=i[o.reduce(((t,e)=>Math.abs(e-a)<Math.abs(t-a)?e:t))]}const l=r&&r.el&&r.el.parentNode?r.index<t.index?r.el.nextSibling:r.el:null;e.insertBefore(n,e.contains(l)?l:null),t.el=n,this.emit("createSlide",t)}removeSlideEl(t,e=!1){const i=null==t?void 0:t.el;if(!i||!i.parentNode)return;const n=this.cn(K);if(i.classList.contains(n)&&(P(i,n),this.emit("unselectSlide",t)),t.isDom&&!e)return i.removeAttribute("aria-hidden"),i.removeAttribute("data-index"),void(i.style.left="");this.emit("removeSlide",t);const s=new CustomEvent(G);i.dispatchEvent(s),t.el&&(t.el.remove(),t.el=null)}transitionTo(t=0,e=this.option("transition")){var i,n,s,o;if(!e)return!1;const a=this.page,{pages:r,panzoom:l}=this;t=parseInt((t||0).toString())||0;const c=this.getPageFromIndex(t);if(!l||!r[c]||r.length<2||Math.abs(((null===(n=null===(i=r[a])||void 0===i?void 0:i.slides[0])||void 0===n?void 0:n.dim)||0)-this.viewportDim)>1)return!1;const h=t>a?1:-1,d=r[c].pos*(this.isRTL?1:-1);if(a===c&&Math.abs(d-l.target[this.axis])<1)return!1;this.clearTransitions();const u=l.isResting;C(this.container,this.cn("inTransition"));const f=(null===(s=r[a])||void 0===s?void 0:s.slides[0])||null,p=(null===(o=r[c])||void 0===o?void 0:o.slides[0])||null;this.inTransition.add(p.index),this.createSlideEl(p);let g=f.el,m=p.el;u||e===J||(e="fadeFast",g=null);const v=this.isRTL?"next":"prev",b=this.isRTL?"prev":"next";return g&&(this.inTransition.add(f.index),f.transition=e,g.addEventListener(G,this.onAnimationEnd),g.classList.add(`f-${e}Out`,`to-${h>0?b:v}`)),m&&(p.transition=e,m.addEventListener(G,this.onAnimationEnd),m.classList.add(`f-${e}In`,`from-${h>0?v:b}`)),l.current[this.axis]=d,l.target[this.axis]=d,l.requestTick(),this.onChange(c),!0}manageSlideVisiblity(){const t=new Set,e=new Set,i=this.getVisibleSlides(parseFloat(this.option("preload",0)+"")||0);for(const n of this.slides)i.has(n)?t.add(n):e.add(n);for(const e of this.inTransition)t.add(this.slides[e]);for(const e of t)this.createSlideEl(e),this.lazyLoadSlide(e);for(const i of e)t.has(i)||this.removeSlideEl(i);this.markSelectedSlides(),this.repositionSlides()}markSelectedSlides(){if(!this.pages[this.page]||!this.pages[this.page].slides)return;const t="aria-hidden";let e=this.cn(K);if(e)for(const i of this.slides){const n=i.el;n&&(n.dataset.index=`${i.index}`,n.classList.contains("f-thumbs__slide")?this.getVisibleSlides(0).has(i)?n.removeAttribute(t):n.setAttribute(t,"true"):this.pages[this.page].slides.includes(i)?(n.classList.contains(e)||(C(n,e),this.emit("selectSlide",i)),n.removeAttribute(t)):(n.classList.contains(e)&&(P(n,e),this.emit("unselectSlide",i)),n.setAttribute(t,"true")))}}flipInfiniteTrack(){const{axis:t,isHorizontal:e,isInfinite:i,isRTL:n,viewportDim:s,contentDim:o}=this,a=this.panzoom;if(!a||!i)return;let r=a.current[t],l=a.target[t]-r,c=0,h=.5*s;n&&e?(r<-h&&(c=-1,r+=o),r>o-h&&(c=1,r-=o)):(r>h&&(c=1,r-=o),r<-o+h&&(c=-1,r+=o)),c&&(a.current[t]=r,a.target[t]=r+l)}lazyLoadImg(t,e){const i=this,n="f-fadeIn",o="is-preloading";let a=!1,r=null;const l=()=>{a||(a=!0,r&&(r.remove(),r=null),P(e,o),e.complete&&(C(e,n),setTimeout((()=>{P(e,n)}),350)),this.option("adaptiveHeight")&&t.el&&this.pages[this.page].slides.indexOf(t)>-1&&(i.updateMetrics(),i.setViewportHeight()),this.emit("load",t))};C(e,o),e.src=e.dataset.lazySrcset||e.dataset.lazySrc||"",delete e.dataset.lazySrc,delete e.dataset.lazySrcset,e.addEventListener("error",(()=>{l()})),e.addEventListener("load",(()=>{l()})),setTimeout((()=>{const i=e.parentNode;i&&t.el&&(e.complete?l():a||(r=s(E),i.insertBefore(r,e)))}),300)}lazyLoadSlide(t){const e=t&&t.el;if(!e)return;const i=new Set;let n=Array.from(e.querySelectorAll("[data-lazy-src],[data-lazy-srcset]"));e.dataset.lazySrc&&n.push(e),n.map((t=>{t instanceof HTMLImageElement?i.add(t):t instanceof HTMLElement&&t.dataset.lazySrc&&(t.style.backgroundImage=`url('${t.dataset.lazySrc}')`,delete t.dataset.lazySrc)}));for(const e of i)this.lazyLoadImg(t,e)}onAnimationEnd(t){var e;const i=t.target,n=i?parseInt(i.dataset.index||"",10)||0:-1,s=this.slides[n],o=t.animationName;if(!i||!s||!o)return;const a=!!this.inTransition.has(n)&&s.transition;a&&o.substring(0,a.length+2)===`f-${a}`&&this.inTransition.delete(n),this.inTransition.size||this.clearTransitions(),n===this.page&&(null===(e=this.panzoom)||void 0===e?void 0:e.isResting)&&this.emit("settle")}onDecel(t,e=0,i=0,n=0,s=0){if(this.option("dragFree"))return void this.setPageFromPosition();const{isRTL:o,isHorizontal:a,axis:r,pages:l}=this,c=l.length,h=Math.abs(Math.atan2(i,e)/(Math.PI/180));let d=0;if(d=h>45&&h<135?a?0:i:a?e:0,!c)return;let u=this.page,f=o&&a?1:-1;const p=t.current[r]*f;let{pageIndex:g}=this.getPageFromPosition(p);Math.abs(d)>5?(l[u].dim<document.documentElement["client"+(this.isHorizontal?"Width":"Height")]-1&&(u=g),u=o&&a?d<0?u-1:u+1:d<0?u+1:u-1):u=0===n&&0===s?u:g,this.slideTo(u,{transition:!1,friction:t.option("decelFriction")})}onClick(t){const e=t.target,i=e&&S(e)?e.dataset:null;let n,s;i&&(void 0!==i.carouselPage?(s="slideTo",n=i.carouselPage):void 0!==i.carouselNext?s="slideNext":void 0!==i.carouselPrev&&(s="slidePrev")),s?(t.preventDefault(),t.stopPropagation(),e&&!e.hasAttribute("disabled")&&this[s](n)):this.emit("click",t)}onSlideTo(t){const e=t.detail||0;this.slideTo(this.getPageForSlide(e),{friction:0})}onChange(t,e=0){const i=this.page;this.prevPage=i,this.page=t,this.option("adaptiveHeight")&&this.setViewportHeight(),t!==i&&(this.markSelectedSlides(),this.emit("change",t,i,e))}onRefresh(){let t=this.contentDim,e=this.viewportDim;this.updateMetrics(),this.contentDim===t&&this.viewportDim===e||this.slideTo(this.page,{friction:0,transition:!1})}onScroll(){var t;null===(t=this.viewport)||void 0===t||t.scroll(0,0)}onResize(){this.option("breakpoints")&&this.processOptions()}onBeforeTransform(t){this.lp!==t.current[this.axis]&&(this.flipInfiniteTrack(),this.manageSlideVisiblity()),this.lp=t.current.e}onEndAnimation(){this.inTransition.size||this.emit("settle")}reInit(t=null,e=null){this.destroy(),this.state=B.Init,this.prevPage=null,this.userOptions=t||this.userOptions,this.userPlugins=e||this.userPlugins,this.processOptions()}slideTo(t=0,{friction:e=this.option("friction"),transition:i=this.option("transition")}={}){if(this.state===B.Destroy)return;t=parseInt((t||0).toString())||0;const n=this.getPageFromIndex(t),{axis:s,isHorizontal:o,isRTL:a,pages:r,panzoom:l}=this,c=r.length,h=a&&o?1:-1;if(!l||!c)return;if(this.page!==n){const e=new Event("beforeChange",{bubbles:!0,cancelable:!0});if(this.emit("beforeChange",e,t),e.defaultPrevented)return}if(this.transitionTo(t,i))return;let d=r[n].pos;if(this.isInfinite){const e=this.contentDim,i=l.target[s]*h;if(2===c)d+=e*Math.floor(parseFloat(t+"")/2);else{d=[d,d-e,d+e].reduce((function(t,e){return Math.abs(e-i)<Math.abs(t-i)?e:t}))}}d*=h,Math.abs(l.target[s]-d)<1||(l.panTo({x:o?d:0,y:o?0:d,friction:e}),this.onChange(n))}slideToClosest(t){if(this.panzoom){const{pageIndex:e}=this.getPageFromPosition();this.slideTo(e,t)}}slideNext(){this.slideTo(this.page+1)}slidePrev(){this.slideTo(this.page-1)}clearTransitions(){this.inTransition.clear(),P(this.container,this.cn("inTransition"));const t=["to-prev","to-next","from-prev","from-next"];for(const e of this.slides){const i=e.el;if(i){i.removeEventListener(G,this.onAnimationEnd),i.classList.remove(...t);const n=e.transition;n&&i.classList.remove(`f-${n}Out`,`f-${n}In`)}}this.manageSlideVisiblity()}addSlide(t,e){var i,n,s,o;const a=this.panzoom,r=(null===(i=this.pages[this.page])||void 0===i?void 0:i.pos)||0,l=(null===(n=this.pages[this.page])||void 0===n?void 0:n.dim)||0,c=this.contentDim<this.viewportDim;let h=Array.isArray(e)?e:[e];const d=[];for(const t of h)d.push(H(t));this.slides.splice(t,0,...d);for(let t=0;t<this.slides.length;t++)this.slides[t].index=t;for(const t of d)this.emit("beforeInitSlide",t,t.index);if(this.page>=t&&(this.page+=d.length),this.updateMetrics(),a){const e=(null===(s=this.pages[this.page])||void 0===s?void 0:s.pos)||0,i=(null===(o=this.pages[this.page])||void 0===o?void 0:o.dim)||0,n=this.pages.length||1,h=this.isRTL?l-i:i-l,d=this.isRTL?r-e:e-r;c&&1===n?(t<=this.page&&(a.current[this.axis]-=h,a.target[this.axis]-=h),a.panTo({[this.isHorizontal?"x":"y"]:-1*e})):d&&t<=this.page&&(a.target[this.axis]-=d,a.current[this.axis]-=d,a.requestTick())}for(const t of d)this.emit("initSlide",t,t.index)}prependSlide(t){this.addSlide(0,t)}appendSlide(t){this.addSlide(this.slides.length,t)}removeSlide(t){const e=this.slides.length;t=(t%e+e)%e;const i=this.slides[t];if(i){this.removeSlideEl(i,!0),this.slides.splice(t,1);for(let t=0;t<this.slides.length;t++)this.slides[t].index=t;this.updateMetrics(),this.slideTo(this.page,{friction:0,transition:!1}),this.emit("destroySlide",i)}}updateMetrics(){const{panzoom:t,viewport:i,track:n,slides:s,isHorizontal:o,isInfinite:a}=this;if(!n)return;const r=o?"width":"height",l=o?"offsetWidth":"offsetHeight";if(i){let t=Math.max(i[l],e(i.getBoundingClientRect()[r],1e3)),n=getComputedStyle(i),s="padding",a=o?"Right":"Bottom";t-=parseFloat(n[s+(o?"Left":"Top")])+parseFloat(n[s+a]),this.viewportDim=t}let c,h=0;for(const[t,i]of s.entries()){let n=0,o=0;!i.el&&c?(n=c.dim,o=c.gap):(({dim:n,gap:o}=this.getSlideMetrics(i)),c=i),n=e(n,1e3),o=e(o,1e3),i.dim=n,i.gap=o,i.pos=h,h+=n,(a||t<s.length-1)&&(h+=o)}h=e(h,1e3),this.contentDim=h,t&&(t.contentRect[r]=h,t.contentRect[o?"fullWidth":"fullHeight"]=h),this.pages=this.createPages(),this.pages=this.processPages(),this.state===B.Init&&this.setInitialPage(),this.page=Math.max(0,Math.min(this.page,this.pages.length-1)),this.manageSlideVisiblity(),this.emit("refresh")}getProgress(t,i=!1,n=!1){void 0===t&&(t=this.page);const s=this,o=s.panzoom,a=s.contentDim,r=s.pages[t]||0;if(!r||!o)return t>this.page?-1:1;let l=-1*o.current.e,c=e((l-r.pos)/(1*r.dim),1e3),h=c,d=c;this.isInfinite&&!0!==n&&(h=e((l-r.pos+a)/(1*r.dim),1e3),d=e((l-r.pos-a)/(1*r.dim),1e3));let u=[c,h,d].reduce((function(t,e){return Math.abs(e)<Math.abs(t)?e:t}));return i?u:u>1?1:u<-1?-1:u}setViewportHeight(){const{page:t,pages:e,viewport:i,isHorizontal:n}=this;if(!i||!e[t])return;let s=0;n&&this.track&&(this.track.style.height="auto",e[t].slides.forEach((t=>{t.el&&(s=Math.max(s,t.el.offsetHeight))}))),i.style.height=s?`${s}px`:""}getPageForSlide(t){for(const e of this.pages)for(const i of e.slides)if(i.index===t)return e.index;return-1}getVisibleSlides(t=0){var e;const i=new Set;let{panzoom:n,contentDim:s,viewportDim:o,pages:a,page:r}=this;if(o){s=s+(null===(e=this.slides[this.slides.length-1])||void 0===e?void 0:e.gap)||0;let l=0;l=n&&n.state!==v.Init&&n.state!==v.Destroy?-1*n.current[this.axis]:a[r]&&a[r].pos||0,this.isInfinite&&(l-=Math.floor(l/s)*s),this.isRTL&&this.isHorizontal&&(l*=-1);const c=l-o*t,h=l+o*(t+1),d=this.isInfinite?[-1,0,1]:[0];for(const t of this.slides)for(const e of d){const n=t.pos+e*s,o=n+t.dim+t.gap;n<h&&o>c&&i.add(t)}}return i}getPageFromPosition(t){const{viewportDim:e,contentDim:i,slides:n,pages:s,panzoom:o}=this,a=s.length,r=n.length,l=n[0],c=n[r-1],h=this.option("center");let d=0,u=0,f=0,p=void 0===t?-1*((null==o?void 0:o.target[this.axis])||0):t;h&&(p+=.5*e),this.isInfinite?(p<l.pos-.5*c.gap&&(p-=i,f=-1),p>c.pos+c.dim+.5*c.gap&&(p-=i,f=1)):p=Math.max(l.pos||0,Math.min(p,c.pos));let g=c,m=n.find((t=>{const e=t.pos-.5*g.gap,i=t.pos+t.dim+.5*t.gap;return g=t,p>=e&&p<i}));return m||(m=c),u=this.getPageForSlide(m.index),d=u+f*a,{page:d,pageIndex:u}}setPageFromPosition(){const{pageIndex:t}=this.getPageFromPosition();this.onChange(t)}destroy(){if([B.Destroy].includes(this.state))return;this.state=B.Destroy;const{container:t,viewport:e,track:i,slides:n,panzoom:s}=this,o=this.option("classes");t.removeEventListener("click",this.onClick,{passive:!1,capture:!1}),t.removeEventListener("slideTo",this.onSlideTo),window.removeEventListener("resize",this.onResize),s&&(s.destroy(),this.panzoom=null),n&&n.forEach((t=>{this.removeSlideEl(t)})),this.detachPlugins(),e&&(e.removeEventListener("scroll",this.onScroll),e.offsetParent&&i&&i.offsetParent&&e.replaceWith(...i.childNodes));for(const[e,i]of Object.entries(o))"container"!==e&&i&&t.classList.remove(i);this.track=null,this.viewport=null,this.page=0,this.slides=[];const a=this.events.get("ready");this.events=new Map,a&&this.events.set("ready",a)}}Object.defineProperty(Q,"Panzoom",{enumerable:!0,configurable:!0,writable:!0,value:I}),Object.defineProperty(Q,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:j}),Object.defineProperty(Q,"Plugins",{enumerable:!0,configurable:!0,writable:!0,value:U});const tt=function(t){if(!S(t))return 0;const e=window.scrollY,i=window.innerHeight,n=e+i,s=t.getBoundingClientRect(),o=s.y+e,a=s.height,r=o+a;if(e>r||n<o)return 0;if(e<o&&n>r)return 100;if(o<e&&r>n)return 100;let l=a;o<e&&(l-=e-o),r>n&&(l-=r-n);const c=l/i*100;return Math.round(c)},et=!("undefined"==typeof window||!window.document||!window.document.createElement);let it;const nt=["a[href]","area[href]",'input:not([disabled]):not([type="hidden"]):not([aria-hidden])',"select:not([disabled]):not([aria-hidden])","textarea:not([disabled]):not([aria-hidden])","button:not([disabled]):not([aria-hidden]):not(.fancybox-focus-guard)","iframe","object","embed","video","audio","[contenteditable]",'[tabindex]:not([tabindex^="-"]):not([disabled]):not([aria-hidden])'].join(","),st=t=>{if(t&&et){void 0===it&&document.createElement("div").focus({get preventScroll(){return it=!0,!1}});try{if(it)t.focus({preventScroll:!0});else{const e=window.scrollY||document.body.scrollTop,i=window.scrollX||document.body.scrollLeft;t.focus(),document.body.scrollTo({top:e,left:i,behavior:"auto"})}}catch(t){}}},ot=()=>{const t=document;let e,i="",n="",s="";return t.fullscreenEnabled?(i="requestFullscreen",n="exitFullscreen",s="fullscreenElement"):t.webkitFullscreenEnabled&&(i="webkitRequestFullscreen",n="webkitExitFullscreen",s="webkitFullscreenElement"),i&&(e={request:function(e=t.documentElement){return"webkitRequestFullscreen"===i?e[i](Element.ALLOW_KEYBOARD_INPUT):e[i]()},exit:function(){return t[s]&&t[n]()},isFullscreen:function(){return t[s]}}),e},at={dragToClose:!0,hideScrollbar:!0,Carousel:{classes:{container:"fancybox__carousel",viewport:"fancybox__viewport",track:"fancybox__track",slide:"fancybox__slide"}},contentClick:"toggleZoom",contentDblClick:!1,backdropClick:"close",animated:!0,idle:3500,showClass:"f-zoomInUp",hideClass:"f-fadeOut",commonCaption:!1,parentEl:null,startIndex:0,l10n:Object.assign(Object.assign({},y),{CLOSE:"Close",NEXT:"Next",PREV:"Previous",MODAL:"You can close this modal content with the ESC key",ERROR:"Something Went Wrong, Please Try Again Later",IMAGE_ERROR:"Image Not Found",ELEMENT_NOT_FOUND:"HTML Element Not Found",AJAX_NOT_FOUND:"Error Loading AJAX : Not Found",AJAX_FORBIDDEN:"Error Loading AJAX : Forbidden",IFRAME_ERROR:"Error Loading Page",TOGGLE_ZOOM:"Toggle zoom level",TOGGLE_THUMBS:"Toggle thumbnails",TOGGLE_SLIDESHOW:"Toggle slideshow",TOGGLE_FULLSCREEN:"Toggle full-screen mode",DOWNLOAD:"Download"}),tpl:{closeButton:'<button data-fancybox-close class="f-button is-close-btn" title="{{CLOSE}}"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M20 20L4 4m16 0L4 20"/></svg></button>',main:'<div class="fancybox__container" role="dialog" aria-modal="true" aria-label="{{MODAL}}" tabindex="-1">\n    <div class="fancybox__backdrop"></div>\n    <div class="fancybox__carousel"></div>\n    <div class="fancybox__footer"></div>\n  </div>'},groupAll:!1,groupAttr:"data-fancybox",defaultType:"image",defaultDisplay:"block",autoFocus:!0,trapFocus:!0,placeFocusBack:!0,closeButton:"auto",keyboard:{Escape:"close",Delete:"close",Backspace:"close",PageUp:"next",PageDown:"prev",ArrowUp:"prev",ArrowDown:"next",ArrowRight:"next",ArrowLeft:"prev"},Fullscreen:{autoStart:!1},compact:()=>window.matchMedia("(max-width: 578px), (max-height: 578px)").matches,wheel:"zoom"};var rt,lt;!function(t){t[t.Init=0]="Init",t[t.Ready=1]="Ready",t[t.Closing=2]="Closing",t[t.CustomClosing=3]="CustomClosing",t[t.Destroy=4]="Destroy"}(rt||(rt={})),function(t){t[t.Loading=0]="Loading",t[t.Opening=1]="Opening",t[t.Ready=2]="Ready",t[t.Closing=3]="Closing"}(lt||(lt={}));let ct="",ht=!1,dt=!1,ut=null;const ft=()=>{let t="",e="";const i=Te.getInstance();if(i){const n=i.carousel,s=i.getSlide();if(n&&s){let o=s.slug||void 0,a=s.triggerEl||void 0;e=o||(i.option("slug")||""),!e&&a&&a.dataset&&(e=a.dataset.fancybox||""),e&&"true"!==e&&(t="#"+e+(!o&&n.slides.length>1?"-"+(s.index+1):""))}}return{hash:t,slug:e,index:1}},pt=()=>{const t=new URL(document.URL).hash,e=t.slice(1).split("-"),i=e[e.length-1],n=i&&/^\+?\d+$/.test(i)&&parseInt(e.pop()||"1",10)||1;return{hash:t,slug:e.join("-"),index:n}},gt=()=>{const{slug:t,index:e}=pt();if(!t)return;let i=document.querySelector(`[data-slug="${t}"]`);if(i&&i.dispatchEvent(new CustomEvent("click",{bubbles:!0,cancelable:!0})),Te.getInstance())return;const n=document.querySelectorAll(`[data-fancybox="${t}"]`);n.length&&(i=n[e-1],i&&i.dispatchEvent(new CustomEvent("click",{bubbles:!0,cancelable:!0})))},mt=()=>{if(!1===Te.defaults.Hash)return;const t=Te.getInstance();if(!1===(null==t?void 0:t.options.Hash))return;const{slug:e,index:i}=pt(),{slug:n}=ft();t&&(e===n?t.jumpTo(i-1):(ht=!0,t.close())),gt()},vt=()=>{ut&&clearTimeout(ut),queueMicrotask((()=>{mt()}))},bt=()=>{window.addEventListener("hashchange",vt,!1),setTimeout((()=>{mt()}),500)};et&&(/complete|interactive|loaded/.test(document.readyState)?bt():document.addEventListener("DOMContentLoaded",bt));const yt="is-zooming-in";class wt extends _{onCreateSlide(t,e,i){const n=this.instance.optionFor(i,"src")||"";i.el&&"image"===i.type&&"string"==typeof n&&this.setImage(i,n)}onRemoveSlide(t,e,i){i.panzoom&&i.panzoom.destroy(),i.panzoom=void 0,i.imageEl=void 0}onChange(t,e,i,n){P(this.instance.container,yt);for(const t of e.slides){const e=t.panzoom;e&&t.index!==i&&e.reset(.35)}}onClose(){var t;const e=this.instance,i=e.container,n=e.getSlide();if(!i||!i.parentElement||!n)return;const{el:s,contentEl:o,panzoom:a,thumbElSrc:r}=n;if(!s||!r||!o||!a||a.isContentLoading||a.state===v.Init||a.state===v.Destroy)return;a.updateMetrics();let l=this.getZoomInfo(n);if(!l)return;this.instance.state=rt.CustomClosing,i.classList.remove(yt),i.classList.add("is-zooming-out"),o.style.backgroundImage=`url('${r}')`;const c=i.getBoundingClientRect();1===((null===(t=window.visualViewport)||void 0===t?void 0:t.scale)||1)&&Object.assign(i.style,{position:"absolute",top:`${i.offsetTop+window.scrollY}px`,left:`${i.offsetLeft+window.scrollX}px`,bottom:"auto",right:"auto",width:`${c.width}px`,height:`${c.height}px`,overflow:"hidden"});const{x:h,y:d,scale:u,opacity:f}=l;if(f){const t=((t,e,i,n)=>{const s=e-t,o=n-i;return e=>i+((e-t)/s*o||0)})(a.scale,u,1,0);a.on("afterTransform",(()=>{o.style.opacity=t(a.scale)+""}))}a.on("endAnimation",(()=>{e.destroy()})),a.target.a=u,a.target.b=0,a.target.c=0,a.target.d=u,a.panTo({x:h,y:d,scale:u,friction:f?.2:.33,ignoreBounds:!0}),a.isResting&&e.destroy()}setImage(t,e){const i=this.instance;t.src=e,this.process(t,e).then((e=>{const{contentEl:n,imageEl:s,thumbElSrc:o,el:a}=t;if(i.isClosing()||!n||!s)return;n.offsetHeight;const r=!!i.isOpeningSlide(t)&&this.getZoomInfo(t);if(this.option("protected")&&a){a.addEventListener("contextmenu",(t=>{t.preventDefault()}));const t=document.createElement("div");C(t,"fancybox-protected"),n.appendChild(t)}if(o&&r){const s=e.contentRect,a=Math.max(s.fullWidth,s.fullHeight);let c=null;!r.opacity&&a>1200&&(c=document.createElement("img"),C(c,"fancybox-ghost"),c.src=o,n.appendChild(c));const h=()=>{c&&(C(c,"f-fadeFastOut"),setTimeout((()=>{c&&(c.remove(),c=null)}),200))};(l=o,new Promise(((t,e)=>{const i=new Image;i.onload=t,i.onerror=e,i.src=l}))).then((()=>{i.hideLoading(t),t.state=lt.Opening,this.instance.emit("reveal",t),this.zoomIn(t).then((()=>{h(),this.instance.done(t)}),(()=>{})),c&&setTimeout((()=>{h()}),a>2500?800:200)}),(()=>{i.hideLoading(t),i.revealContent(t)}))}else{const n=this.optionFor(t,"initialSize"),s=this.optionFor(t,"zoom"),o={event:i.prevMouseMoveEvent||i.options.event,friction:s?.12:0};let a=i.optionFor(t,"showClass")||void 0,r=!0;i.isOpeningSlide(t)&&("full"===n?e.zoomToFull(o):"cover"===n?e.zoomToCover(o):"max"===n?e.zoomToMax(o):r=!1,e.stop("current")),r&&a&&(a=e.isDragging?"f-fadeIn":""),i.hideLoading(t),i.revealContent(t,a)}var l}),(()=>{i.setError(t,"{{IMAGE_ERROR}}")}))}process(t,e){return new Promise(((i,n)=>{var o;const a=this.instance,r=t.el;a.clearContent(t),a.showLoading(t);let l=this.optionFor(t,"content");if("string"==typeof l&&(l=s(l)),!l||!S(l)){if(l=document.createElement("img"),l instanceof HTMLImageElement){let i="",n=t.caption;i="string"==typeof n&&n?n.replace(/<[^>]+>/gi,"").substring(0,1e3):`Image ${t.index+1} of ${(null===(o=a.carousel)||void 0===o?void 0:o.pages.length)||1}`,l.src=e||"",l.alt=i,l.draggable=!1,t.srcset&&l.setAttribute("srcset",t.srcset),this.instance.isOpeningSlide(t)&&(l.fetchPriority="high")}t.sizes&&l.setAttribute("sizes",t.sizes)}C(l,"fancybox-image"),t.imageEl=l,a.setContent(t,l,!1);t.panzoom=new I(r,f({transformParent:!0},this.option("Panzoom")||{},{content:l,width:a.optionFor(t,"width","auto"),height:a.optionFor(t,"height","auto"),wheel:()=>{const t=a.option("wheel");return("zoom"===t||"pan"==t)&&t},click:(e,i)=>{var n,s;if(a.isCompact||a.isClosing())return!1;if(t.index!==(null===(n=a.getSlide())||void 0===n?void 0:n.index))return!1;if(i){const t=i.composedPath()[0];if(["A","BUTTON","TEXTAREA","OPTION","INPUT","SELECT","VIDEO"].includes(t.nodeName))return!1}let o=!i||i.target&&(null===(s=t.contentEl)||void 0===s?void 0:s.contains(i.target));return a.option(o?"contentClick":"backdropClick")||!1},dblClick:()=>a.isCompact?"toggleZoom":a.option("contentDblClick")||!1,spinner:!1,panOnlyZoomed:!0,wheelLimit:1/0,on:{ready:t=>{i(t)},error:()=>{n()},destroy:()=>{n()}}}))}))}zoomIn(t){return new Promise(((e,i)=>{const n=this.instance,s=n.container,{panzoom:o,contentEl:a,el:r}=t;o&&o.updateMetrics();const l=this.getZoomInfo(t);if(!(l&&r&&a&&o&&s))return void i();const{x:c,y:h,scale:d,opacity:u}=l,f=()=>{t.state!==lt.Closing&&(u&&(a.style.opacity=Math.max(Math.min(1,1-(1-o.scale)/(1-d)),0)+""),o.scale>=1&&o.scale>o.targetScale-.1&&e(o))},p=t=>{(t.scale<.99||t.scale>1.01)&&!t.isDragging||(P(s,yt),a.style.opacity="",t.off("endAnimation",p),t.off("touchStart",p),t.off("afterTransform",f),e(t))};o.on("endAnimation",p),o.on("touchStart",p),o.on("afterTransform",f),o.on(["error","destroy"],(()=>{i()})),o.panTo({x:c,y:h,scale:d,friction:0,ignoreBounds:!0}),o.stop("current");const g={event:"mousemove"===o.panMode?n.prevMouseMoveEvent||n.options.event:void 0},m=this.optionFor(t,"initialSize");C(s,yt),n.hideLoading(t),"full"===m?o.zoomToFull(g):"cover"===m?o.zoomToCover(g):"max"===m?o.zoomToMax(g):o.reset(.172)}))}getZoomInfo(t){const{el:e,imageEl:i,thumbEl:n,panzoom:s}=t,o=this.instance,a=o.container;if(!e||!i||!n||!s||tt(n)<3||!this.optionFor(t,"zoom")||!a||o.state===rt.Destroy)return!1;if("0"===getComputedStyle(a).getPropertyValue("--f-images-zoom"))return!1;const r=window.visualViewport||null;if(1!==(r?r.scale:1))return!1;let{top:l,left:c,width:h,height:d}=n.getBoundingClientRect(),{top:u,left:f,fitWidth:p,fitHeight:g}=s.contentRect;if(!(h&&d&&p&&g))return!1;const m=s.container.getBoundingClientRect();f+=m.left,u+=m.top;const v=-1*(f+.5*p-(c+.5*h)),b=-1*(u+.5*g-(l+.5*d)),y=h/p;let w=this.option("zoomOpacity")||!1;return"auto"===w&&(w=Math.abs(h/d-p/g)>.1),{x:v,y:b,scale:y,opacity:w}}attach(){const t=this,e=t.instance;e.on("Carousel.change",t.onChange),e.on("Carousel.createSlide",t.onCreateSlide),e.on("Carousel.removeSlide",t.onRemoveSlide),e.on("close",t.onClose)}detach(){const t=this,e=t.instance;e.off("Carousel.change",t.onChange),e.off("Carousel.createSlide",t.onCreateSlide),e.off("Carousel.removeSlide",t.onRemoveSlide),e.off("close",t.onClose)}}Object.defineProperty(wt,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{initialSize:"fit",Panzoom:{maxScale:1},protected:!1,zoom:!0,zoomOpacity:"auto"}}),"function"==typeof SuppressedError&&SuppressedError;const xt="html",Et="image",St="map",Pt="youtube",Ct="vimeo",Tt="html5video",Mt=(t,e={})=>{const i=new URL(t),n=new URLSearchParams(i.search),s=new URLSearchParams;for(const[t,i]of[...n,...Object.entries(e)]){let e=i+"";if("t"===t){let t=e.match(/((\d*)m)?(\d*)s?/);t&&s.set("start",60*parseInt(t[2]||"0")+parseInt(t[3]||"0")+"")}else s.set(t,e)}let o=s+"",a=t.match(/#t=((.*)?\d+s)/);return a&&(o+=`#t=${a[1]}`),o},Ot={ajax:null,autoSize:!0,iframeAttr:{allow:"autoplay; fullscreen",scrolling:"auto"},preload:!0,videoAutoplay:!0,videoRatio:16/9,videoTpl:'<video class="fancybox__html5video" playsinline controls controlsList="nodownload" poster="{{poster}}">\n  <source src="{{src}}" type="{{format}}" />Sorry, your browser doesn\'t support embedded videos.</video>',videoFormat:"",vimeo:{byline:1,color:"00adef",controls:1,dnt:1,muted:0},youtube:{controls:1,enablejsapi:1,nocookie:1,rel:0,fs:1}},At=["image","html","ajax","inline","clone","iframe","map","pdf","html5video","youtube","vimeo"];class Lt extends _{onBeforeInitSlide(t,e,i){this.processType(i)}onCreateSlide(t,e,i){this.setContent(i)}onClearContent(t,e){e.xhr&&(e.xhr.abort(),e.xhr=null);const i=e.iframeEl;i&&(i.onload=i.onerror=null,i.src="//about:blank",e.iframeEl=null);const n=e.contentEl,s=e.placeholderEl;if("inline"===e.type&&n&&s)n.classList.remove("fancybox__content"),"none"!==n.style.display&&(n.style.display="none"),s.parentNode&&s.parentNode.insertBefore(n,s),s.remove(),e.contentEl=void 0,e.placeholderEl=void 0;else for(;e.el&&e.el.firstChild;)e.el.removeChild(e.el.firstChild)}onSelectSlide(t,e,i){i.state===lt.Ready&&this.playVideo()}onUnselectSlide(t,e,i){var n,s;if(i.type===Tt){try{null===(s=null===(n=i.el)||void 0===n?void 0:n.querySelector("video"))||void 0===s||s.pause()}catch(t){}return}let o;i.type===Ct?o={method:"pause",value:"true"}:i.type===Pt&&(o={event:"command",func:"pauseVideo"}),o&&i.iframeEl&&i.iframeEl.contentWindow&&i.iframeEl.contentWindow.postMessage(JSON.stringify(o),"*"),i.poller&&clearTimeout(i.poller)}onDone(t,e){t.isCurrentSlide(e)&&!t.isClosing()&&this.playVideo()}onRefresh(t,e){e.slides.forEach((t=>{t.el&&(this.resizeIframe(t),this.setAspectRatio(t))}))}onMessage(t){try{let e=JSON.parse(t.data);if("https://player.vimeo.com"===t.origin){if("ready"===e.event)for(let e of Array.from(document.getElementsByClassName("fancybox__iframe")))e instanceof HTMLIFrameElement&&e.contentWindow===t.source&&(e.dataset.ready="true")}else if(t.origin.match(/^https:\/\/(www.)?youtube(-nocookie)?.com$/)&&"onReady"===e.event){const t=document.getElementById(e.id);t&&(t.dataset.ready="true")}}catch(t){}}loadAjaxContent(t){const e=this.instance.optionFor(t,"src")||"";this.instance.showLoading(t);const i=this.instance,n=new XMLHttpRequest;i.showLoading(t),n.onreadystatechange=function(){n.readyState===XMLHttpRequest.DONE&&i.state===rt.Ready&&(i.hideLoading(t),200===n.status?i.setContent(t,n.responseText):i.setError(t,404===n.status?"{{AJAX_NOT_FOUND}}":"{{AJAX_FORBIDDEN}}"))};const s=t.ajax||null;n.open(s?"POST":"GET",e+""),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.send(s),t.xhr=n}setInlineContent(t){let e=null;if(S(t.src))e=t.src;else if("string"==typeof t.src){const i=t.src.split("#",2).pop();e=i?document.getElementById(i):null}if(e){if("clone"===t.type||e.closest(".fancybox__slide")){e=e.cloneNode(!0);const i=e.dataset.animationName;i&&(e.classList.remove(i),delete e.dataset.animationName);let n=e.getAttribute("id");n=n?`${n}--clone`:`clone-${this.instance.id}-${t.index}`,e.setAttribute("id",n)}else if(e.parentNode){const i=document.createElement("div");i.classList.add("fancybox-placeholder"),e.parentNode.insertBefore(i,e),t.placeholderEl=i}this.instance.setContent(t,e)}else this.instance.setError(t,"{{ELEMENT_NOT_FOUND}}")}setIframeContent(t){const{src:e,el:i}=t;if(!e||"string"!=typeof e||!i)return;i.classList.add("is-loading");const n=this.instance,s=document.createElement("iframe");s.className="fancybox__iframe",s.setAttribute("id",`fancybox__iframe_${n.id}_${t.index}`);for(const[e,i]of Object.entries(this.optionFor(t,"iframeAttr")||{}))s.setAttribute(e,i);s.onerror=()=>{n.setError(t,"{{IFRAME_ERROR}}")},t.iframeEl=s;const o=this.optionFor(t,"preload");if("iframe"!==t.type||!1===o)return s.setAttribute("src",t.src+""),n.setContent(t,s,!1),this.resizeIframe(t),void n.revealContent(t);n.showLoading(t),s.onload=()=>{if(!s.src.length)return;const e="true"!==s.dataset.ready;s.dataset.ready="true",this.resizeIframe(t),e?n.revealContent(t):n.hideLoading(t)},s.setAttribute("src",e),n.setContent(t,s,!1)}resizeIframe(t){const{type:e,iframeEl:i}=t;if(e===Pt||e===Ct)return;const n=null==i?void 0:i.parentElement;if(!i||!n)return;let s=t.autoSize;void 0===s&&(s=this.optionFor(t,"autoSize"));let o=t.width||0,a=t.height||0;o&&a&&(s=!1);const r=n&&n.style;if(!1!==t.preload&&!1!==s&&r)try{const t=window.getComputedStyle(n),e=parseFloat(t.paddingLeft)+parseFloat(t.paddingRight),s=parseFloat(t.paddingTop)+parseFloat(t.paddingBottom),l=i.contentWindow;if(l){const t=l.document,i=t.getElementsByTagName(xt)[0],n=t.body;r.width="",n.style.overflow="hidden",o=o||i.scrollWidth+e,r.width=`${o}px`,n.style.overflow="",r.flex="0 0 auto",r.height=`${n.scrollHeight}px`,a=i.scrollHeight+s}}catch(t){}if(o||a){const t={flex:"0 1 auto",width:"",height:""};o&&"auto"!==o&&(t.width=`${o}px`),a&&"auto"!==a&&(t.height=`${a}px`),Object.assign(r,t)}}playVideo(){const t=this.instance.getSlide();if(!t)return;const{el:e}=t;if(!e||!e.offsetParent)return;if(!this.optionFor(t,"videoAutoplay"))return;if(t.type===Tt)try{const t=e.querySelector("video");if(t){const e=t.play();void 0!==e&&e.then((()=>{})).catch((e=>{t.muted=!0,t.play()}))}}catch(t){}if(t.type!==Pt&&t.type!==Ct)return;const i=()=>{if(t.iframeEl&&t.iframeEl.contentWindow){let e;if("true"===t.iframeEl.dataset.ready)return e=t.type===Pt?{event:"command",func:"playVideo"}:{method:"play",value:"true"},e&&t.iframeEl.contentWindow.postMessage(JSON.stringify(e),"*"),void(t.poller=void 0);t.type===Pt&&(e={event:"listening",id:t.iframeEl.getAttribute("id")},t.iframeEl.contentWindow.postMessage(JSON.stringify(e),"*"))}t.poller=setTimeout(i,250)};i()}processType(t){if(t.html)return t.type=xt,t.src=t.html,void(t.html="");const e=this.instance.optionFor(t,"src","");if(!e||"string"!=typeof e)return;let i=t.type,n=null;if(n=e.match(/(youtube\.com|youtu\.be|youtube\-nocookie\.com)\/(?:watch\?(?:.*&)?v=|v\/|u\/|shorts\/|embed\/?)?(videoseries\?list=(?:.*)|[\w-]{11}|\?listType=(?:.*)&list=(?:.*))(?:.*)/i)){const s=this.optionFor(t,Pt),{nocookie:o}=s,a=function(t,e){var i={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(i[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(i[n[s]]=t[n[s]])}return i}(s,["nocookie"]),r=`www.youtube${o?"-nocookie":""}.com`,l=Mt(e,a),c=encodeURIComponent(n[2]);t.videoId=c,t.src=`https://${r}/embed/${c}?${l}`,t.thumbSrc=t.thumbSrc||`https://i.ytimg.com/vi/${c}/mqdefault.jpg`,i=Pt}else if(n=e.match(/^.+vimeo.com\/(?:\/)?([\d]+)((\/|\?h=)([a-z0-9]+))?(.*)?/)){const s=Mt(e,this.optionFor(t,Ct)),o=encodeURIComponent(n[1]),a=n[4]||"";t.videoId=o,t.src=`https://player.vimeo.com/video/${o}?${a?`h=${a}${s?"&":""}`:""}${s}`,i=Ct}if(!i&&t.triggerEl){const e=t.triggerEl.dataset.type;At.includes(e)&&(i=e)}i||"string"==typeof e&&("#"===e.charAt(0)?i="inline":(n=e.match(/\.(mp4|mov|ogv|webm)((\?|#).*)?$/i))?(i=Tt,t.videoFormat=t.videoFormat||"video/"+("ogv"===n[1]?"ogg":n[1])):e.match(/(^data:image\/[a-z0-9+\/=]*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg|ico)((\?|#).*)?$)/i)?i=Et:e.match(/\.(pdf)((\?|#).*)?$/i)&&(i="pdf")),(n=e.match(/(?:maps\.)?google\.([a-z]{2,3}(?:\.[a-z]{2})?)\/(?:(?:(?:maps\/(?:place\/(?:.*)\/)?\@(.*),(\d+.?\d+?)z))|(?:\?ll=))(.*)?/i))?(t.src=`https://maps.google.${n[1]}/?ll=${(n[2]?n[2]+"&z="+Math.floor(parseFloat(n[3]))+(n[4]?n[4].replace(/^\//,"&"):""):n[4]+"").replace(/\?/,"&")}&output=${n[4]&&n[4].indexOf("layer=c")>0?"svembed":"embed"}`,i=St):(n=e.match(/(?:maps\.)?google\.([a-z]{2,3}(?:\.[a-z]{2})?)\/(?:maps\/search\/)(.*)/i))&&(t.src=`https://maps.google.${n[1]}/maps?q=${n[2].replace("query=","q=").replace("api=1","")}&output=embed`,i=St),i=i||this.instance.option("defaultType"),t.type=i,i===Et&&(t.thumbSrc=t.thumbSrc||t.src)}setContent(t){const e=this.instance.optionFor(t,"src")||"";if(t&&t.type&&e){switch(t.type){case xt:this.instance.setContent(t,e);break;case Tt:const i=this.option("videoTpl");i&&this.instance.setContent(t,i.replace(/\{\{src\}\}/gi,e+"").replace(/\{\{format\}\}/gi,this.optionFor(t,"videoFormat")||"").replace(/\{\{poster\}\}/gi,t.poster||t.thumbSrc||""));break;case"inline":case"clone":this.setInlineContent(t);break;case"ajax":this.loadAjaxContent(t);break;case"pdf":case St:case Pt:case Ct:t.preload=!1;case"iframe":this.setIframeContent(t)}this.setAspectRatio(t)}}setAspectRatio(t){const e=t.contentEl;if(!(t.el&&e&&t.type&&[Pt,Ct,Tt].includes(t.type)))return;let i,n=t.width||"auto",s=t.height||"auto";if("auto"===n||"auto"===s){i=this.optionFor(t,"videoRatio");const e=(i+"").match(/(\d+)\s*\/\s?(\d+)/);i=e&&e.length>2?parseFloat(e[1])/parseFloat(e[2]):parseFloat(i+"")}else n&&s&&(i=n/s);if(!i)return;e.style.aspectRatio="",e.style.width="",e.style.height="",e.offsetHeight;const o=e.getBoundingClientRect(),a=o.width||1,r=o.height||1;e.style.aspectRatio=i+"",i<a/r?(s="auto"===s?r:Math.min(r,s),e.style.width="auto",e.style.height=`${s}px`):(n="auto"===n?a:Math.min(a,n),e.style.width=`${n}px`,e.style.height="auto")}attach(){const t=this,e=t.instance;e.on("Carousel.beforeInitSlide",t.onBeforeInitSlide),e.on("Carousel.createSlide",t.onCreateSlide),e.on("Carousel.selectSlide",t.onSelectSlide),e.on("Carousel.unselectSlide",t.onUnselectSlide),e.on("Carousel.Panzoom.refresh",t.onRefresh),e.on("done",t.onDone),e.on("clearContent",t.onClearContent),window.addEventListener("message",t.onMessage)}detach(){const t=this,e=t.instance;e.off("Carousel.beforeInitSlide",t.onBeforeInitSlide),e.off("Carousel.createSlide",t.onCreateSlide),e.off("Carousel.selectSlide",t.onSelectSlide),e.off("Carousel.unselectSlide",t.onUnselectSlide),e.off("Carousel.Panzoom.refresh",t.onRefresh),e.off("done",t.onDone),e.off("clearContent",t.onClearContent),window.removeEventListener("message",t.onMessage)}}Object.defineProperty(Lt,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:Ot});const zt="play",Rt="pause",kt="ready";class It extends _{constructor(){super(...arguments),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:kt}),Object.defineProperty(this,"inHover",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"timer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"progressBar",{enumerable:!0,configurable:!0,writable:!0,value:null})}get isActive(){return this.state!==kt}onReady(t){this.option("autoStart")&&(t.isInfinite||t.page<t.pages.length-1)&&this.start()}onChange(){this.removeProgressBar(),this.pause()}onSettle(){this.resume()}onVisibilityChange(){"visible"===document.visibilityState?this.resume():this.pause()}onMouseEnter(){this.inHover=!0,this.pause()}onMouseLeave(){var t;this.inHover=!1,(null===(t=this.instance.panzoom)||void 0===t?void 0:t.isResting)&&this.resume()}onTimerEnd(){const t=this.instance;"play"===this.state&&(t.isInfinite||t.page!==t.pages.length-1?t.slideNext():t.slideTo(0))}removeProgressBar(){this.progressBar&&(this.progressBar.remove(),this.progressBar=null)}createProgressBar(){var t;if(!this.option("showProgress"))return null;this.removeProgressBar();const e=this.instance,i=(null===(t=e.pages[e.page])||void 0===t?void 0:t.slides)||[];let n=this.option("progressParentEl");if(n||(n=(1===i.length?i[0].el:null)||e.viewport),!n)return null;const s=document.createElement("div");return C(s,"f-progress"),n.prepend(s),this.progressBar=s,s.offsetHeight,s}set(){const t=this,e=t.instance;if(e.pages.length<2)return;if(t.timer)return;const i=t.option("timeout");t.state=zt,C(e.container,"has-autoplay");let n=t.createProgressBar();n&&(n.style.transitionDuration=`${i}ms`,n.style.transform="scaleX(1)"),t.timer=setTimeout((()=>{t.timer=null,t.inHover||t.onTimerEnd()}),i),t.emit("set")}clear(){const t=this;t.timer&&(clearTimeout(t.timer),t.timer=null),t.removeProgressBar()}start(){const t=this;if(t.set(),t.state!==kt){if(t.option("pauseOnHover")){const e=t.instance.container;e.addEventListener("mouseenter",t.onMouseEnter,!1),e.addEventListener("mouseleave",t.onMouseLeave,!1)}document.addEventListener("visibilitychange",t.onVisibilityChange,!1),t.emit("start")}}stop(){const t=this,e=t.state,i=t.instance.container;t.clear(),t.state=kt,i.removeEventListener("mouseenter",t.onMouseEnter,!1),i.removeEventListener("mouseleave",t.onMouseLeave,!1),document.removeEventListener("visibilitychange",t.onVisibilityChange,!1),P(i,"has-autoplay"),e!==kt&&t.emit("stop")}pause(){const t=this;t.state===zt&&(t.state=Rt,t.clear(),t.emit(Rt))}resume(){const t=this,e=t.instance;if(e.isInfinite||e.page!==e.pages.length-1)if(t.state!==zt){if(t.state===Rt&&!t.inHover){const e=new Event("resume",{bubbles:!0,cancelable:!0});t.emit("resume",e),e.defaultPrevented||t.set()}}else t.set();else t.stop()}toggle(){this.state===zt||this.state===Rt?this.stop():this.start()}attach(){const t=this,e=t.instance;e.on("ready",t.onReady),e.on("Panzoom.startAnimation",t.onChange),e.on("Panzoom.endAnimation",t.onSettle),e.on("Panzoom.touchMove",t.onChange)}detach(){const t=this,e=t.instance;e.off("ready",t.onReady),e.off("Panzoom.startAnimation",t.onChange),e.off("Panzoom.endAnimation",t.onSettle),e.off("Panzoom.touchMove",t.onChange),t.stop()}}Object.defineProperty(It,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{autoStart:!0,pauseOnHover:!0,progressParentEl:null,showProgress:!0,timeout:3e3}});class Dt extends _{constructor(){super(...arguments),Object.defineProperty(this,"ref",{enumerable:!0,configurable:!0,writable:!0,value:null})}onPrepare(t){const e=t.carousel;if(!e)return;const i=t.container;i&&(e.options.Autoplay=f({autoStart:!1},this.option("Autoplay")||{},{pauseOnHover:!1,timeout:this.option("timeout"),progressParentEl:()=>this.option("progressParentEl")||null,on:{start:()=>{t.emit("startSlideshow")},set:e=>{var n;i.classList.add("has-slideshow"),(null===(n=t.getSlide())||void 0===n?void 0:n.state)!==lt.Ready&&e.pause()},stop:()=>{i.classList.remove("has-slideshow"),t.isCompact||t.endIdle(),t.emit("endSlideshow")},resume:(e,i)=>{var n,s,o;!i||!i.cancelable||(null===(n=t.getSlide())||void 0===n?void 0:n.state)===lt.Ready&&(null===(o=null===(s=t.carousel)||void 0===s?void 0:s.panzoom)||void 0===o?void 0:o.isResting)||i.preventDefault()}}}),e.attachPlugins({Autoplay:It}),this.ref=e.plugins.Autoplay)}onReady(t){const e=t.carousel,i=this.ref;i&&e&&this.option("playOnStart")&&(e.isInfinite||e.page<e.pages.length-1)&&i.start()}onDone(t,e){const i=this.ref,n=t.carousel;if(!i||!n)return;const s=e.panzoom;s&&s.on("startAnimation",(()=>{t.isCurrentSlide(e)&&i.stop()})),t.isCurrentSlide(e)&&i.resume()}onKeydown(t,e){var i;const n=this.ref;n&&e===this.option("key")&&"BUTTON"!==(null===(i=document.activeElement)||void 0===i?void 0:i.nodeName)&&n.toggle()}attach(){const t=this,e=t.instance;e.on("Carousel.init",t.onPrepare),e.on("Carousel.ready",t.onReady),e.on("done",t.onDone),e.on("keydown",t.onKeydown)}detach(){const t=this,e=t.instance;e.off("Carousel.init",t.onPrepare),e.off("Carousel.ready",t.onReady),e.off("done",t.onDone),e.off("keydown",t.onKeydown)}}Object.defineProperty(Dt,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{key:" ",playOnStart:!1,progressParentEl:t=>{var e;return(null===(e=t.instance.container)||void 0===e?void 0:e.querySelector(".fancybox__toolbar [data-fancybox-toggle-slideshow]"))||t.instance.container},timeout:3e3}});const Ft={classes:{container:"f-thumbs f-carousel__thumbs",viewport:"f-thumbs__viewport",track:"f-thumbs__track",slide:"f-thumbs__slide",isResting:"is-resting",isSelected:"is-selected",isLoading:"is-loading",hasThumbs:"has-thumbs"},minCount:2,parentEl:null,thumbTpl:'<button class="f-thumbs__slide__button" tabindex="0" type="button" aria-label="{{GOTO}}" data-carousel-index="%i"><img class="f-thumbs__slide__img" data-lazy-src="{{%s}}" alt="" /></button>',type:"modern"};var jt;!function(t){t[t.Init=0]="Init",t[t.Ready=1]="Ready",t[t.Hidden=2]="Hidden"}(jt||(jt={}));const Bt="isResting",Ht="thumbWidth",Nt="thumbHeight",_t="thumbClipWidth";let $t=class extends _{constructor(){super(...arguments),Object.defineProperty(this,"type",{enumerable:!0,configurable:!0,writable:!0,value:"modern"}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"track",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"carousel",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"thumbWidth",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"thumbClipWidth",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"thumbHeight",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"thumbGap",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"thumbExtraGap",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:jt.Init})}get isModern(){return"modern"===this.type}onInitSlide(t,e){const i=e.el?e.el.dataset:void 0;i&&(e.thumbSrc=i.thumbSrc||e.thumbSrc||"",e[_t]=parseFloat(i[_t]||"")||e[_t]||0,e[Nt]=parseFloat(i.thumbHeight||"")||e[Nt]||0),this.addSlide(e)}onInitSlides(){this.build()}onChange(){var t;if(!this.isModern)return;const e=this.container,i=this.instance,n=i.panzoom,s=this.carousel,o=s?s.panzoom:null,r=i.page;if(n&&s&&o){if(n.isDragging){P(e,this.cn(Bt));let n=(null===(t=s.pages[r])||void 0===t?void 0:t.pos)||0;n+=i.getProgress(r)*(this[_t]+this.thumbGap);let a=o.getBounds();-1*n>a.x.min&&-1*n<a.x.max&&o.panTo({x:-1*n,friction:.12})}else a(e,this.cn(Bt),n.isResting);this.shiftModern()}}onRefresh(){this.updateProps();for(const t of this.instance.slides||[])this.resizeModernSlide(t);this.shiftModern()}isDisabled(){const t=this.option("minCount")||0;if(t){const e=this.instance;let i=0;for(const t of e.slides||[])t.thumbSrc&&i++;if(i<t)return!0}const e=this.option("type");return["modern","classic"].indexOf(e)<0}getThumb(t){const e=this.option("thumbTpl")||"";return{html:this.instance.localize(e,[["%i",t.index],["%d",t.index+1],["%s",t.thumbSrc||"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"]])}}addSlide(t){const e=this.carousel;e&&e.addSlide(t.index,this.getThumb(t))}getSlides(){const t=[];for(const e of this.instance.slides||[])t.push(this.getThumb(e));return t}resizeModernSlide(t){this.isModern&&(t[Ht]=t[_t]&&t[Nt]?Math.round(this[Nt]*(t[_t]/t[Nt])):this[Ht])}updateProps(){const t=this.container;if(!t)return;const e=e=>parseFloat(getComputedStyle(t).getPropertyValue("--f-thumb-"+e))||0;this.thumbGap=e("gap"),this.thumbExtraGap=e("extra-gap"),this[Ht]=e("width")||40,this[_t]=e("clip-width")||40,this[Nt]=e("height")||40}build(){const t=this;if(t.state!==jt.Init)return;if(t.isDisabled())return void t.emit("disabled");const e=t.instance,i=e.container,n=t.getSlides(),s=t.option("type");t.type=s;const o=t.option("parentEl"),a=t.cn("container"),r=t.cn("track");let l=null==o?void 0:o.querySelector("."+a);l||(l=document.createElement("div"),C(l,a),o?o.appendChild(l):i.after(l)),C(l,`is-${s}`),C(i,t.cn("hasThumbs")),t.container=l,t.updateProps();let c=l.querySelector("."+r);c||(c=document.createElement("div"),C(c,t.cn("track")),l.appendChild(c)),t.track=c;const h=f({},{track:c,infinite:!1,center:!0,fill:"classic"===s,dragFree:!0,slidesPerPage:1,transition:!1,preload:.25,friction:.12,Panzoom:{maxVelocity:0},Dots:!1,Navigation:!1,classes:{container:"f-thumbs",viewport:"f-thumbs__viewport",track:"f-thumbs__track",slide:"f-thumbs__slide"}},t.option("Carousel")||{},{Sync:{target:e},slides:n}),d=new e.constructor(l,h);d.on("createSlide",((e,i)=>{t.setProps(i.index),t.emit("createSlide",i,i.el)})),d.on("ready",(()=>{t.shiftModern(),t.emit("ready")})),d.on("refresh",(()=>{t.shiftModern()})),d.on("Panzoom.click",((e,i,n)=>{t.onClick(n)})),t.carousel=d,t.state=jt.Ready}onClick(t){t.preventDefault(),t.stopPropagation();const e=this.instance,{pages:i,page:n}=e,s=t=>{if(t){const e=t.closest("[data-carousel-index]");if(e)return[parseInt(e.dataset.carouselIndex||"",10)||0,e]}return[-1,void 0]},o=(t,e)=>{const i=document.elementFromPoint(t,e);return i?s(i):[-1,void 0]};let[a,r]=s(t.target);if(a>-1)return;const l=this[_t],c=t.clientX,h=t.clientY;let[d,u]=o(c-l,h),[f,p]=o(c+l,h);u&&p?(a=Math.abs(c-u.getBoundingClientRect().right)<Math.abs(c-p.getBoundingClientRect().left)?d:f,a===n&&(a=a===d?f:d)):u?a=d:p&&(a=f),a>-1&&i[a]&&e.slideTo(a)}getShift(t){var e;const i=this,{instance:n}=i,s=i.carousel;if(!n||!s)return 0;const o=i[Ht],a=i[_t],r=i.thumbGap,l=i.thumbExtraGap;if(!(null===(e=s.slides[t])||void 0===e?void 0:e.el))return 0;const c=.5*(o-a),h=n.pages.length-1;let d=n.getProgress(0),u=n.getProgress(h),f=n.getProgress(t,!1,!0),p=0,g=c+l+r;const m=d<0&&d>-1,v=u>0&&u<1;return 0===t?(p=g*Math.abs(d),v&&1===d&&(p-=g*Math.abs(u))):t===h?(p=g*Math.abs(u)*-1,m&&-1===u&&(p+=g*Math.abs(d))):m||v?(p=-1*g,p+=g*Math.abs(d),p+=g*(1-Math.abs(u))):p=g*f,p}setProps(t){var i;const n=this;if(!n.isModern)return;const{instance:s}=n,o=n.carousel;if(s&&o){const a=null===(i=o.slides[t])||void 0===i?void 0:i.el;if(a&&a.childNodes.length){let i=e(1-Math.abs(s.getProgress(t))),o=e(n.getShift(t));a.style.setProperty("--progress",i?i+"":""),a.style.setProperty("--shift",o+"")}}}shiftModern(){const t=this;if(!t.isModern)return;const{instance:e,track:i}=t,n=e.panzoom,s=t.carousel;if(!(e&&i&&n&&s))return;if(n.state===v.Init||n.state===v.Destroy)return;for(const i of e.slides)t.setProps(i.index);let o=(t[_t]+t.thumbGap)*(s.slides.length||0);i.style.setProperty("--width",o+"")}cleanup(){const t=this;t.carousel&&t.carousel.destroy(),t.carousel=null,t.container&&t.container.remove(),t.container=null,t.track&&t.track.remove(),t.track=null,t.state=jt.Init,P(t.instance.container,t.cn("hasThumbs"))}attach(){const t=this,e=t.instance;e.on("initSlide",t.onInitSlide),e.state===B.Init?e.on("initSlides",t.onInitSlides):t.onInitSlides(),e.on(["change","Panzoom.afterTransform"],t.onChange),e.on("Panzoom.refresh",t.onRefresh)}detach(){const t=this,e=t.instance;e.off("initSlide",t.onInitSlide),e.off("initSlides",t.onInitSlides),e.off(["change","Panzoom.afterTransform"],t.onChange),e.off("Panzoom.refresh",t.onRefresh),t.cleanup()}};Object.defineProperty($t,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:Ft});const Wt=Object.assign(Object.assign({},Ft),{key:"t",showOnStart:!0,parentEl:null}),Xt="is-masked",qt="aria-hidden";class Yt extends _{constructor(){super(...arguments),Object.defineProperty(this,"ref",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"hidden",{enumerable:!0,configurable:!0,writable:!0,value:!1})}get isEnabled(){const t=this.ref;return t&&!t.isDisabled()}get isHidden(){return this.hidden}onClick(t,e){e.stopPropagation()}onCreateSlide(t,e){var i,n,s;const o=(null===(s=null===(n=null===(i=this.instance)||void 0===i?void 0:i.carousel)||void 0===n?void 0:n.slides[e.index])||void 0===s?void 0:s.type)||"",a=e.el;if(a&&o){let t=`for-${o}`;["video","youtube","vimeo","html5video"].includes(o)&&(t+=" for-video"),C(a,t)}}onInit(){var t;const e=this,i=e.instance,n=i.carousel;if(e.ref||!n)return;const s=e.option("parentEl")||i.footer||i.container;if(!s)return;const o=f({},e.options,{parentEl:s,classes:{container:"f-thumbs fancybox__thumbs"},Carousel:{Sync:{friction:i.option("Carousel.friction")||0}},on:{ready:t=>{const i=t.container;i&&this.hidden&&(e.refresh(),i.style.transition="none",e.hide(),i.offsetHeight,queueMicrotask((()=>{i.style.transition="",e.show()})))}}});o.Carousel=o.Carousel||{},o.Carousel.on=f((null===(t=e.options.Carousel)||void 0===t?void 0:t.on)||{},{click:this.onClick,createSlide:this.onCreateSlide}),n.options.Thumbs=o,n.attachPlugins({Thumbs:$t}),e.ref=n.plugins.Thumbs,e.option("showOnStart")||(e.ref.state=jt.Hidden,e.hidden=!0)}onResize(){var t;const e=null===(t=this.ref)||void 0===t?void 0:t.container;e&&(e.style.maxHeight="")}onKeydown(t,e){const i=this.option("key");i&&i===e&&this.toggle()}toggle(){const t=this.ref;if(t&&!t.isDisabled())return t.state===jt.Hidden?(t.state=jt.Init,void t.build()):void(this.hidden?this.show():this.hide())}show(){const t=this.ref;if(!t||t.isDisabled())return;const e=t.container;e&&(this.refresh(),e.offsetHeight,e.removeAttribute(qt),e.classList.remove(Xt),this.hidden=!1)}hide(){const t=this.ref,e=t&&t.container;e&&(this.refresh(),e.offsetHeight,e.classList.add(Xt),e.setAttribute(qt,"true")),this.hidden=!0}refresh(){const t=this.ref;if(!t||!t.state)return;const e=t.container,i=(null==e?void 0:e.firstChild)||null;e&&i&&i.childNodes.length&&(e.style.maxHeight=`${i.getBoundingClientRect().height}px`)}attach(){const t=this,e=t.instance;e.state===rt.Init?e.on("Carousel.init",t.onInit):t.onInit(),e.on("resize",t.onResize),e.on("keydown",t.onKeydown)}detach(){var t;const e=this,i=e.instance;i.off("Carousel.init",e.onInit),i.off("resize",e.onResize),i.off("keydown",e.onKeydown),null===(t=i.carousel)||void 0===t||t.detachPlugins(["Thumbs"]),e.ref=null}}Object.defineProperty(Yt,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:Wt});const Vt={panLeft:{icon:'<svg><path d="M5 12h14M5 12l6 6M5 12l6-6"/></svg>',change:{panX:-100}},panRight:{icon:'<svg><path d="M5 12h14M13 18l6-6M13 6l6 6"/></svg>',change:{panX:100}},panUp:{icon:'<svg><path d="M12 5v14M18 11l-6-6M6 11l6-6"/></svg>',change:{panY:-100}},panDown:{icon:'<svg><path d="M12 5v14M18 13l-6 6M6 13l6 6"/></svg>',change:{panY:100}},zoomIn:{icon:'<svg><circle cx="11" cy="11" r="7.5"/><path d="m21 21-4.35-4.35M11 8v6M8 11h6"/></svg>',action:"zoomIn"},zoomOut:{icon:'<svg><circle cx="11" cy="11" r="7.5"/><path d="m21 21-4.35-4.35M8 11h6"/></svg>',action:"zoomOut"},toggle1to1:{icon:'<svg><path d="M3.51 3.07c5.74.02 11.48-.02 17.22.02 1.37.1 2.34 1.64 2.18 3.13 0 4.08.02 8.16 0 12.23-.1 1.54-1.47 2.64-2.79 2.46-5.61-.01-11.24.02-16.86-.01-1.36-.12-2.33-1.65-2.17-3.14 0-4.07-.02-8.16 0-12.23.1-1.36 1.22-2.48 2.42-2.46Z"/><path d="M5.65 8.54h1.49v6.92m8.94-6.92h1.49v6.92M11.5 9.4v.02m0 5.18v0"/></svg>',action:"toggleZoom"},toggleZoom:{icon:'<svg><g><line x1="11" y1="8" x2="11" y2="14"></line></g><circle cx="11" cy="11" r="7.5"/><path d="m21 21-4.35-4.35M8 11h6"/></svg>',action:"toggleZoom"},iterateZoom:{icon:'<svg><g><line x1="11" y1="8" x2="11" y2="14"></line></g><circle cx="11" cy="11" r="7.5"/><path d="m21 21-4.35-4.35M8 11h6"/></svg>',action:"iterateZoom"},rotateCCW:{icon:'<svg><path d="M15 4.55a8 8 0 0 0-6 14.9M9 15v5H4M18.37 7.16v.01M13 19.94v.01M16.84 18.37v.01M19.37 15.1v.01M19.94 11v.01"/></svg>',action:"rotateCCW"},rotateCW:{icon:'<svg><path d="M9 4.55a8 8 0 0 1 6 14.9M15 15v5h5M5.63 7.16v.01M4.06 11v.01M4.63 15.1v.01M7.16 18.37v.01M11 19.94v.01"/></svg>',action:"rotateCW"},flipX:{icon:'<svg style="stroke-width: 1.3"><path d="M12 3v18M16 7v10h5L16 7M8 7v10H3L8 7"/></svg>',action:"flipX"},flipY:{icon:'<svg style="stroke-width: 1.3"><path d="M3 12h18M7 16h10L7 21v-5M7 8h10L7 3v5"/></svg>',action:"flipY"},fitX:{icon:'<svg><path d="M4 12V6a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v6M10 18H3M21 18h-7M6 15l-3 3 3 3M18 15l3 3-3 3"/></svg>',action:"fitX"},fitY:{icon:'<svg><path d="M12 20H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h6M18 14v7M18 3v7M15 18l3 3 3-3M15 6l3-3 3 3"/></svg>',action:"fitY"},reset:{icon:'<svg><path d="M20 11A8.1 8.1 0 0 0 4.5 9M4 5v4h4M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4"/></svg>',action:"reset"},toggleFS:{icon:'<svg><g><path d="M14.5 9.5 21 3m0 0h-6m6 0v6M3 21l6.5-6.5M3 21v-6m0 6h6"/></g><g><path d="m14 10 7-7m-7 7h6m-6 0V4M3 21l7-7m0 0v6m0-6H4"/></g></svg>',action:"toggleFS"}};var Zt;!function(t){t[t.Init=0]="Init",t[t.Ready=1]="Ready",t[t.Disabled=2]="Disabled"}(Zt||(Zt={}));const Ut={absolute:"auto",display:{left:["infobar"],middle:[],right:["iterateZoom","slideshow","fullscreen","thumbs","close"]},enabled:"auto",items:{infobar:{tpl:'<div class="fancybox__infobar" tabindex="-1"><span data-fancybox-current-index></span>/<span data-fancybox-count></span></div>'},download:{tpl:'<a class="f-button" title="{{DOWNLOAD}}" data-fancybox-download href="javasript:;"><svg><path d="M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-2M7 11l5 5 5-5M12 4v12"/></svg></a>'},prev:{tpl:'<button class="f-button" title="{{PREV}}" data-fancybox-prev><svg><path d="m15 6-6 6 6 6"/></svg></button>'},next:{tpl:'<button class="f-button" title="{{NEXT}}" data-fancybox-next><svg><path d="m9 6 6 6-6 6"/></svg></button>'},slideshow:{tpl:'<button class="f-button" title="{{TOGGLE_SLIDESHOW}}" data-fancybox-toggle-slideshow><svg><g><path d="M8 4v16l13 -8z"></path></g><g><path d="M8 4v15M17 4v15"/></g></svg></button>'},fullscreen:{tpl:'<button class="f-button" title="{{TOGGLE_FULLSCREEN}}" data-fancybox-toggle-fullscreen><svg><g><path d="M4 8V6a2 2 0 0 1 2-2h2M4 16v2a2 2 0 0 0 2 2h2M16 4h2a2 2 0 0 1 2 2v2M16 20h2a2 2 0 0 0 2-2v-2"/></g><g><path d="M15 19v-2a2 2 0 0 1 2-2h2M15 5v2a2 2 0 0 0 2 2h2M5 15h2a2 2 0 0 1 2 2v2M5 9h2a2 2 0 0 0 2-2V5"/></g></svg></button>'},thumbs:{tpl:'<button class="f-button" title="{{TOGGLE_THUMBS}}" data-fancybox-toggle-thumbs><svg><circle cx="5.5" cy="5.5" r="1"/><circle cx="12" cy="5.5" r="1"/><circle cx="18.5" cy="5.5" r="1"/><circle cx="5.5" cy="12" r="1"/><circle cx="12" cy="12" r="1"/><circle cx="18.5" cy="12" r="1"/><circle cx="5.5" cy="18.5" r="1"/><circle cx="12" cy="18.5" r="1"/><circle cx="18.5" cy="18.5" r="1"/></svg></button>'},close:{tpl:'<button class="f-button" title="{{CLOSE}}" data-fancybox-close><svg><path d="m19.5 4.5-15 15M4.5 4.5l15 15"/></svg></button>'}},parentEl:null},Gt={tabindex:"-1",width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Kt="has-toolbar",Jt="fancybox__toolbar";class Qt extends _{constructor(){super(...arguments),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:Zt.Init}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:null})}onReady(t){var e;if(!t.carousel)return;let i=this.option("display"),n=this.option("absolute"),s=this.option("enabled");if("auto"===s){const t=this.instance.carousel;let e=0;if(t)for(const i of t.slides)(i.panzoom||"image"===i.type)&&e++;e||(s=!1)}s||(i=void 0);let o=0;const a={left:[],middle:[],right:[]};if(i)for(const t of["left","middle","right"])for(const n of i[t]){const i=this.createEl(n);i&&(null===(e=a[t])||void 0===e||e.push(i),o++)}let r=null;if(o&&(r=this.createContainer()),r){for(const[t,e]of Object.entries(a)){const i=document.createElement("div");C(i,Jt+"__column is-"+t);for(const t of e)i.appendChild(t);"auto"!==n||"middle"!==t||e.length||(n=!0),r.appendChild(i)}!0===n&&C(r,"is-absolute"),this.state=Zt.Ready,this.onRefresh()}else this.state=Zt.Disabled}onClick(t){var e,i;const n=this.instance,s=n.getSlide(),o=null==s?void 0:s.panzoom,a=t.target,r=a&&S(a)?a.dataset:null;if(!r)return;if(void 0!==r.fancyboxToggleThumbs)return t.preventDefault(),t.stopPropagation(),void(null===(e=n.plugins.Thumbs)||void 0===e||e.toggle());if(void 0!==r.fancyboxToggleFullscreen)return t.preventDefault(),t.stopPropagation(),void this.instance.toggleFullscreen();if(void 0!==r.fancyboxToggleSlideshow){t.preventDefault(),t.stopPropagation();const e=null===(i=n.carousel)||void 0===i?void 0:i.plugins.Autoplay;let s=e.isActive;return o&&"mousemove"===o.panMode&&!s&&o.reset(),void(s?e.stop():e.start())}const l=r.panzoomAction,c=r.panzoomChange;if((c||l)&&(t.preventDefault(),t.stopPropagation()),c){let t={};try{t=JSON.parse(c)}catch(t){}o&&o.applyChange(t)}else l&&o&&o[l]&&o[l]()}onChange(){this.onRefresh()}onRefresh(){if(this.instance.isClosing())return;const t=this.container;if(!t)return;const e=this.instance.getSlide();if(!e||e.state!==lt.Ready)return;const i=e&&!e.error&&e.panzoom;for(const e of t.querySelectorAll("[data-panzoom-action]"))i?(e.removeAttribute("disabled"),e.removeAttribute("tabindex")):(e.setAttribute("disabled",""),e.setAttribute("tabindex","-1"));let n=i&&i.canZoomIn(),s=i&&i.canZoomOut();for(const e of t.querySelectorAll('[data-panzoom-action="zoomIn"]'))n?(e.removeAttribute("disabled"),e.removeAttribute("tabindex")):(e.setAttribute("disabled",""),e.setAttribute("tabindex","-1"));for(const e of t.querySelectorAll('[data-panzoom-action="zoomOut"]'))s?(e.removeAttribute("disabled"),e.removeAttribute("tabindex")):(e.setAttribute("disabled",""),e.setAttribute("tabindex","-1"));for(const e of t.querySelectorAll('[data-panzoom-action="toggleZoom"],[data-panzoom-action="iterateZoom"]')){s||n?(e.removeAttribute("disabled"),e.removeAttribute("tabindex")):(e.setAttribute("disabled",""),e.setAttribute("tabindex","-1"));const t=e.querySelector("g");t&&(t.style.display=n?"":"none")}}onDone(t,e){var i;null===(i=e.panzoom)||void 0===i||i.on("afterTransform",(()=>{this.instance.isCurrentSlide(e)&&this.onRefresh()})),this.instance.isCurrentSlide(e)&&this.onRefresh()}createContainer(){const t=this.instance.container;if(!t)return null;const e=this.option("parentEl")||t;let i=e.querySelector("."+Jt);return i||(i=document.createElement("div"),C(i,Jt),e.prepend(i)),i.addEventListener("click",this.onClick,{passive:!1,capture:!0}),t&&C(t,Kt),this.container=i,i}createEl(t){const e=this.instance,i=e.carousel;if(!i)return null;if("toggleFS"===t)return null;if("fullscreen"===t&&!ot())return null;let n=null;const o=i.slides.length||0;let a=0,r=0;for(const t of i.slides)(t.panzoom||"image"===t.type)&&a++,("image"===t.type||t.downloadSrc)&&r++;if(o<2&&["infobar","prev","next"].includes(t))return n;if(void 0!==Vt[t]&&!a)return null;if("download"===t&&!r)return null;if("thumbs"===t){const t=e.plugins.Thumbs;if(!t||!t.isEnabled)return null}if("slideshow"===t){if(!i.plugins.Autoplay||o<2)return null}if(void 0!==Vt[t]){const e=Vt[t];n=document.createElement("button"),n.setAttribute("title",this.instance.localize(`{{${t.toUpperCase()}}}`)),C(n,"f-button"),e.action&&(n.dataset.panzoomAction=e.action),e.change&&(n.dataset.panzoomChange=JSON.stringify(e.change)),n.appendChild(s(this.instance.localize(e.icon)))}else{const e=(this.option("items")||[])[t];e&&(n=s(this.instance.localize(e.tpl)),"function"==typeof e.click&&n.addEventListener("click",(t=>{t.preventDefault(),t.stopPropagation(),"function"==typeof e.click&&e.click.call(this,this,t)})))}const l=null==n?void 0:n.querySelector("svg");if(l)for(const[t,e]of Object.entries(Gt))l.getAttribute(t)||l.setAttribute(t,String(e));return n}removeContainer(){const t=this.container;t&&t.remove(),this.container=null,this.state=Zt.Disabled;const e=this.instance.container;e&&P(e,Kt)}attach(){const t=this,e=t.instance;e.on("Carousel.initSlides",t.onReady),e.on("done",t.onDone),e.on(["reveal","Carousel.change"],t.onChange),t.onReady(t.instance)}detach(){const t=this,e=t.instance;e.off("Carousel.initSlides",t.onReady),e.off("done",t.onDone),e.off(["reveal","Carousel.change"],t.onChange),t.removeContainer()}}Object.defineProperty(Qt,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:Ut});const te={Hash:class extends _{onReady(){ht=!1}onChange(t){ut&&clearTimeout(ut);const{hash:e}=ft(),{hash:i}=pt(),n=t.isOpeningSlide(t.getSlide());n&&(ct=i===e?"":i),e&&e!==i&&(ut=setTimeout((()=>{try{if(t.state===rt.Ready){let t="replaceState";n&&!dt&&(t="pushState",dt=!0),window.history[t]({},document.title,window.location.pathname+window.location.search+e)}}catch(t){}}),300))}onClose(t){if(ut&&clearTimeout(ut),!ht&&dt)return dt=!1,ht=!1,void window.history.back();if(!ht)try{window.history.replaceState({},document.title,window.location.pathname+window.location.search+(ct||""))}catch(t){}}attach(){const t=this.instance;t.on("ready",this.onReady),t.on(["Carousel.ready","Carousel.change"],this.onChange),t.on("close",this.onClose)}detach(){const t=this.instance;t.off("ready",this.onReady),t.off(["Carousel.ready","Carousel.change"],this.onChange),t.off("close",this.onClose)}static parseURL(){return pt()}static startFromUrl(){gt()}static destroy(){window.removeEventListener("hashchange",vt,!1)}},Html:Lt,Images:wt,Slideshow:Dt,Thumbs:Yt,Toolbar:Qt},ee="with-fancybox",ie="hide-scrollbar",ne="--fancybox-scrollbar-compensate",se="--fancybox-body-margin",oe="aria-hidden",ae="is-using-tab",re="is-animated",le="is-compact",ce="is-loading",he="is-opening",de="has-caption",ue="disabled",fe="tabindex",pe="download",ge="href",me="src",ve=t=>"string"==typeof t,be=function(){var t=window.getSelection();return!!t&&"Range"===t.type};let ye,we=null,xe=null,Ee=0,Se=0;const Pe=new Map;let Ce=0;class Te extends m{get isIdle(){return this.idle}get isCompact(){return this.option("compact")}constructor(t=[],e={},i={}){super(e),Object.defineProperty(this,"userSlides",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"userPlugins",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"idle",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"idleTimer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"clickTimer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"pwt",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"ignoreFocusChange",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"startedFs",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:rt.Init}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"footer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"carousel",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"lastFocus",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"prevMouseMoveEvent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),ye||(ye=ot()),this.id=e.id||++Ce,Pe.set(this.id,this),this.userSlides=t,this.userPlugins=i,queueMicrotask((()=>{this.init()}))}init(){if(this.state===rt.Destroy)return;this.state=rt.Init,this.attachPlugins(Object.assign(Object.assign({},Te.Plugins),this.userPlugins)),this.emit("init"),this.emit("attachPlugins"),!0===this.option("hideScrollbar")&&(()=>{if(!et)return;const t=document,e=t.body,i=t.documentElement;if(e.classList.contains(ie))return;let n=window.innerWidth-i.getBoundingClientRect().width;const s=parseFloat(window.getComputedStyle(e).marginRight);n<0&&(n=0),i.style.setProperty(ne,`${n}px`),s&&e.style.setProperty(se,`${s}px`),e.classList.add(ie)})(),this.initLayout(),this.scale();const t=()=>{this.initCarousel(this.userSlides),this.state=rt.Ready,this.attachEvents(),this.emit("ready"),setTimeout((()=>{this.container&&this.container.setAttribute(oe,"false")}),16)};this.option("Fullscreen.autoStart")&&ye&&!ye.isFullscreen()?ye.request().then((()=>{this.startedFs=!0,t()})).catch((()=>t())):t()}initLayout(){var t,e;const i=this.option("parentEl")||document.body,n=s(this.localize(this.option("tpl.main")||""));n&&(n.setAttribute("id",`fancybox-${this.id}`),n.setAttribute("aria-label",this.localize("{{MODAL}}")),n.classList.toggle(le,this.isCompact),C(n,this.option("mainClass")||""),C(n,he),this.container=n,this.footer=n.querySelector(".fancybox__footer"),i.appendChild(n),C(document.documentElement,ee),we&&xe||(we=document.createElement("span"),C(we,"fancybox-focus-guard"),we.setAttribute(fe,"0"),we.setAttribute(oe,"true"),we.setAttribute("aria-label","Focus guard"),xe=we.cloneNode(),null===(t=n.parentElement)||void 0===t||t.insertBefore(we,n),null===(e=n.parentElement)||void 0===e||e.append(xe)),n.addEventListener("mousedown",(t=>{Ee=t.pageX,Se=t.pageY,P(n,ae)})),this.option("animated")&&(C(n,re),setTimeout((()=>{this.isClosing()||P(n,re)}),350)),this.emit("initLayout"))}initCarousel(t){const e=this.container;if(!e)return;const n=e.querySelector(".fancybox__carousel");if(!n)return;const s=this.carousel=new Q(n,f({},{slides:t,transition:"fade",Panzoom:{lockAxis:this.option("dragToClose")?"xy":"x",infinite:!!this.option("dragToClose")&&"y"},Dots:!1,Navigation:{classes:{container:"fancybox__nav",button:"f-button",isNext:"is-next",isPrev:"is-prev"}},initialPage:this.option("startIndex"),l10n:this.option("l10n")},this.option("Carousel")||{}));s.on("*",((t,e,...i)=>{this.emit(`Carousel.${e}`,t,...i)})),s.on(["ready","change"],(()=>{this.manageCaption()})),this.on("Carousel.removeSlide",((t,e,i)=>{this.clearContent(i),i.state=void 0})),s.on("Panzoom.touchStart",(()=>{var t,e;this.isCompact||this.endIdle(),(null===(t=document.activeElement)||void 0===t?void 0:t.closest(".f-thumbs"))&&(null===(e=this.container)||void 0===e||e.focus())})),s.on("settle",(()=>{this.idleTimer||this.isCompact||!this.option("idle")||this.setIdle(),this.option("autoFocus")&&!this.isClosing&&this.checkFocus()})),this.option("dragToClose")&&(s.on("Panzoom.afterTransform",((t,e)=>{const n=this.getSlide();if(n&&i(n.el))return;const s=this.container;if(s){const t=Math.abs(e.current.f),i=t<1?"":Math.max(.5,Math.min(1,1-t/e.contentRect.fitHeight*1.5));s.style.setProperty("--fancybox-ts",i?"0s":""),s.style.setProperty("--fancybox-opacity",i+"")}})),s.on("Panzoom.touchEnd",((t,e,n)=>{var s;const o=this.getSlide();if(o&&i(o.el))return;if(e.isMobile&&document.activeElement&&-1!==["TEXTAREA","INPUT"].indexOf(null===(s=document.activeElement)||void 0===s?void 0:s.nodeName))return;const a=Math.abs(e.dragOffset.y);"y"===e.lockedAxis&&(a>=200||a>=50&&e.dragOffset.time<300)&&(n&&n.cancelable&&n.preventDefault(),this.close(n,"f-throwOut"+(e.current.f<0?"Up":"Down")))}))),s.on("change",(t=>{var e;let i=null===(e=this.getSlide())||void 0===e?void 0:e.triggerEl;if(i){const e=new CustomEvent("slideTo",{bubbles:!0,cancelable:!0,detail:t.page});i.dispatchEvent(e)}})),s.on(["refresh","change"],(t=>{const e=this.container;if(!e)return;for(const i of e.querySelectorAll("[data-fancybox-current-index]"))i.innerHTML=t.page+1;for(const i of e.querySelectorAll("[data-fancybox-count]"))i.innerHTML=t.pages.length;if(!t.isInfinite){for(const i of e.querySelectorAll("[data-fancybox-next]"))t.page<t.pages.length-1?(i.removeAttribute(ue),i.removeAttribute(fe)):(i.setAttribute(ue,""),i.setAttribute(fe,"-1"));for(const i of e.querySelectorAll("[data-fancybox-prev]"))t.page>0?(i.removeAttribute(ue),i.removeAttribute(fe)):(i.setAttribute(ue,""),i.setAttribute(fe,"-1"))}const i=this.getSlide();if(!i)return;let n=i.downloadSrc||"";n||"image"!==i.type||i.error||!ve(i[me])||(n=i[me]);for(const t of e.querySelectorAll("[data-fancybox-download]")){const e=i.downloadFilename;n?(t.removeAttribute(ue),t.removeAttribute(fe),t.setAttribute(ge,n),t.setAttribute(pe,e||n),t.setAttribute("target","_blank")):(t.setAttribute(ue,""),t.setAttribute(fe,"-1"),t.removeAttribute(ge),t.removeAttribute(pe))}})),this.emit("initCarousel")}attachEvents(){const t=this,e=t.container;if(!e)return;e.addEventListener("click",t.onClick,{passive:!1,capture:!1}),e.addEventListener("wheel",t.onWheel,{passive:!1,capture:!1}),document.addEventListener("keydown",t.onKeydown,{passive:!1,capture:!0}),document.addEventListener("visibilitychange",t.onVisibilityChange,!1),document.addEventListener("mousemove",t.onMousemove),t.option("trapFocus")&&document.addEventListener("focus",t.onFocus,!0),window.addEventListener("resize",t.onResize);const i=window.visualViewport;i&&(i.addEventListener("scroll",t.onResize),i.addEventListener("resize",t.onResize))}detachEvents(){const t=this,e=t.container;if(!e)return;document.removeEventListener("keydown",t.onKeydown,{passive:!1,capture:!0}),e.removeEventListener("wheel",t.onWheel,{passive:!1,capture:!1}),e.removeEventListener("click",t.onClick,{passive:!1,capture:!1}),document.removeEventListener("mousemove",t.onMousemove),window.removeEventListener("resize",t.onResize);const i=window.visualViewport;i&&(i.removeEventListener("resize",t.onResize),i.removeEventListener("scroll",t.onResize)),document.removeEventListener("visibilitychange",t.onVisibilityChange,!1),document.removeEventListener("focus",t.onFocus,!0)}scale(){const t=this.container;if(!t)return;const e=window.visualViewport,i=Math.max(1,(null==e?void 0:e.scale)||1);let n="",s="",o="";if(e&&i>1){let t=`${e.offsetLeft}px`,a=`${e.offsetTop}px`;n=e.width*i+"px",s=e.height*i+"px",o=`translate3d(${t}, ${a}, 0) scale(${1/i})`}t.style.transform=o,t.style.width=n,t.style.height=s}onClick(t){var e;const{container:i,isCompact:n}=this;if(!i||this.isClosing())return;!n&&this.option("idle")&&this.resetIdle();const s=t.composedPath()[0];if(s.closest(".fancybox-spinner")||s.closest("[data-fancybox-close]"))return t.preventDefault(),void this.close(t);if(s.closest("[data-fancybox-prev]"))return t.preventDefault(),void this.prev();if(s.closest("[data-fancybox-next]"))return t.preventDefault(),void this.next();if("click"===t.type&&0===t.detail)return;if(Math.abs(t.pageX-Ee)>30||Math.abs(t.pageY-Se)>30)return;const o=document.activeElement;if(be()&&o&&i.contains(o))return;if(n&&"image"===(null===(e=this.getSlide())||void 0===e?void 0:e.type))return void(this.clickTimer?(clearTimeout(this.clickTimer),this.clickTimer=null):this.clickTimer=setTimeout((()=>{this.toggleIdle(),this.clickTimer=null}),350));if(this.emit("click",t),t.defaultPrevented)return;let a=!1;if(s.closest(".fancybox__content")){if(o){if(o.closest("[contenteditable]"))return;s.matches(nt)||o.blur()}if(be())return;a=this.option("contentClick")}else s.closest(".fancybox__carousel")&&!s.matches(nt)&&(a=this.option("backdropClick"));"close"===a?(t.preventDefault(),this.close(t)):"next"===a?(t.preventDefault(),this.next()):"prev"===a&&(t.preventDefault(),this.prev())}onWheel(t){const e=t.target;let i=this.option("wheel",t);e.closest(".fancybox__thumbs")&&(i="slide");const s="slide"===i,o=[-t.deltaX||0,-t.deltaY||0,-t.detail||0].reduce((function(t,e){return Math.abs(e)>Math.abs(t)?e:t})),a=Math.max(-1,Math.min(1,o)),r=Date.now();this.pwt&&r-this.pwt<300?s&&t.preventDefault():(this.pwt=r,this.emit("wheel",t,a),t.defaultPrevented||("close"===i?(t.preventDefault(),this.close(t)):"slide"===i&&(n(e)||(t.preventDefault(),this[a>0?"prev":"next"]()))))}onKeydown(t){if(!this.isTopmost())return;this.isCompact||!this.option("idle")||this.isClosing()||this.resetIdle();const e=t.key,i=this.option("keyboard");if(!i)return;const n=t.composedPath()[0],s=document.activeElement&&document.activeElement.classList,o=s&&s.contains("f-button")||n.dataset.carouselPage||n.dataset.carouselIndex;if("Escape"!==e&&!o&&S(n)){if(n.isContentEditable||-1!==["TEXTAREA","OPTION","INPUT","SELECT","VIDEO"].indexOf(n.nodeName))return}if("Tab"===t.key?C(this.container,ae):P(this.container,ae),t.ctrlKey||t.altKey||t.shiftKey)return;this.emit("keydown",e,t);const a=i[e];a&&"function"==typeof this[a]&&(t.preventDefault(),this[a]())}onResize(){const t=this.container;if(!t)return;const e=this.isCompact;t.classList.toggle(le,e),this.manageCaption(this.getSlide()),this.isCompact?this.clearIdle():this.endIdle(),this.scale(),this.emit("resize")}onFocus(t){this.isTopmost()&&this.checkFocus(t)}onMousemove(t){this.prevMouseMoveEvent=t,!this.isCompact&&this.option("idle")&&this.resetIdle()}onVisibilityChange(){"visible"===document.visibilityState?this.checkFocus():this.endIdle()}manageCloseBtn(t){const e=this.optionFor(t,"closeButton")||!1;if("auto"===e){const t=this.plugins.Toolbar;if(t&&t.state===Zt.Ready)return}if(!e)return;if(!t.contentEl||t.closeBtnEl)return;const i=this.option("tpl.closeButton");if(i){const e=s(this.localize(i));t.closeBtnEl=t.contentEl.appendChild(e),t.el&&C(t.el,"has-close-btn")}}manageCaption(t=void 0){var e,i;const n="fancybox__caption",s=this.container;if(!s)return;P(s,de);const o=this.isCompact||this.option("commonCaption"),a=!o;if(this.caption&&this.stop(this.caption),a&&this.caption&&(this.caption.remove(),this.caption=null),o&&!this.caption)for(const t of(null===(e=this.carousel)||void 0===e?void 0:e.slides)||[])t.captionEl&&(t.captionEl.remove(),t.captionEl=void 0,P(t.el,de),null===(i=t.el)||void 0===i||i.removeAttribute("aria-labelledby"));if(t||(t=this.getSlide()),!t||o&&!this.isCurrentSlide(t))return;const r=t.el;let l=this.optionFor(t,"caption","");if(!l)return void(o&&this.caption&&this.animate(this.caption,"f-fadeOut",(()=>{this.caption&&(this.caption.innerHTML="")})));let c=null;if(a){if(c=t.captionEl||null,r&&!c){const e=n+`_${this.id}_${t.index}`;c=document.createElement("div"),C(c,n),c.setAttribute("id",e),t.captionEl=r.appendChild(c),C(r,de),r.setAttribute("aria-labelledby",e)}}else{if(c=this.caption,c||(c=s.querySelector("."+n)),!c){c=document.createElement("div"),c.dataset.fancyboxCaption="",C(c,n);(this.footer||s).prepend(c)}C(s,de),this.caption=c}c&&(c.innerHTML="",ve(l)||"number"==typeof l?c.innerHTML=l+"":l instanceof HTMLElement&&c.appendChild(l))}checkFocus(t){this.focus(t)}focus(t){var e;if(this.ignoreFocusChange)return;const i=document.activeElement||null,n=(null==t?void 0:t.target)||null,s=this.container,o=null===(e=this.carousel)||void 0===e?void 0:e.viewport;if(!s||!o)return;if(!t&&i&&s.contains(i))return;const a=this.getSlide(),r=a&&a.state===lt.Ready?a.el:null;if(!r||r.contains(i)||s===i)return;t&&t.cancelable&&t.preventDefault(),this.ignoreFocusChange=!0;const l=Array.from(s.querySelectorAll(nt));let c=[],h=null;for(let t of l){const e=!t.offsetParent||!!t.closest('[aria-hidden="true"]'),i=r&&r.contains(t),n=!o.contains(t);if(t===s||(i||n)&&!e){c.push(t);const e=t.dataset.origTabindex;void 0!==e&&e&&(t.tabIndex=parseFloat(e)),t.removeAttribute("data-orig-tabindex"),!t.hasAttribute("autoFocus")&&h||(h=t)}else{const e=void 0===t.dataset.origTabindex?t.getAttribute("tabindex")||"":t.dataset.origTabindex;e&&(t.dataset.origTabindex=e),t.tabIndex=-1}}let d=null;t?(!n||c.indexOf(n)<0)&&(d=h||s,c.length&&(i===xe?d=c[0]:this.lastFocus!==s&&i!==we||(d=c[c.length-1]))):d=a&&"image"===a.type?s:h||s,d&&st(d),this.lastFocus=document.activeElement,this.ignoreFocusChange=!1}next(){const t=this.carousel;t&&t.pages.length>1&&t.slideNext()}prev(){const t=this.carousel;t&&t.pages.length>1&&t.slidePrev()}jumpTo(...t){this.carousel&&this.carousel.slideTo(...t)}isTopmost(){var t;return(null===(t=Te.getInstance())||void 0===t?void 0:t.id)==this.id}animate(t=null,e="",i){if(!t||!e)return void(i&&i());this.stop(t);const n=s=>{s.target===t&&t.dataset.animationName&&(t.removeEventListener("animationend",n),delete t.dataset.animationName,i&&i(),P(t,e))};t.dataset.animationName=e,t.addEventListener("animationend",n),C(t,e)}stop(t){t&&t.dispatchEvent(new CustomEvent("animationend",{bubbles:!1,cancelable:!0,currentTarget:t}))}setContent(t,e="",i=!0){if(this.isClosing())return;const n=t.el;if(!n)return;let o=null;if(S(e)?o=e:(o=s(e+""),S(o)||(o=document.createElement("div"),o.innerHTML=e+"")),["img","picture","iframe","video","audio"].includes(o.nodeName.toLowerCase())){const t=document.createElement("div");t.appendChild(o),o=t}S(o)&&t.filter&&!t.error&&(o=o.querySelector(t.filter)),o&&S(o)?(C(o,"fancybox__content"),t.id&&o.setAttribute("id",t.id),"none"!==o.style.display&&"none"!==getComputedStyle(o).getPropertyValue("display")||(o.style.display=t.display||this.option("defaultDisplay")||"flex"),n.classList.add(`has-${t.error?"error":t.type||"unknown"}`),n.prepend(o),t.contentEl=o,i&&this.revealContent(t),this.manageCloseBtn(t),this.manageCaption(t)):this.setError(t,"{{ELEMENT_NOT_FOUND}}")}revealContent(t,e){const i=t.el,n=t.contentEl;i&&n&&(this.emit("reveal",t),this.hideLoading(t),t.state=lt.Opening,(e=this.isOpeningSlide(t)?void 0===e?this.optionFor(t,"showClass"):e:"f-fadeIn")?this.animate(n,e,(()=>{this.done(t)})):this.done(t))}done(t){this.isClosing()||(t.state=lt.Ready,this.emit("done",t),C(t.el,"is-done"),this.isCurrentSlide(t)&&this.option("autoFocus")&&queueMicrotask((()=>{var e;null===(e=t.panzoom)||void 0===e||e.updateControls(),this.option("autoFocus")&&this.focus()})),this.isOpeningSlide(t)&&(P(this.container,he),!this.isCompact&&this.option("idle")&&this.setIdle()))}isCurrentSlide(t){const e=this.getSlide();return!(!t||!e)&&e.index===t.index}isOpeningSlide(t){var e,i;return null===(null===(e=this.carousel)||void 0===e?void 0:e.prevPage)&&t&&t.index===(null===(i=this.getSlide())||void 0===i?void 0:i.index)}showLoading(t){t.state=lt.Loading;const e=t.el;if(!e)return;C(e,ce),this.emit("loading",t),t.spinnerEl||setTimeout((()=>{if(!this.isClosing()&&!t.spinnerEl&&t.state===lt.Loading){let i=s(E);C(i,"fancybox-spinner"),t.spinnerEl=i,e.prepend(i),this.animate(i,"f-fadeIn")}}),250)}hideLoading(t){const e=t.el;if(!e)return;const i=t.spinnerEl;this.isClosing()?null==i||i.remove():(P(e,ce),i&&this.animate(i,"f-fadeOut",(()=>{i.remove()})),t.state===lt.Loading&&(this.emit("loaded",t),t.state=lt.Ready))}setError(t,e){if(this.isClosing())return;const i=new Event("error",{bubbles:!0,cancelable:!0});if(this.emit("error",i,t),i.defaultPrevented)return;t.error=e,this.hideLoading(t),this.clearContent(t);const n=document.createElement("div");n.classList.add("fancybox-error"),n.innerHTML=this.localize(e||"<p>{{ERROR}}</p>"),this.setContent(t,n)}clearContent(t){if(void 0===t.state)return;this.emit("clearContent",t),t.contentEl&&(t.contentEl.remove(),t.contentEl=void 0);const e=t.el;e&&(P(e,"has-error"),P(e,"has-unknown"),P(e,`has-${t.type||"unknown"}`)),t.closeBtnEl&&t.closeBtnEl.remove(),t.closeBtnEl=void 0,t.captionEl&&t.captionEl.remove(),t.captionEl=void 0,t.spinnerEl&&t.spinnerEl.remove(),t.spinnerEl=void 0}getSlide(){var t;const e=this.carousel;return(null===(t=null==e?void 0:e.pages[null==e?void 0:e.page])||void 0===t?void 0:t.slides[0])||void 0}close(t,e){if(this.isClosing())return;const i=new Event("shouldClose",{bubbles:!0,cancelable:!0});if(this.emit("shouldClose",i,t),i.defaultPrevented)return;t&&t.cancelable&&(t.preventDefault(),t.stopPropagation());const n=()=>{this.proceedClose(t,e)};this.startedFs&&ye&&ye.isFullscreen()?Promise.resolve(ye.exit()).then((()=>n())):n()}clearIdle(){this.idleTimer&&clearTimeout(this.idleTimer),this.idleTimer=null}setIdle(t=!1){const e=()=>{this.clearIdle(),this.idle=!0,C(this.container,"is-idle"),this.emit("setIdle")};if(this.clearIdle(),!this.isClosing())if(t)e();else{const t=this.option("idle");t&&(this.idleTimer=setTimeout(e,t))}}endIdle(){this.clearIdle(),this.idle&&!this.isClosing()&&(this.idle=!1,P(this.container,"is-idle"),this.emit("endIdle"))}resetIdle(){this.endIdle(),this.setIdle()}toggleIdle(){this.idle?this.endIdle():this.setIdle(!0)}toggleFullscreen(){ye&&(ye.isFullscreen()?ye.exit():ye.request().then((()=>{this.startedFs=!0})))}isClosing(){return[rt.Closing,rt.CustomClosing,rt.Destroy].includes(this.state)}proceedClose(t,e){var i,n;this.state=rt.Closing,this.clearIdle(),this.detachEvents();const s=this.container,o=this.carousel,a=this.getSlide(),r=a&&this.option("placeFocusBack")?a.triggerEl||this.option("triggerEl"):null;if(r&&(tt(r)?st(r):r.focus()),s&&(P(s,he),C(s,"is-closing"),s.setAttribute(oe,"true"),this.option("animated")&&C(s,re),s.style.pointerEvents="none"),o){o.clearTransitions(),null===(i=o.panzoom)||void 0===i||i.destroy(),null===(n=o.plugins.Navigation)||void 0===n||n.detach();for(const t of o.slides){t.state=lt.Closing,this.hideLoading(t);const e=t.contentEl;e&&this.stop(e);const i=null==t?void 0:t.panzoom;i&&(i.stop(),i.detachEvents(),i.detachObserver()),this.isCurrentSlide(t)||o.emit("removeSlide",t)}}this.emit("close",t),this.state!==rt.CustomClosing?(void 0===e&&a&&(e=this.optionFor(a,"hideClass")),e&&a?(this.animate(a.contentEl,e,(()=>{o&&o.emit("removeSlide",a)})),setTimeout((()=>{this.destroy()}),500)):this.destroy()):setTimeout((()=>{this.destroy()}),500)}destroy(){var t;if(this.state===rt.Destroy)return;this.state=rt.Destroy,null===(t=this.carousel)||void 0===t||t.destroy();const e=this.container;e&&e.remove(),Pe.delete(this.id);const i=Te.getInstance();i?i.focus():(we&&(we.remove(),we=null),xe&&(xe.remove(),xe=null),P(document.documentElement,ee),(()=>{if(!et)return;const t=document,e=t.body;e.classList.remove(ie),e.style.setProperty(se,""),t.documentElement.style.setProperty(ne,"")})(),this.emit("destroy"))}static bind(t,e,i){if(!et)return;let n,s="",o={};if(void 0===t?n=document.body:ve(t)?(n=document.body,s=t,"object"==typeof e&&(o=e||{})):(n=t,ve(e)&&(s=e),"object"==typeof i&&(o=i||{})),!n||!S(n))return;s=s||"[data-fancybox]";const a=Te.openers.get(n)||new Map;a.set(s,o),Te.openers.set(n,a),1===a.size&&n.addEventListener("click",Te.fromEvent)}static unbind(t,e){let i,n="";if(ve(t)?(i=document.body,n=t):(i=t,ve(e)&&(n=e)),!i)return;const s=Te.openers.get(i);s&&n&&s.delete(n),n&&s||(Te.openers.delete(i),i.removeEventListener("click",Te.fromEvent))}static destroy(){let t;for(;t=Te.getInstance();)t.destroy();for(const t of Te.openers.keys())t.removeEventListener("click",Te.fromEvent);Te.openers=new Map}static fromEvent(t){if(t.defaultPrevented)return;if(t.button&&0!==t.button)return;if(t.ctrlKey||t.metaKey||t.shiftKey)return;let e=t.composedPath()[0];const i=e.closest("[data-fancybox-trigger]");if(i){const t=i.dataset.fancyboxTrigger||"",n=document.querySelectorAll(`[data-fancybox="${t}"]`),s=parseInt(i.dataset.fancyboxIndex||"",10)||0;e=n[s]||e}if(!(e&&e instanceof Element))return;let n,s,o,a;if([...Te.openers].reverse().find((([t,i])=>!(!t.contains(e)||![...i].reverse().find((([i,r])=>{let l=e.closest(i);return!!l&&(n=t,s=i,o=l,a=r,!0)}))))),!n||!s||!o)return;a=a||{},t.preventDefault(),e=o;let r=[],l=f({},at,a);l.event=t,l.triggerEl=e,l.delegate=i;const c=l.groupAll,h=l.groupAttr,d=h&&e?e.getAttribute(`${h}`):"";if((!e||d||c)&&(r=[].slice.call(n.querySelectorAll(s))),e&&!c&&(r=d?r.filter((t=>t.getAttribute(`${h}`)===d)):[e]),!r.length)return;const u=Te.getInstance();return u&&u.options.triggerEl&&r.indexOf(u.options.triggerEl)>-1?void 0:(e&&(l.startIndex=r.indexOf(e)),Te.fromNodes(r,l))}static fromSelector(t,e,i){let n=null,s="",o={};if(ve(t)?(n=document.body,s=t,"object"==typeof e&&(o=e||{})):t instanceof HTMLElement&&ve(e)&&(n=t,s=e,"object"==typeof i&&(o=i||{})),!n||!s)return!1;const a=Te.openers.get(n);return!!a&&(o=f({},a.get(s)||{},o),!!o&&Te.fromNodes(Array.from(n.querySelectorAll(s)),o))}static fromNodes(t,e){e=f({},at,e||{});const i=[];for(const n of t){const t=n.dataset||{},s=t[me]||n.getAttribute(ge)||n.getAttribute("currentSrc")||n.getAttribute(me)||void 0;let o;const a=e.delegate;let r;a&&i.length===e.startIndex&&(o=a instanceof HTMLImageElement?a:a.querySelector("img:not([aria-hidden])")),o||(o=n instanceof HTMLImageElement?n:n.querySelector("img:not([aria-hidden])")),o&&(r=o.currentSrc||o[me]||void 0,!r&&o.dataset&&(r=o.dataset.lazySrc||o.dataset[me]||void 0));const l={src:s,triggerEl:n,thumbEl:o,thumbElSrc:r,thumbSrc:r};for(const e in t){let i=t[e]+"";i="false"!==i&&("true"===i||i),l[e]=i}i.push(l)}return new Te(i,e)}static getInstance(t){if(t)return Pe.get(t);return Array.from(Pe.values()).reverse().find((t=>!t.isClosing()&&t))||null}static getSlide(){var t;return(null===(t=Te.getInstance())||void 0===t?void 0:t.getSlide())||null}static show(t=[],e={}){return new Te(t,e)}static next(){const t=Te.getInstance();t&&t.next()}static prev(){const t=Te.getInstance();t&&t.prev()}static close(t=!0,...e){if(t)for(const t of Pe.values())t.close(...e);else{const t=Te.getInstance();t&&t.close(...e)}}}Object.defineProperty(Te,"version",{enumerable:!0,configurable:!0,writable:!0,value:"5.0.32"}),Object.defineProperty(Te,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:at}),Object.defineProperty(Te,"Plugins",{enumerable:!0,configurable:!0,writable:!0,value:te}),Object.defineProperty(Te,"openers",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),t.Carousel=Q,t.Fancybox=Te,t.Panzoom=I}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlcyI6WyJsaWIvZ2FsbGVyeS9mYW5jeWJveC51bWQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiIWZ1bmN0aW9uKHQsZSl7XCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHMmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBtb2R1bGU/ZShleHBvcnRzKTpcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFtcImV4cG9ydHNcIl0sZSk6ZSgodD1cInVuZGVmaW5lZFwiIT10eXBlb2YgZ2xvYmFsVGhpcz9nbG9iYWxUaGlzOnR8fHNlbGYpLndpbmRvdz10LndpbmRvd3x8e30pfSh0aGlzLChmdW5jdGlvbih0KXtcInVzZSBzdHJpY3RcIjtjb25zdCBlPSh0LGU9MWU0KT0+KHQ9cGFyc2VGbG9hdCh0K1wiXCIpfHwwLE1hdGgucm91bmQoKHQrTnVtYmVyLkVQU0lMT04pKmUpL2UpLGk9ZnVuY3Rpb24odCl7aWYoISh0JiZ0IGluc3RhbmNlb2YgRWxlbWVudCYmdC5vZmZzZXRQYXJlbnQpKXJldHVybiExO2NvbnN0IGU9dC5zY3JvbGxIZWlnaHQ+dC5jbGllbnRIZWlnaHQsaT13aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0KS5vdmVyZmxvd1ksbj0tMSE9PWkuaW5kZXhPZihcImhpZGRlblwiKSxzPS0xIT09aS5pbmRleE9mKFwidmlzaWJsZVwiKTtyZXR1cm4gZSYmIW4mJiFzfSxuPWZ1bmN0aW9uKHQsZT12b2lkIDApe3JldHVybiEoIXR8fHQ9PT1kb2N1bWVudC5ib2R5fHxlJiZ0PT09ZSkmJihpKHQpP3Q6bih0LnBhcmVudEVsZW1lbnQsZSkpfSxzPWZ1bmN0aW9uKHQpe3ZhciBlPShuZXcgRE9NUGFyc2VyKS5wYXJzZUZyb21TdHJpbmcodCxcInRleHQvaHRtbFwiKS5ib2R5O2lmKGUuY2hpbGRFbGVtZW50Q291bnQ+MSl7Zm9yKHZhciBpPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7ZS5maXJzdENoaWxkOylpLmFwcGVuZENoaWxkKGUuZmlyc3RDaGlsZCk7cmV0dXJuIGl9cmV0dXJuIGUuZmlyc3RDaGlsZH0sbz10PT5gJHt0fHxcIlwifWAuc3BsaXQoXCIgXCIpLmZpbHRlcigodD0+ISF0KSksYT0odCxlLGkpPT57dCYmbyhlKS5mb3JFYWNoKChlPT57dC5jbGFzc0xpc3QudG9nZ2xlKGUsaXx8ITEpfSkpfTtjbGFzcyBye2NvbnN0cnVjdG9yKHQpe09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwicGFnZVhcIix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6dm9pZCAwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJwYWdlWVwiLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTp2b2lkIDB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxcImNsaWVudFhcIix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6dm9pZCAwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJjbGllbnRZXCIse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOnZvaWQgMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwiaWRcIix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6dm9pZCAwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJ0aW1lXCIse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOnZvaWQgMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwibmF0aXZlUG9pbnRlclwiLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTp2b2lkIDB9KSx0aGlzLm5hdGl2ZVBvaW50ZXI9dCx0aGlzLnBhZ2VYPXQucGFnZVgsdGhpcy5wYWdlWT10LnBhZ2VZLHRoaXMuY2xpZW50WD10LmNsaWVudFgsdGhpcy5jbGllbnRZPXQuY2xpZW50WSx0aGlzLmlkPXNlbGYuVG91Y2gmJnQgaW5zdGFuY2VvZiBUb3VjaD90LmlkZW50aWZpZXI6LTEsdGhpcy50aW1lPURhdGUubm93KCl9fWNvbnN0IGw9e3Bhc3NpdmU6ITF9O2NsYXNzIGN7Y29uc3RydWN0b3IodCx7c3RhcnQ6ZT0oKCk9PiEwKSxtb3ZlOmk9KCgpPT57fSksZW5kOm49KCgpPT57fSl9KXtPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxcImVsZW1lbnRcIix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6dm9pZCAwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJzdGFydENhbGxiYWNrXCIse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOnZvaWQgMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwibW92ZUNhbGxiYWNrXCIse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOnZvaWQgMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwiZW5kQ2FsbGJhY2tcIix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6dm9pZCAwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJjdXJyZW50UG9pbnRlcnNcIix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6W119KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxcInN0YXJ0UG9pbnRlcnNcIix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6W119KSx0aGlzLmVsZW1lbnQ9dCx0aGlzLnN0YXJ0Q2FsbGJhY2s9ZSx0aGlzLm1vdmVDYWxsYmFjaz1pLHRoaXMuZW5kQ2FsbGJhY2s9bjtmb3IoY29uc3QgdCBvZltcIm9uUG9pbnRlclN0YXJ0XCIsXCJvblRvdWNoU3RhcnRcIixcIm9uTW92ZVwiLFwib25Ub3VjaEVuZFwiLFwib25Qb2ludGVyRW5kXCIsXCJvbldpbmRvd0JsdXJcIl0pdGhpc1t0XT10aGlzW3RdLmJpbmQodGhpcyk7dGhpcy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIix0aGlzLm9uUG9pbnRlclN0YXJ0LGwpLHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwidG91Y2hzdGFydFwiLHRoaXMub25Ub3VjaFN0YXJ0LGwpLHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwidG91Y2htb3ZlXCIsdGhpcy5vbk1vdmUsbCksdGhpcy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaGVuZFwiLHRoaXMub25Ub3VjaEVuZCksdGhpcy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaGNhbmNlbFwiLHRoaXMub25Ub3VjaEVuZCl9b25Qb2ludGVyU3RhcnQodCl7aWYoIXQuYnV0dG9uc3x8MCE9PXQuYnV0dG9uKXJldHVybjtjb25zdCBlPW5ldyByKHQpO3RoaXMuY3VycmVudFBvaW50ZXJzLnNvbWUoKHQ9PnQuaWQ9PT1lLmlkKSl8fHRoaXMudHJpZ2dlclBvaW50ZXJTdGFydChlLHQpJiYod2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIix0aGlzLm9uTW92ZSksd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsdGhpcy5vblBvaW50ZXJFbmQpLHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiYmx1clwiLHRoaXMub25XaW5kb3dCbHVyKSl9b25Ub3VjaFN0YXJ0KHQpe2Zvcihjb25zdCBlIG9mIEFycmF5LmZyb20odC5jaGFuZ2VkVG91Y2hlc3x8W10pKXRoaXMudHJpZ2dlclBvaW50ZXJTdGFydChuZXcgcihlKSx0KTt3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImJsdXJcIix0aGlzLm9uV2luZG93Qmx1cil9b25Nb3ZlKHQpe2NvbnN0IGU9dGhpcy5jdXJyZW50UG9pbnRlcnMuc2xpY2UoKSxpPVwiY2hhbmdlZFRvdWNoZXNcImluIHQ/QXJyYXkuZnJvbSh0LmNoYW5nZWRUb3VjaGVzfHxbXSkubWFwKCh0PT5uZXcgcih0KSkpOltuZXcgcih0KV0sbj1bXTtmb3IoY29uc3QgdCBvZiBpKXtjb25zdCBlPXRoaXMuY3VycmVudFBvaW50ZXJzLmZpbmRJbmRleCgoZT0+ZS5pZD09PXQuaWQpKTtlPDB8fChuLnB1c2godCksdGhpcy5jdXJyZW50UG9pbnRlcnNbZV09dCl9bi5sZW5ndGgmJnRoaXMubW92ZUNhbGxiYWNrKHQsdGhpcy5jdXJyZW50UG9pbnRlcnMuc2xpY2UoKSxlKX1vblBvaW50ZXJFbmQodCl7dC5idXR0b25zPjAmJjAhPT10LmJ1dHRvbnx8KHRoaXMudHJpZ2dlclBvaW50ZXJFbmQodCxuZXcgcih0KSksd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIix0aGlzLm9uTW92ZSksd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsdGhpcy5vblBvaW50ZXJFbmQpLHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwiYmx1clwiLHRoaXMub25XaW5kb3dCbHVyKSl9b25Ub3VjaEVuZCh0KXtmb3IoY29uc3QgZSBvZiBBcnJheS5mcm9tKHQuY2hhbmdlZFRvdWNoZXN8fFtdKSl0aGlzLnRyaWdnZXJQb2ludGVyRW5kKHQsbmV3IHIoZSkpfXRyaWdnZXJQb2ludGVyU3RhcnQodCxlKXtyZXR1cm4hIXRoaXMuc3RhcnRDYWxsYmFjayhlLHQsdGhpcy5jdXJyZW50UG9pbnRlcnMuc2xpY2UoKSkmJih0aGlzLmN1cnJlbnRQb2ludGVycy5wdXNoKHQpLHRoaXMuc3RhcnRQb2ludGVycy5wdXNoKHQpLCEwKX10cmlnZ2VyUG9pbnRlckVuZCh0LGUpe2NvbnN0IGk9dGhpcy5jdXJyZW50UG9pbnRlcnMuZmluZEluZGV4KCh0PT50LmlkPT09ZS5pZCkpO2k8MHx8KHRoaXMuY3VycmVudFBvaW50ZXJzLnNwbGljZShpLDEpLHRoaXMuc3RhcnRQb2ludGVycy5zcGxpY2UoaSwxKSx0aGlzLmVuZENhbGxiYWNrKHQsZSx0aGlzLmN1cnJlbnRQb2ludGVycy5zbGljZSgpKSl9b25XaW5kb3dCbHVyKCl7dGhpcy5jbGVhcigpfWNsZWFyKCl7Zm9yKDt0aGlzLmN1cnJlbnRQb2ludGVycy5sZW5ndGg7KXtjb25zdCB0PXRoaXMuY3VycmVudFBvaW50ZXJzW3RoaXMuY3VycmVudFBvaW50ZXJzLmxlbmd0aC0xXTt0aGlzLmN1cnJlbnRQb2ludGVycy5zcGxpY2UodGhpcy5jdXJyZW50UG9pbnRlcnMubGVuZ3RoLTEsMSksdGhpcy5zdGFydFBvaW50ZXJzLnNwbGljZSh0aGlzLmN1cnJlbnRQb2ludGVycy5sZW5ndGgtMSwxKSx0aGlzLmVuZENhbGxiYWNrKG5ldyBFdmVudChcInRvdWNoZW5kXCIse2J1YmJsZXM6ITAsY2FuY2VsYWJsZTohMCxjbGllbnRYOnQuY2xpZW50WCxjbGllbnRZOnQuY2xpZW50WX0pLHQsdGhpcy5jdXJyZW50UG9pbnRlcnMuc2xpY2UoKSl9fXN0b3AoKXt0aGlzLmVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLHRoaXMub25Qb2ludGVyU3RhcnQsbCksdGhpcy5lbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0b3VjaHN0YXJ0XCIsdGhpcy5vblRvdWNoU3RhcnQsbCksdGhpcy5lbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0b3VjaG1vdmVcIix0aGlzLm9uTW92ZSxsKSx0aGlzLmVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRvdWNoZW5kXCIsdGhpcy5vblRvdWNoRW5kKSx0aGlzLmVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRvdWNoY2FuY2VsXCIsdGhpcy5vblRvdWNoRW5kKSx3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLHRoaXMub25Nb3ZlKSx3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIix0aGlzLm9uUG9pbnRlckVuZCksd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJibHVyXCIsdGhpcy5vbldpbmRvd0JsdXIpfX1mdW5jdGlvbiBoKHQsZSl7cmV0dXJuIGU/TWF0aC5zcXJ0KE1hdGgucG93KGUuY2xpZW50WC10LmNsaWVudFgsMikrTWF0aC5wb3coZS5jbGllbnRZLXQuY2xpZW50WSwyKSk6MH1mdW5jdGlvbiBkKHQsZSl7cmV0dXJuIGU/e2NsaWVudFg6KHQuY2xpZW50WCtlLmNsaWVudFgpLzIsY2xpZW50WToodC5jbGllbnRZK2UuY2xpZW50WSkvMn06dH1jb25zdCB1PXQ9Plwib2JqZWN0XCI9PXR5cGVvZiB0JiZudWxsIT09dCYmdC5jb25zdHJ1Y3Rvcj09PU9iamVjdCYmXCJbb2JqZWN0IE9iamVjdF1cIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0KSxmPSh0LC4uLmUpPT57Y29uc3QgaT1lLmxlbmd0aDtmb3IobGV0IG49MDtuPGk7bisrKXtjb25zdCBpPWVbbl18fHt9O09iamVjdC5lbnRyaWVzKGkpLmZvckVhY2goKChbZSxpXSk9Pntjb25zdCBuPUFycmF5LmlzQXJyYXkoaSk/W106e307dFtlXXx8T2JqZWN0LmFzc2lnbih0LHtbZV06bn0pLHUoaSk/T2JqZWN0LmFzc2lnbih0W2VdLGYobixpKSk6QXJyYXkuaXNBcnJheShpKT9PYmplY3QuYXNzaWduKHQse1tlXTpbLi4uaV19KTpPYmplY3QuYXNzaWduKHQse1tlXTppfSl9KSl9cmV0dXJuIHR9LHA9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdC5zcGxpdChcIi5cIikucmVkdWNlKCgodCxlKT0+XCJvYmplY3RcIj09dHlwZW9mIHQ/dFtlXTp2b2lkIDApLGUpfTtjbGFzcyBne2NvbnN0cnVjdG9yKHQ9e30pe09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwib3B0aW9uc1wiLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTp0fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJldmVudHNcIix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6bmV3IE1hcH0pLHRoaXMuc2V0T3B0aW9ucyh0KTtmb3IoY29uc3QgdCBvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhPYmplY3QuZ2V0UHJvdG90eXBlT2YodGhpcykpKXQuc3RhcnRzV2l0aChcIm9uXCIpJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiB0aGlzW3RdJiYodGhpc1t0XT10aGlzW3RdLmJpbmQodGhpcykpfXNldE9wdGlvbnModCl7dGhpcy5vcHRpb25zPXQ/Zih7fSx0aGlzLmNvbnN0cnVjdG9yLmRlZmF1bHRzLHQpOnt9O2Zvcihjb25zdFt0LGVdb2YgT2JqZWN0LmVudHJpZXModGhpcy5vcHRpb24oXCJvblwiKXx8e30pKXRoaXMub24odCxlKX1vcHRpb24odCwuLi5lKXtsZXQgaT1wKHQsdGhpcy5vcHRpb25zKTtyZXR1cm4gaSYmXCJmdW5jdGlvblwiPT10eXBlb2YgaSYmKGk9aS5jYWxsKHRoaXMsdGhpcywuLi5lKSksaX1vcHRpb25Gb3IodCxlLGksLi4ubil7bGV0IHM9cChlLHQpO3ZhciBvO1wic3RyaW5nXCIhPXR5cGVvZihvPXMpfHxpc05hTihvKXx8aXNOYU4ocGFyc2VGbG9hdChvKSl8fChzPXBhcnNlRmxvYXQocykpLFwidHJ1ZVwiPT09cyYmKHM9ITApLFwiZmFsc2VcIj09PXMmJihzPSExKSxzJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBzJiYocz1zLmNhbGwodGhpcyx0aGlzLHQsLi4ubikpO2xldCBhPXAoZSx0aGlzLm9wdGlvbnMpO3JldHVybiBhJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBhP3M9YS5jYWxsKHRoaXMsdGhpcyx0LC4uLm4scyk6dm9pZCAwPT09cyYmKHM9YSksdm9pZCAwPT09cz9pOnN9Y24odCl7Y29uc3QgZT10aGlzLm9wdGlvbnMuY2xhc3NlcztyZXR1cm4gZSYmZVt0XXx8XCJcIn1sb2NhbGl6ZSh0LGU9W10pe3Q9U3RyaW5nKHQpLnJlcGxhY2UoL1xce1xceyhcXHcrKS4/KFxcdyspP1xcfVxcfS9nLCgodCxlLGkpPT57bGV0IG49XCJcIjtyZXR1cm4gaT9uPXRoaXMub3B0aW9uKGAke2VbMF0rZS50b0xvd2VyQ2FzZSgpLnN1YnN0cmluZygxKX0ubDEwbi4ke2l9YCk6ZSYmKG49dGhpcy5vcHRpb24oYGwxMG4uJHtlfWApKSxufHwobj10KSxufSkpO2ZvcihsZXQgaT0wO2k8ZS5sZW5ndGg7aSsrKXQ9dC5zcGxpdChlW2ldWzBdKS5qb2luKGVbaV1bMV0pO3JldHVybiB0PXQucmVwbGFjZSgvXFx7XFx7KC4qPylcXH1cXH0vZywoKHQsZSk9PmUpKX1vbih0LGUpe2xldCBpPVtdO1wic3RyaW5nXCI9PXR5cGVvZiB0P2k9dC5zcGxpdChcIiBcIik6QXJyYXkuaXNBcnJheSh0KSYmKGk9dCksdGhpcy5ldmVudHN8fCh0aGlzLmV2ZW50cz1uZXcgTWFwKSxpLmZvckVhY2goKHQ9PntsZXQgaT10aGlzLmV2ZW50cy5nZXQodCk7aXx8KHRoaXMuZXZlbnRzLnNldCh0LFtdKSxpPVtdKSxpLmluY2x1ZGVzKGUpfHxpLnB1c2goZSksdGhpcy5ldmVudHMuc2V0KHQsaSl9KSl9b2ZmKHQsZSl7bGV0IGk9W107XCJzdHJpbmdcIj09dHlwZW9mIHQ/aT10LnNwbGl0KFwiIFwiKTpBcnJheS5pc0FycmF5KHQpJiYoaT10KSxpLmZvckVhY2goKHQ9Pntjb25zdCBpPXRoaXMuZXZlbnRzLmdldCh0KTtpZihBcnJheS5pc0FycmF5KGkpKXtjb25zdCB0PWkuaW5kZXhPZihlKTt0Pi0xJiZpLnNwbGljZSh0LDEpfX0pKX1lbWl0KHQsLi4uZSl7Wy4uLnRoaXMuZXZlbnRzLmdldCh0KXx8W11dLmZvckVhY2goKHQ9PnQodGhpcywuLi5lKSkpLFwiKlwiIT09dCYmdGhpcy5lbWl0KFwiKlwiLHQsLi4uZSl9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eShnLFwidmVyc2lvblwiLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTpcIjUuMC4zMlwifSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGcsXCJkZWZhdWx0c1wiLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTp7fX0pO2NsYXNzIG0gZXh0ZW5kcyBne2NvbnN0cnVjdG9yKHQ9e30pe3N1cGVyKHQpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwicGx1Z2luc1wiLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTp7fX0pfWF0dGFjaFBsdWdpbnModD17fSl7Y29uc3QgZT1uZXcgTWFwO2Zvcihjb25zdFtpLG5db2YgT2JqZWN0LmVudHJpZXModCkpe2NvbnN0IHQ9dGhpcy5vcHRpb24oaSkscz10aGlzLnBsdWdpbnNbaV07c3x8ITE9PT10P3MmJiExPT09dCYmKHMuZGV0YWNoKCksZGVsZXRlIHRoaXMucGx1Z2luc1tpXSk6ZS5zZXQoaSxuZXcgbih0aGlzLHR8fHt9KSl9Zm9yKGNvbnN0W3QsaV1vZiBlKXRoaXMucGx1Z2luc1t0XT1pLGkuYXR0YWNoKCl9ZGV0YWNoUGx1Z2lucyh0KXt0PXR8fE9iamVjdC5rZXlzKHRoaXMucGx1Z2lucyk7Zm9yKGNvbnN0IGUgb2YgdCl7Y29uc3QgdD10aGlzLnBsdWdpbnNbZV07dCYmdC5kZXRhY2goKSxkZWxldGUgdGhpcy5wbHVnaW5zW2VdfXJldHVybiB0aGlzLmVtaXQoXCJkZXRhY2hQbHVnaW5zXCIpLHRoaXN9fXZhciB2OyFmdW5jdGlvbih0KXt0W3QuSW5pdD0wXT1cIkluaXRcIix0W3QuRXJyb3I9MV09XCJFcnJvclwiLHRbdC5SZWFkeT0yXT1cIlJlYWR5XCIsdFt0LlBhbm5pbmc9M109XCJQYW5uaW5nXCIsdFt0Lk1vdXNlbW92ZT00XT1cIk1vdXNlbW92ZVwiLHRbdC5EZXN0cm95PTVdPVwiRGVzdHJveVwifSh2fHwodj17fSkpO2NvbnN0IGI9W1wiYVwiLFwiYlwiLFwiY1wiLFwiZFwiLFwiZVwiLFwiZlwiXSx5PXtQQU5VUDpcIk1vdmUgdXBcIixQQU5ET1dOOlwiTW92ZSBkb3duXCIsUEFOTEVGVDpcIk1vdmUgbGVmdFwiLFBBTlJJR0hUOlwiTW92ZSByaWdodFwiLFpPT01JTjpcIlpvb20gaW5cIixaT09NT1VUOlwiWm9vbSBvdXRcIixUT0dHTEVaT09NOlwiVG9nZ2xlIHpvb20gbGV2ZWxcIixUT0dHTEUxVE8xOlwiVG9nZ2xlIHpvb20gbGV2ZWxcIixJVEVSQVRFWk9PTTpcIlRvZ2dsZSB6b29tIGxldmVsXCIsUk9UQVRFQ0NXOlwiUm90YXRlIGNvdW50ZXJjbG9ja3dpc2VcIixST1RBVEVDVzpcIlJvdGF0ZSBjbG9ja3dpc2VcIixGTElQWDpcIkZsaXAgaG9yaXpvbnRhbGx5XCIsRkxJUFk6XCJGbGlwIHZlcnRpY2FsbHlcIixGSVRYOlwiRml0IGhvcml6b250YWxseVwiLEZJVFk6XCJGaXQgdmVydGljYWxseVwiLFJFU0VUOlwiUmVzZXRcIixUT0dHTEVGUzpcIlRvZ2dsZSBmdWxsc2NyZWVuXCJ9LHc9e2NvbnRlbnQ6bnVsbCx3aWR0aDpcImF1dG9cIixoZWlnaHQ6XCJhdXRvXCIscGFuTW9kZTpcImRyYWdcIix0b3VjaDohMCxkcmFnTWluVGhyZXNob2xkOjMsbG9ja0F4aXM6ITEsbW91c2VNb3ZlRmFjdG9yOjEsbW91c2VNb3ZlRnJpY3Rpb246LjEyLHpvb206ITAscGluY2hUb1pvb206ITAscGFuT25seVpvb21lZDpcImF1dG9cIixtaW5TY2FsZToxLG1heFNjYWxlOjIsZnJpY3Rpb246LjI1LGRyYWdGcmljdGlvbjouMzUsZGVjZWxGcmljdGlvbjouMDUsY2xpY2s6XCJ0b2dnbGVab29tXCIsZGJsQ2xpY2s6ITEsd2hlZWw6XCJ6b29tXCIsd2hlZWxMaW1pdDo3LHNwaW5uZXI6ITAsYm91bmRzOlwiYXV0b1wiLGluZmluaXRlOiExLHJ1YmJlcmJhbmQ6ITAsYm91bmNlOiEwLG1heFZlbG9jaXR5Ojc1LHRyYW5zZm9ybVBhcmVudDohMSxjbGFzc2VzOntjb250ZW50OlwiZi1wYW56b29tX19jb250ZW50XCIsaXNMb2FkaW5nOlwiaXMtbG9hZGluZ1wiLGNhblpvb21JbjpcImNhbi16b29tX2luXCIsY2FuWm9vbU91dDpcImNhbi16b29tX291dFwiLGlzRHJhZ2dhYmxlOlwiaXMtZHJhZ2dhYmxlXCIsaXNEcmFnZ2luZzpcImlzLWRyYWdnaW5nXCIsaW5GdWxsc2NyZWVuOlwiaW4tZnVsbHNjcmVlblwiLGh0bWxIYXNGdWxsc2NyZWVuOlwid2l0aC1wYW56b29tLWluLWZ1bGxzY3JlZW5cIn0sbDEwbjp5fSx4PSc8Y2lyY2xlIGN4PVwiMjVcIiBjeT1cIjI1XCIgcj1cIjIwXCI+PC9jaXJjbGU+JyxFPSc8ZGl2IGNsYXNzPVwiZi1zcGlubmVyXCI+PHN2ZyB2aWV3Qm94PVwiMCAwIDUwIDUwXCI+Jyt4K3grXCI8L3N2Zz48L2Rpdj5cIixTPXQ9PnQmJm51bGwhPT10JiZ0IGluc3RhbmNlb2YgRWxlbWVudCYmXCJub2RlVHlwZVwiaW4gdCxQPSh0LGUpPT57dCYmbyhlKS5mb3JFYWNoKChlPT57dC5jbGFzc0xpc3QucmVtb3ZlKGUpfSkpfSxDPSh0LGUpPT57dCYmbyhlKS5mb3JFYWNoKChlPT57dC5jbGFzc0xpc3QuYWRkKGUpfSkpfSxUPXthOjEsYjowLGM6MCxkOjEsZTowLGY6MH0sTT0xZTUsTz0xZTQsQT1cIm1vdXNlbW92ZVwiLEw9XCJkcmFnXCIsej1cImNvbnRlbnRcIjtsZXQgUj1udWxsLGs9bnVsbDtjbGFzcyBJIGV4dGVuZHMgbXtnZXQgZml0cygpe3JldHVybiB0aGlzLmNvbnRlbnRSZWN0LndpZHRoLXRoaXMuY29udGVudFJlY3QuZml0V2lkdGg8MSYmdGhpcy5jb250ZW50UmVjdC5oZWlnaHQtdGhpcy5jb250ZW50UmVjdC5maXRIZWlnaHQ8MX1nZXQgaXNUb3VjaERldmljZSgpe3JldHVybiBudWxsPT09ayYmKGs9d2luZG93Lm1hdGNoTWVkaWEoXCIoaG92ZXI6IG5vbmUpXCIpLm1hdGNoZXMpLGt9Z2V0IGlzTW9iaWxlKCl7cmV0dXJuIG51bGw9PT1SJiYoUj0vaVBob25lfGlQYWR8aVBvZHxBbmRyb2lkL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSksUn1nZXQgcGFuTW9kZSgpe3JldHVybiB0aGlzLm9wdGlvbnMucGFuTW9kZSE9PUF8fHRoaXMuaXNUb3VjaERldmljZT9MOkF9Z2V0IHBhbk9ubHlab29tZWQoKXtjb25zdCB0PXRoaXMub3B0aW9ucy5wYW5Pbmx5Wm9vbWVkO3JldHVyblwiYXV0b1wiPT09dD90aGlzLmlzVG91Y2hEZXZpY2U6dH1nZXQgaXNJbmZpbml0ZSgpe3JldHVybiB0aGlzLm9wdGlvbihcImluZmluaXRlXCIpfWdldCBhbmdsZSgpe3JldHVybiAxODAqTWF0aC5hdGFuMih0aGlzLmN1cnJlbnQuYix0aGlzLmN1cnJlbnQuYSkvTWF0aC5QSXx8MH1nZXQgdGFyZ2V0QW5nbGUoKXtyZXR1cm4gMTgwKk1hdGguYXRhbjIodGhpcy50YXJnZXQuYix0aGlzLnRhcmdldC5hKS9NYXRoLlBJfHwwfWdldCBzY2FsZSgpe2NvbnN0e2E6dCxiOmV9PXRoaXMuY3VycmVudDtyZXR1cm4gTWF0aC5zcXJ0KHQqdCtlKmUpfHwxfWdldCB0YXJnZXRTY2FsZSgpe2NvbnN0e2E6dCxiOmV9PXRoaXMudGFyZ2V0O3JldHVybiBNYXRoLnNxcnQodCp0K2UqZSl8fDF9Z2V0IG1pblNjYWxlKCl7cmV0dXJuIHRoaXMub3B0aW9uKFwibWluU2NhbGVcIil8fDF9Z2V0IGZ1bGxTY2FsZSgpe2NvbnN0e2NvbnRlbnRSZWN0OnR9PXRoaXM7cmV0dXJuIHQuZnVsbFdpZHRoL3QuZml0V2lkdGh8fDF9Z2V0IG1heFNjYWxlKCl7cmV0dXJuIHRoaXMuZnVsbFNjYWxlKih0aGlzLm9wdGlvbihcIm1heFNjYWxlXCIpfHwxKXx8MX1nZXQgY292ZXJTY2FsZSgpe2NvbnN0e2NvbnRhaW5lclJlY3Q6dCxjb250ZW50UmVjdDplfT10aGlzLGk9TWF0aC5tYXgodC5oZWlnaHQvZS5maXRIZWlnaHQsdC53aWR0aC9lLmZpdFdpZHRoKXx8MTtyZXR1cm4gTWF0aC5taW4odGhpcy5mdWxsU2NhbGUsaSl9Z2V0IGlzU2NhbGluZygpe3JldHVybiBNYXRoLmFicyh0aGlzLnRhcmdldFNjYWxlLXRoaXMuc2NhbGUpPjFlLTUmJiF0aGlzLmlzUmVzdGluZ31nZXQgaXNDb250ZW50TG9hZGluZygpe2NvbnN0IHQ9dGhpcy5jb250ZW50O3JldHVybiEhKHQmJnQgaW5zdGFuY2VvZiBIVE1MSW1hZ2VFbGVtZW50KSYmIXQuY29tcGxldGV9Z2V0IGlzUmVzdGluZygpe2lmKHRoaXMuaXNCb3VuY2luZ1h8fHRoaXMuaXNCb3VuY2luZ1kpcmV0dXJuITE7Zm9yKGNvbnN0IHQgb2YgYil7Y29uc3QgZT1cImVcIj09dHx8XCJmXCI9PT10PzFlLTQ6MWUtNTtpZihNYXRoLmFicyh0aGlzLnRhcmdldFt0XS10aGlzLmN1cnJlbnRbdF0pPmUpcmV0dXJuITF9cmV0dXJuISghdGhpcy5pZ25vcmVCb3VuZHMmJiF0aGlzLmNoZWNrQm91bmRzKCkuaW5Cb3VuZHMpfWNvbnN0cnVjdG9yKHQsZT17fSxpPXt9KXt2YXIgbjtpZihzdXBlcihlKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxcInBvaW50ZXJUcmFja2VyXCIse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOm51bGx9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxcInJlc2l6ZU9ic2VydmVyXCIse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOm51bGx9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxcInVwZGF0ZVRpbWVyXCIse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOm51bGx9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxcImNsaWNrVGltZXJcIix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6bnVsbH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwickFGXCIse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOm51bGx9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxcImlzVGlja2luZ1wiLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTohMX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwiaWdub3JlQm91bmRzXCIse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOiExfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJpc0JvdW5jaW5nWFwiLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTohMX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwiaXNCb3VuY2luZ1lcIix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6ITF9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxcImNsaWNrc1wiLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTowfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJ0cmFja2luZ1BvaW50c1wiLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTpbXX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwicHd0XCIse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOjB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxcImN3ZFwiLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTowfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJwbW1lXCIse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOnZvaWQgMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwiZnJpY3Rpb25cIix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6MH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwic3RhdGVcIix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6di5Jbml0fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJpc0RyYWdnaW5nXCIse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOiExfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJjb250YWluZXJcIix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6dm9pZCAwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJjb250ZW50XCIse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOnZvaWQgMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwic3Bpbm5lclwiLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTpudWxsfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJjb250YWluZXJSZWN0XCIse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOnt3aWR0aDowLGhlaWdodDowLGlubmVyV2lkdGg6MCxpbm5lckhlaWdodDowfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwiY29udGVudFJlY3RcIix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6e3RvcDowLHJpZ2h0OjAsYm90dG9tOjAsbGVmdDowLGZ1bGxXaWR0aDowLGZ1bGxIZWlnaHQ6MCxmaXRXaWR0aDowLGZpdEhlaWdodDowLHdpZHRoOjAsaGVpZ2h0OjB9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJkcmFnU3RhcnRcIix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6e3g6MCx5OjAsdG9wOjAsbGVmdDowLHRpbWU6MH19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxcImRyYWdPZmZzZXRcIix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6e3g6MCx5OjAsdGltZTowfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwiY3VycmVudFwiLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTpPYmplY3QuYXNzaWduKHt9LFQpfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJ0YXJnZXRcIix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6T2JqZWN0LmFzc2lnbih7fSxUKX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwidmVsb2NpdHlcIix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6e2E6MCxiOjAsYzowLGQ6MCxlOjAsZjowfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwibG9ja2VkQXhpc1wiLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTohMX0pLCF0KXRocm93IG5ldyBFcnJvcihcIkNvbnRhaW5lciBFbGVtZW50IE5vdCBGb3VuZFwiKTt0aGlzLmNvbnRhaW5lcj10LHRoaXMuaW5pdENvbnRlbnQoKSx0aGlzLmF0dGFjaFBsdWdpbnMoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LEkuUGx1Z2lucyksaSkpLHRoaXMuZW1pdChcImF0dGFjaFBsdWdpbnNcIiksdGhpcy5lbWl0KFwiaW5pdFwiKTtjb25zdCBvPXRoaXMuY29udGVudDtpZihvLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsdGhpcy5vbkxvYWQpLG8uYWRkRXZlbnRMaXN0ZW5lcihcImVycm9yXCIsdGhpcy5vbkVycm9yKSx0aGlzLmlzQ29udGVudExvYWRpbmcpe2lmKHRoaXMub3B0aW9uKFwic3Bpbm5lclwiKSl7dC5jbGFzc0xpc3QuYWRkKHRoaXMuY24oXCJpc0xvYWRpbmdcIikpO2NvbnN0IGU9cyhFKTshdC5jb250YWlucyhvKXx8by5wYXJlbnRFbGVtZW50IGluc3RhbmNlb2YgSFRNTFBpY3R1cmVFbGVtZW50P3RoaXMuc3Bpbm5lcj10LmFwcGVuZENoaWxkKGUpOnRoaXMuc3Bpbm5lcj0obnVsbD09PShuPW8ucGFyZW50RWxlbWVudCl8fHZvaWQgMD09PW4/dm9pZCAwOm4uaW5zZXJ0QmVmb3JlKGUsbykpfHxudWxsfXRoaXMuZW1pdChcImJlZm9yZUxvYWRcIil9ZWxzZSBxdWV1ZU1pY3JvdGFzaygoKCk9Pnt0aGlzLmVuYWJsZSgpfSkpfWluaXRDb250ZW50KCl7Y29uc3R7Y29udGFpbmVyOnR9PXRoaXMsZT10aGlzLmNuKHopO2xldCBpPXRoaXMub3B0aW9uKHopfHx0LnF1ZXJ5U2VsZWN0b3IoYC4ke2V9YCk7aWYoaXx8KGk9dC5xdWVyeVNlbGVjdG9yKFwiaW1nLHBpY3R1cmVcIil8fHQuZmlyc3RFbGVtZW50Q2hpbGQsaSYmQyhpLGUpKSxpIGluc3RhbmNlb2YgSFRNTFBpY3R1cmVFbGVtZW50JiYoaT1pLnF1ZXJ5U2VsZWN0b3IoXCJpbWdcIikpLCFpKXRocm93IG5ldyBFcnJvcihcIk5vIGNvbnRlbnQgZm91bmRcIik7dGhpcy5jb250ZW50PWl9b25Mb2FkKCl7Y29uc3R7c3Bpbm5lcjp0LGNvbnRhaW5lcjplLHN0YXRlOml9PXRoaXM7dCYmKHQucmVtb3ZlKCksdGhpcy5zcGlubmVyPW51bGwpLHRoaXMub3B0aW9uKFwic3Bpbm5lclwiKSYmZS5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuY24oXCJpc0xvYWRpbmdcIikpLHRoaXMuZW1pdChcImFmdGVyTG9hZFwiKSxpPT09di5Jbml0P3RoaXMuZW5hYmxlKCk6dGhpcy51cGRhdGVNZXRyaWNzKCl9b25FcnJvcigpe3RoaXMuc3RhdGUhPT12LkRlc3Ryb3kmJih0aGlzLnNwaW5uZXImJih0aGlzLnNwaW5uZXIucmVtb3ZlKCksdGhpcy5zcGlubmVyPW51bGwpLHRoaXMuc3RvcCgpLHRoaXMuZGV0YWNoRXZlbnRzKCksdGhpcy5zdGF0ZT12LkVycm9yLHRoaXMuZW1pdChcImVycm9yXCIpKX1hdHRhY2hPYnNlcnZlcigpe3ZhciB0O2NvbnN0IGU9KCk9Pntjb25zdHtjb250YWluZXI6dCxjb250YWluZXJSZWN0OmV9PXRoaXM7cmV0dXJuIE1hdGguYWJzKGUud2lkdGgtdC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aCk+LjF8fE1hdGguYWJzKGUuaGVpZ2h0LXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0KT4uMX07dGhpcy5yZXNpemVPYnNlcnZlcnx8dm9pZCAwPT09d2luZG93LlJlc2l6ZU9ic2VydmVyfHwodGhpcy5yZXNpemVPYnNlcnZlcj1uZXcgUmVzaXplT2JzZXJ2ZXIoKCgpPT57dGhpcy51cGRhdGVUaW1lcnx8KGUoKT8odGhpcy5vblJlc2l6ZSgpLHRoaXMuaXNNb2JpbGUmJih0aGlzLnVwZGF0ZVRpbWVyPXNldFRpbWVvdXQoKCgpPT57ZSgpJiZ0aGlzLm9uUmVzaXplKCksdGhpcy51cGRhdGVUaW1lcj1udWxsfSksNTAwKSkpOnRoaXMudXBkYXRlVGltZXImJihjbGVhclRpbWVvdXQodGhpcy51cGRhdGVUaW1lciksdGhpcy51cGRhdGVUaW1lcj1udWxsKSl9KSkpLG51bGw9PT0odD10aGlzLnJlc2l6ZU9ic2VydmVyKXx8dm9pZCAwPT09dHx8dC5vYnNlcnZlKHRoaXMuY29udGFpbmVyKX1kZXRhY2hPYnNlcnZlcigpe3ZhciB0O251bGw9PT0odD10aGlzLnJlc2l6ZU9ic2VydmVyKXx8dm9pZCAwPT09dHx8dC5kaXNjb25uZWN0KCl9YXR0YWNoRXZlbnRzKCl7Y29uc3R7Y29udGFpbmVyOnR9PXRoaXM7dC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIix0aGlzLm9uQ2xpY2sse3Bhc3NpdmU6ITEsY2FwdHVyZTohMX0pLHQuYWRkRXZlbnRMaXN0ZW5lcihcIndoZWVsXCIsdGhpcy5vbldoZWVsLHtwYXNzaXZlOiExfSksdGhpcy5wb2ludGVyVHJhY2tlcj1uZXcgYyh0LHtzdGFydDp0aGlzLm9uUG9pbnRlckRvd24sbW92ZTp0aGlzLm9uUG9pbnRlck1vdmUsZW5kOnRoaXMub25Qb2ludGVyVXB9KSxkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKEEsdGhpcy5vbk1vdXNlTW92ZSl9ZGV0YWNoRXZlbnRzKCl7dmFyIHQ7Y29uc3R7Y29udGFpbmVyOmV9PXRoaXM7ZS5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIix0aGlzLm9uQ2xpY2sse3Bhc3NpdmU6ITEsY2FwdHVyZTohMX0pLGUucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIndoZWVsXCIsdGhpcy5vbldoZWVsLHtwYXNzaXZlOiExfSksbnVsbD09PSh0PXRoaXMucG9pbnRlclRyYWNrZXIpfHx2b2lkIDA9PT10fHx0LnN0b3AoKSx0aGlzLnBvaW50ZXJUcmFja2VyPW51bGwsZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihBLHRoaXMub25Nb3VzZU1vdmUpLGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsdGhpcy5vbktleWRvd24sITApLHRoaXMuY2xpY2tUaW1lciYmKGNsZWFyVGltZW91dCh0aGlzLmNsaWNrVGltZXIpLHRoaXMuY2xpY2tUaW1lcj1udWxsKSx0aGlzLnVwZGF0ZVRpbWVyJiYoY2xlYXJUaW1lb3V0KHRoaXMudXBkYXRlVGltZXIpLHRoaXMudXBkYXRlVGltZXI9bnVsbCl9YW5pbWF0ZSgpe3RoaXMuc2V0VGFyZ2V0Rm9yY2UoKTtjb25zdCB0PXRoaXMuZnJpY3Rpb24sZT10aGlzLm9wdGlvbihcIm1heFZlbG9jaXR5XCIpO2Zvcihjb25zdCBpIG9mIGIpdD8odGhpcy52ZWxvY2l0eVtpXSo9MS10LGUmJiF0aGlzLmlzU2NhbGluZyYmKHRoaXMudmVsb2NpdHlbaV09TWF0aC5tYXgoTWF0aC5taW4odGhpcy52ZWxvY2l0eVtpXSxlKSwtMSplKSksdGhpcy5jdXJyZW50W2ldKz10aGlzLnZlbG9jaXR5W2ldKTp0aGlzLmN1cnJlbnRbaV09dGhpcy50YXJnZXRbaV07dGhpcy5zZXRUcmFuc2Zvcm0oKSx0aGlzLnNldEVkZ2VGb3JjZSgpLCF0aGlzLmlzUmVzdGluZ3x8dGhpcy5pc0RyYWdnaW5nP3RoaXMuckFGPXJlcXVlc3RBbmltYXRpb25GcmFtZSgoKCk9PnRoaXMuYW5pbWF0ZSgpKSk6dGhpcy5zdG9wKFwiY3VycmVudFwiKX1zZXRUYXJnZXRGb3JjZSgpe2Zvcihjb25zdCB0IG9mIGIpXCJlXCI9PT10JiZ0aGlzLmlzQm91bmNpbmdYfHxcImZcIj09PXQmJnRoaXMuaXNCb3VuY2luZ1l8fCh0aGlzLnZlbG9jaXR5W3RdPSgxLygxLXRoaXMuZnJpY3Rpb24pLTEpKih0aGlzLnRhcmdldFt0XS10aGlzLmN1cnJlbnRbdF0pKX1jaGVja0JvdW5kcyh0PTAsZT0wKXtjb25zdHtjdXJyZW50Oml9PXRoaXMsbj1pLmUrdCxzPWkuZitlLG89dGhpcy5nZXRCb3VuZHMoKSx7eDphLHk6cn09byxsPWEubWluLGM9YS5tYXgsaD1yLm1pbixkPXIubWF4O2xldCB1PTAsZj0wO3JldHVybiBsIT09MS8wJiZuPGw/dT1sLW46YyE9PTEvMCYmbj5jJiYodT1jLW4pLGghPT0xLzAmJnM8aD9mPWgtczpkIT09MS8wJiZzPmQmJihmPWQtcyksTWF0aC5hYnModSk8MWUtNCYmKHU9MCksTWF0aC5hYnMoZik8MWUtNCYmKGY9MCksT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LG8pLHt4RGlmZjp1LHlEaWZmOmYsaW5Cb3VuZHM6IXUmJiFmfSl9Y2xhbXBUYXJnZXRCb3VuZHMoKXtjb25zdHt0YXJnZXQ6dH09dGhpcyx7eDplLHk6aX09dGhpcy5nZXRCb3VuZHMoKTtlLm1pbiE9PTEvMCYmKHQuZT1NYXRoLm1heCh0LmUsZS5taW4pKSxlLm1heCE9PTEvMCYmKHQuZT1NYXRoLm1pbih0LmUsZS5tYXgpKSxpLm1pbiE9PTEvMCYmKHQuZj1NYXRoLm1heCh0LmYsaS5taW4pKSxpLm1heCE9PTEvMCYmKHQuZj1NYXRoLm1pbih0LmYsaS5tYXgpKX1jYWxjdWxhdGVDb250ZW50RGltKHQ9dGhpcy5jdXJyZW50KXtjb25zdHtjb250ZW50OmUsY29udGVudFJlY3Q6aX09dGhpcyx7Zml0V2lkdGg6bixmaXRIZWlnaHQ6cyxmdWxsV2lkdGg6byxmdWxsSGVpZ2h0OmF9PWk7bGV0IHI9byxsPWE7aWYodGhpcy5vcHRpb24oXCJ6b29tXCIpfHwwIT09dGhpcy5hbmdsZSl7Y29uc3QgaT0hKGUgaW5zdGFuY2VvZiBIVE1MSW1hZ2VFbGVtZW50KSYmKFwibm9uZVwiPT09d2luZG93LmdldENvbXB1dGVkU3R5bGUoZSkubWF4V2lkdGh8fFwibm9uZVwiPT09d2luZG93LmdldENvbXB1dGVkU3R5bGUoZSkubWF4SGVpZ2h0KSxjPWk/bzpuLGg9aT9hOnMsZD10aGlzLmdldE1hdHJpeCh0KSx1PW5ldyBET01Qb2ludCgwLDApLm1hdHJpeFRyYW5zZm9ybShkKSxmPW5ldyBET01Qb2ludCgwK2MsMCkubWF0cml4VHJhbnNmb3JtKGQpLHA9bmV3IERPTVBvaW50KDArYywwK2gpLm1hdHJpeFRyYW5zZm9ybShkKSxnPW5ldyBET01Qb2ludCgwLDAraCkubWF0cml4VHJhbnNmb3JtKGQpLG09TWF0aC5hYnMocC54LXUueCksdj1NYXRoLmFicyhwLnktdS55KSxiPU1hdGguYWJzKGcueC1mLngpLHk9TWF0aC5hYnMoZy55LWYueSk7cj1NYXRoLm1heChtLGIpLGw9TWF0aC5tYXgodix5KX1yZXR1cm57Y29udGVudFdpZHRoOnIsY29udGVudEhlaWdodDpsfX1zZXRFZGdlRm9yY2UoKXtpZih0aGlzLmlnbm9yZUJvdW5kc3x8dGhpcy5pc0RyYWdnaW5nfHx0aGlzLnBhbk1vZGU9PT1BfHx0aGlzLnRhcmdldFNjYWxlPHRoaXMuc2NhbGUpcmV0dXJuIHRoaXMuaXNCb3VuY2luZ1g9ITEsdm9pZCh0aGlzLmlzQm91bmNpbmdZPSExKTtjb25zdHt0YXJnZXQ6dH09dGhpcyx7eDplLHk6aSx4RGlmZjpuLHlEaWZmOnN9PXRoaXMuY2hlY2tCb3VuZHMoKTtjb25zdCBvPXRoaXMub3B0aW9uKFwibWF4VmVsb2NpdHlcIik7bGV0IGE9dGhpcy52ZWxvY2l0eS5lLHI9dGhpcy52ZWxvY2l0eS5mOzAhPT1uPyh0aGlzLmlzQm91bmNpbmdYPSEwLG4qYTw9MD9hKz0uMTQqbjooYT0uMTQqbixlLm1pbiE9PTEvMCYmKHRoaXMudGFyZ2V0LmU9TWF0aC5tYXgodC5lLGUubWluKSksZS5tYXghPT0xLzAmJih0aGlzLnRhcmdldC5lPU1hdGgubWluKHQuZSxlLm1heCkpKSxvJiYoYT1NYXRoLm1heChNYXRoLm1pbihhLG8pLC0xKm8pKSk6dGhpcy5pc0JvdW5jaW5nWD0hMSwwIT09cz8odGhpcy5pc0JvdW5jaW5nWT0hMCxzKnI8PTA/cis9LjE0KnM6KHI9LjE0KnMsaS5taW4hPT0xLzAmJih0aGlzLnRhcmdldC5mPU1hdGgubWF4KHQuZixpLm1pbikpLGkubWF4IT09MS8wJiYodGhpcy50YXJnZXQuZj1NYXRoLm1pbih0LmYsaS5tYXgpKSksbyYmKHI9TWF0aC5tYXgoTWF0aC5taW4ocixvKSwtMSpvKSkpOnRoaXMuaXNCb3VuY2luZ1k9ITEsdGhpcy5pc0JvdW5jaW5nWCYmKHRoaXMudmVsb2NpdHkuZT1hKSx0aGlzLmlzQm91bmNpbmdZJiYodGhpcy52ZWxvY2l0eS5mPXIpfWVuYWJsZSgpe2NvbnN0e2NvbnRlbnQ6dH09dGhpcyxlPW5ldyBET01NYXRyaXhSZWFkT25seSh3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0KS50cmFuc2Zvcm0pO2Zvcihjb25zdCB0IG9mIGIpdGhpcy5jdXJyZW50W3RdPXRoaXMudGFyZ2V0W3RdPWVbdF07dGhpcy51cGRhdGVNZXRyaWNzKCksdGhpcy5hdHRhY2hPYnNlcnZlcigpLHRoaXMuYXR0YWNoRXZlbnRzKCksdGhpcy5zdGF0ZT12LlJlYWR5LHRoaXMuZW1pdChcInJlYWR5XCIpfW9uQ2xpY2sodCl7dmFyIGU7XCJjbGlja1wiPT09dC50eXBlJiYwPT09dC5kZXRhaWwmJih0aGlzLmRyYWdPZmZzZXQueD0wLHRoaXMuZHJhZ09mZnNldC55PTApLHRoaXMuaXNEcmFnZ2luZyYmKG51bGw9PT0oZT10aGlzLnBvaW50ZXJUcmFja2VyKXx8dm9pZCAwPT09ZXx8ZS5jbGVhcigpLHRoaXMudHJhY2tpbmdQb2ludHM9W10sdGhpcy5zdGFydERlY2VsQW5pbSgpKTtjb25zdCBpPXQudGFyZ2V0O2lmKCFpfHx0LmRlZmF1bHRQcmV2ZW50ZWQpcmV0dXJuO2lmKGkuaGFzQXR0cmlidXRlKFwiZGlzYWJsZWRcIikpcmV0dXJuIHQucHJldmVudERlZmF1bHQoKSx2b2lkIHQuc3RvcFByb3BhZ2F0aW9uKCk7aWYoKCgpPT57Y29uc3QgdD13aW5kb3cuZ2V0U2VsZWN0aW9uKCk7cmV0dXJuIHQmJlwiUmFuZ2VcIj09PXQudHlwZX0pKCkmJiFpLmNsb3Nlc3QoXCJidXR0b25cIikpcmV0dXJuO2NvbnN0IG49aS5jbG9zZXN0KFwiW2RhdGEtcGFuem9vbS1hY3Rpb25dXCIpLHM9aS5jbG9zZXN0KFwiW2RhdGEtcGFuem9vbS1jaGFuZ2VdXCIpLG89bnx8cyxhPW8mJlMobyk/by5kYXRhc2V0Om51bGw7aWYoYSl7Y29uc3QgZT1hLnBhbnpvb21DaGFuZ2UsaT1hLnBhbnpvb21BY3Rpb247aWYoKGV8fGkpJiZ0LnByZXZlbnREZWZhdWx0KCksZSl7bGV0IHQ9e307dHJ5e3Q9SlNPTi5wYXJzZShlKX1jYXRjaCh0KXtjb25zb2xlJiZjb25zb2xlLndhcm4oXCJUaGUgZ2l2ZW4gZGF0YSB3YXMgbm90IHZhbGlkIEpTT05cIil9cmV0dXJuIHZvaWQgdGhpcy5hcHBseUNoYW5nZSh0KX1pZihpKXJldHVybiB2b2lkKHRoaXNbaV0mJnRoaXNbaV0oKSl9aWYoTWF0aC5hYnModGhpcy5kcmFnT2Zmc2V0LngpPjN8fE1hdGguYWJzKHRoaXMuZHJhZ09mZnNldC55KT4zKXJldHVybiB0LnByZXZlbnREZWZhdWx0KCksdm9pZCB0LnN0b3BQcm9wYWdhdGlvbigpO2lmKGkuY2xvc2VzdChcIltkYXRhLWZhbmN5Ym94XVwiKSlyZXR1cm47Y29uc3Qgcj10aGlzLmNvbnRlbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksbD10aGlzLmRyYWdTdGFydDtpZihsLnRpbWUmJiF0aGlzLmNhblpvb21PdXQoKSYmKE1hdGguYWJzKHIueC1sLngpPjJ8fE1hdGguYWJzKHIueS1sLnkpPjIpKXJldHVybjt0aGlzLmRyYWdTdGFydC50aW1lPTA7Y29uc3QgYz1lPT57dGhpcy5vcHRpb24oXCJ6b29tXCIsdCkmJmUmJlwic3RyaW5nXCI9PXR5cGVvZiBlJiYvKGl0ZXJhdGVab29tKXwodG9nZ2xlKFpvb218RnVsbHxDb3ZlcnxNYXgpfCh6b29tVG8oRml0fENvdmVyfE1heCkpKS8udGVzdChlKSYmXCJmdW5jdGlvblwiPT10eXBlb2YgdGhpc1tlXSYmKHQucHJldmVudERlZmF1bHQoKSx0aGlzW2VdKHtldmVudDp0fSkpfSxoPXRoaXMub3B0aW9uKFwiY2xpY2tcIix0KSxkPXRoaXMub3B0aW9uKFwiZGJsQ2xpY2tcIix0KTtkPyh0aGlzLmNsaWNrcysrLDE9PXRoaXMuY2xpY2tzJiYodGhpcy5jbGlja1RpbWVyPXNldFRpbWVvdXQoKCgpPT57MT09PXRoaXMuY2xpY2tzPyh0aGlzLmVtaXQoXCJjbGlja1wiLHQpLCF0LmRlZmF1bHRQcmV2ZW50ZWQmJmgmJmMoaCkpOih0aGlzLmVtaXQoXCJkYmxDbGlja1wiLHQpLHQuZGVmYXVsdFByZXZlbnRlZHx8YyhkKSksdGhpcy5jbGlja3M9MCx0aGlzLmNsaWNrVGltZXI9bnVsbH0pLDM1MCkpKToodGhpcy5lbWl0KFwiY2xpY2tcIix0KSwhdC5kZWZhdWx0UHJldmVudGVkJiZoJiZjKGgpKX1hZGRUcmFja2luZ1BvaW50KHQpe2NvbnN0IGU9dGhpcy50cmFja2luZ1BvaW50cy5maWx0ZXIoKHQ9PnQudGltZT5EYXRlLm5vdygpLTEwMCkpO2UucHVzaCh0KSx0aGlzLnRyYWNraW5nUG9pbnRzPWV9b25Qb2ludGVyRG93bih0LGUsaSl7dmFyIG47aWYoITE9PT10aGlzLm9wdGlvbihcInRvdWNoXCIsdCkpcmV0dXJuITE7dGhpcy5wd3Q9MCx0aGlzLmRyYWdPZmZzZXQ9e3g6MCx5OjAsdGltZTowfSx0aGlzLnRyYWNraW5nUG9pbnRzPVtdO2NvbnN0IHM9dGhpcy5jb250ZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO2lmKHRoaXMuZHJhZ1N0YXJ0PXt4OnMueCx5OnMueSx0b3A6cy50b3AsbGVmdDpzLmxlZnQsdGltZTpEYXRlLm5vdygpfSx0aGlzLmNsaWNrVGltZXIpcmV0dXJuITE7aWYodGhpcy5wYW5Nb2RlPT09QSYmdGhpcy50YXJnZXRTY2FsZT4xKXJldHVybiB0LnByZXZlbnREZWZhdWx0KCksdC5zdG9wUHJvcGFnYXRpb24oKSwhMTtjb25zdCBvPXQuY29tcG9zZWRQYXRoKClbMF07aWYoIWkubGVuZ3RoKXtpZihbXCJURVhUQVJFQVwiLFwiT1BUSU9OXCIsXCJJTlBVVFwiLFwiU0VMRUNUXCIsXCJWSURFT1wiLFwiSUZSQU1FXCJdLmluY2x1ZGVzKG8ubm9kZU5hbWUpfHxvLmNsb3Nlc3QoXCJbY29udGVudGVkaXRhYmxlXSxbZGF0YS1zZWxlY3RhYmxlXSxbZGF0YS1kcmFnZ2FibGVdLFtkYXRhLWNsaWNrYWJsZV0sW2RhdGEtcGFuem9vbS1jaGFuZ2VdLFtkYXRhLXBhbnpvb20tYWN0aW9uXVwiKSlyZXR1cm4hMTtudWxsPT09KG49d2luZG93LmdldFNlbGVjdGlvbigpKXx8dm9pZCAwPT09bnx8bi5yZW1vdmVBbGxSYW5nZXMoKX1pZihcIm1vdXNlZG93blwiPT09dC50eXBlKVtcIkFcIixcIkJVVFRPTlwiXS5pbmNsdWRlcyhvLm5vZGVOYW1lKXx8dC5wcmV2ZW50RGVmYXVsdCgpO2Vsc2UgaWYoTWF0aC5hYnModGhpcy52ZWxvY2l0eS5hKT4uMylyZXR1cm4hMTtyZXR1cm4gdGhpcy50YXJnZXQuZT10aGlzLmN1cnJlbnQuZSx0aGlzLnRhcmdldC5mPXRoaXMuY3VycmVudC5mLHRoaXMuc3RvcCgpLHRoaXMuaXNEcmFnZ2luZ3x8KHRoaXMuaXNEcmFnZ2luZz0hMCx0aGlzLmFkZFRyYWNraW5nUG9pbnQoZSksdGhpcy5lbWl0KFwidG91Y2hTdGFydFwiLHQpKSwhMH1vblBvaW50ZXJNb3ZlKHQsaSxzKXtpZighMT09PXRoaXMub3B0aW9uKFwidG91Y2hcIix0KSlyZXR1cm47aWYoIXRoaXMuaXNEcmFnZ2luZylyZXR1cm47aWYoaS5sZW5ndGg8MiYmdGhpcy5wYW5Pbmx5Wm9vbWVkJiZlKHRoaXMudGFyZ2V0U2NhbGUpPD1lKHRoaXMubWluU2NhbGUpKXJldHVybjtpZih0aGlzLmVtaXQoXCJ0b3VjaE1vdmVcIix0KSx0LmRlZmF1bHRQcmV2ZW50ZWQpcmV0dXJuO3RoaXMuYWRkVHJhY2tpbmdQb2ludChpWzBdKTtjb25zdHtjb250ZW50Om99PXRoaXMsYT1kKHNbMF0sc1sxXSkscj1kKGlbMF0saVsxXSk7bGV0IGw9MCxjPTA7aWYoaS5sZW5ndGg+MSl7Y29uc3QgdD1vLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO2w9YS5jbGllbnRYLXQubGVmdC0uNSp0LndpZHRoLGM9YS5jbGllbnRZLXQudG9wLS41KnQuaGVpZ2h0fWNvbnN0IHU9aChzWzBdLHNbMV0pLGY9aChpWzBdLGlbMV0pO2xldCBwPXU/Zi91OjEsZz1yLmNsaWVudFgtYS5jbGllbnRYLG09ci5jbGllbnRZLWEuY2xpZW50WTt0aGlzLmRyYWdPZmZzZXQueCs9Zyx0aGlzLmRyYWdPZmZzZXQueSs9bSx0aGlzLmRyYWdPZmZzZXQudGltZT1EYXRlLm5vdygpLXRoaXMuZHJhZ1N0YXJ0LnRpbWU7bGV0IHY9ZSh0aGlzLnRhcmdldFNjYWxlKT09PWUodGhpcy5taW5TY2FsZSkmJnRoaXMub3B0aW9uKFwibG9ja0F4aXNcIik7aWYodiYmIXRoaXMubG9ja2VkQXhpcylpZihcInh5XCI9PT12fHxcInlcIj09PXZ8fFwidG91Y2htb3ZlXCI9PT10LnR5cGUpe2lmKE1hdGguYWJzKHRoaXMuZHJhZ09mZnNldC54KTw2JiZNYXRoLmFicyh0aGlzLmRyYWdPZmZzZXQueSk8NilyZXR1cm4gdm9pZCB0LnByZXZlbnREZWZhdWx0KCk7Y29uc3QgZT1NYXRoLmFicygxODAqTWF0aC5hdGFuMih0aGlzLmRyYWdPZmZzZXQueSx0aGlzLmRyYWdPZmZzZXQueCkvTWF0aC5QSSk7dGhpcy5sb2NrZWRBeGlzPWU+NDUmJmU8MTM1P1wieVwiOlwieFwiLHRoaXMuZHJhZ09mZnNldC54PTAsdGhpcy5kcmFnT2Zmc2V0Lnk9MCxnPTAsbT0wfWVsc2UgdGhpcy5sb2NrZWRBeGlzPXY7aWYobih0LnRhcmdldCx0aGlzLmNvbnRlbnQpJiYodj1cInhcIix0aGlzLmRyYWdPZmZzZXQueT0wKSx2JiZcInh5XCIhPT12JiZ0aGlzLmxvY2tlZEF4aXMhPT12JiZlKHRoaXMudGFyZ2V0U2NhbGUpPT09ZSh0aGlzLm1pblNjYWxlKSlyZXR1cm47dC5jYW5jZWxhYmxlJiZ0LnByZXZlbnREZWZhdWx0KCksdGhpcy5jb250YWluZXIuY2xhc3NMaXN0LmFkZCh0aGlzLmNuKFwiaXNEcmFnZ2luZ1wiKSk7Y29uc3QgYj10aGlzLmNoZWNrQm91bmRzKGcsbSk7dGhpcy5vcHRpb24oXCJydWJiZXJiYW5kXCIpPyhcInhcIiE9PXRoaXMuaXNJbmZpbml0ZSYmKGIueERpZmY+MCYmZzwwfHxiLnhEaWZmPDAmJmc+MCkmJihnKj1NYXRoLm1heCgwLC41LU1hdGguYWJzKC43NS90aGlzLmNvbnRlbnRSZWN0LmZpdFdpZHRoKmIueERpZmYpKSksXCJ5XCIhPT10aGlzLmlzSW5maW5pdGUmJihiLnlEaWZmPjAmJm08MHx8Yi55RGlmZjwwJiZtPjApJiYobSo9TWF0aC5tYXgoMCwuNS1NYXRoLmFicyguNzUvdGhpcy5jb250ZW50UmVjdC5maXRIZWlnaHQqYi55RGlmZikpKSk6KGIueERpZmYmJihnPTApLGIueURpZmYmJihtPTApKTtjb25zdCB5PXRoaXMudGFyZ2V0U2NhbGUsdz10aGlzLm1pblNjYWxlLHg9dGhpcy5tYXhTY2FsZTt5PC41KncmJihwPU1hdGgubWF4KHAsdykpLHk+MS41KngmJihwPU1hdGgubWluKHAseCkpLFwieVwiPT09dGhpcy5sb2NrZWRBeGlzJiZlKHkpPT09ZSh3KSYmKGc9MCksXCJ4XCI9PT10aGlzLmxvY2tlZEF4aXMmJmUoeSk9PT1lKHcpJiYobT0wKSx0aGlzLmFwcGx5Q2hhbmdlKHtvcmlnaW5YOmwsb3JpZ2luWTpjLHBhblg6ZyxwYW5ZOm0sc2NhbGU6cCxmcmljdGlvbjp0aGlzLm9wdGlvbihcImRyYWdGcmljdGlvblwiKSxpZ25vcmVCb3VuZHM6ITB9KX1vblBvaW50ZXJVcCh0LGUsaSl7aWYoaS5sZW5ndGgpcmV0dXJuIHRoaXMuZHJhZ09mZnNldC54PTAsdGhpcy5kcmFnT2Zmc2V0Lnk9MCx2b2lkKHRoaXMudHJhY2tpbmdQb2ludHM9W10pO3RoaXMuY29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5jbihcImlzRHJhZ2dpbmdcIikpLHRoaXMuaXNEcmFnZ2luZyYmKHRoaXMuYWRkVHJhY2tpbmdQb2ludChlKSx0aGlzLnBhbk9ubHlab29tZWQmJnRoaXMuY29udGVudFJlY3Qud2lkdGgtdGhpcy5jb250ZW50UmVjdC5maXRXaWR0aDwxJiZ0aGlzLmNvbnRlbnRSZWN0LmhlaWdodC10aGlzLmNvbnRlbnRSZWN0LmZpdEhlaWdodDwxJiYodGhpcy50cmFja2luZ1BvaW50cz1bXSksbih0LnRhcmdldCx0aGlzLmNvbnRlbnQpJiZcInlcIj09PXRoaXMubG9ja2VkQXhpcyYmKHRoaXMudHJhY2tpbmdQb2ludHM9W10pLHRoaXMuZW1pdChcInRvdWNoRW5kXCIsdCksdGhpcy5pc0RyYWdnaW5nPSExLHRoaXMubG9ja2VkQXhpcz0hMSx0aGlzLnN0YXRlIT09di5EZXN0cm95JiYodC5kZWZhdWx0UHJldmVudGVkfHx0aGlzLnN0YXJ0RGVjZWxBbmltKCkpKX1zdGFydERlY2VsQW5pbSgpe3ZhciB0O2NvbnN0IGk9dGhpcy5pc1NjYWxpbmc7dGhpcy5yQUYmJihjYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLnJBRiksdGhpcy5yQUY9bnVsbCksdGhpcy5pc0JvdW5jaW5nWD0hMSx0aGlzLmlzQm91bmNpbmdZPSExO2Zvcihjb25zdCB0IG9mIGIpdGhpcy52ZWxvY2l0eVt0XT0wO3RoaXMudGFyZ2V0LmU9dGhpcy5jdXJyZW50LmUsdGhpcy50YXJnZXQuZj10aGlzLmN1cnJlbnQuZixQKHRoaXMuY29udGFpbmVyLFwiaXMtc2NhbGluZ1wiKSxQKHRoaXMuY29udGFpbmVyLFwiaXMtYW5pbWF0aW5nXCIpLHRoaXMuaXNUaWNraW5nPSExO2NvbnN0e3RyYWNraW5nUG9pbnRzOm59PXRoaXMscz1uWzBdLG89bltuLmxlbmd0aC0xXTtsZXQgYT0wLHI9MCxsPTA7byYmcyYmKGE9by5jbGllbnRYLXMuY2xpZW50WCxyPW8uY2xpZW50WS1zLmNsaWVudFksbD1vLnRpbWUtcy50aW1lKTtjb25zdCBjPShudWxsPT09KHQ9d2luZG93LnZpc3VhbFZpZXdwb3J0KXx8dm9pZCAwPT09dD92b2lkIDA6dC5zY2FsZSl8fDE7MSE9PWMmJihhKj1jLHIqPWMpO2xldCBoPTAsZD0wLHU9MCxmPTAscD10aGlzLm9wdGlvbihcImRlY2VsRnJpY3Rpb25cIik7Y29uc3QgZz10aGlzLnRhcmdldFNjYWxlO2lmKGw+MCl7dT1NYXRoLmFicyhhKT4zP2EvKGwvMzApOjAsZj1NYXRoLmFicyhyKT4zP3IvKGwvMzApOjA7Y29uc3QgdD10aGlzLm9wdGlvbihcIm1heFZlbG9jaXR5XCIpO3QmJih1PU1hdGgubWF4KE1hdGgubWluKHUsdCksLTEqdCksZj1NYXRoLm1heChNYXRoLm1pbihmLHQpLC0xKnQpKX11JiYoaD11LygxLygxLXApLTEpKSxmJiYoZD1mLygxLygxLXApLTEpKSwoXCJ5XCI9PT10aGlzLm9wdGlvbihcImxvY2tBeGlzXCIpfHxcInh5XCI9PT10aGlzLm9wdGlvbihcImxvY2tBeGlzXCIpJiZcInlcIj09PXRoaXMubG9ja2VkQXhpcyYmZShnKT09PXRoaXMubWluU2NhbGUpJiYoaD11PTApLChcInhcIj09PXRoaXMub3B0aW9uKFwibG9ja0F4aXNcIil8fFwieHlcIj09PXRoaXMub3B0aW9uKFwibG9ja0F4aXNcIikmJlwieFwiPT09dGhpcy5sb2NrZWRBeGlzJiZlKGcpPT09dGhpcy5taW5TY2FsZSkmJihkPWY9MCk7Y29uc3QgbT10aGlzLmRyYWdPZmZzZXQueCx2PXRoaXMuZHJhZ09mZnNldC55LHk9dGhpcy5vcHRpb24oXCJkcmFnTWluVGhyZXNob2xkXCIpfHwwO01hdGguYWJzKG0pPHkmJk1hdGguYWJzKHYpPHkmJihoPWQ9MCx1PWY9MCksKHRoaXMub3B0aW9uKFwiem9vbVwiKSYmKGc8dGhpcy5taW5TY2FsZS0xZS01fHxnPnRoaXMubWF4U2NhbGUrMWUtNSl8fGkmJiFoJiYhZCkmJihwPS4zNSksdGhpcy5hcHBseUNoYW5nZSh7cGFuWDpoLHBhblk6ZCxmcmljdGlvbjpwfSksdGhpcy5lbWl0KFwiZGVjZWxcIix1LGYsbSx2KX1vbldoZWVsKHQpe3ZhciBlPVstdC5kZWx0YVh8fDAsLXQuZGVsdGFZfHwwLC10LmRldGFpbHx8MF0ucmVkdWNlKChmdW5jdGlvbih0LGUpe3JldHVybiBNYXRoLmFicyhlKT5NYXRoLmFicyh0KT9lOnR9KSk7Y29uc3QgaT1NYXRoLm1heCgtMSxNYXRoLm1pbigxLGUpKTtpZih0aGlzLmVtaXQoXCJ3aGVlbFwiLHQsaSksdGhpcy5wYW5Nb2RlPT09QSlyZXR1cm47aWYodC5kZWZhdWx0UHJldmVudGVkKXJldHVybjtjb25zdCBuPXRoaXMub3B0aW9uKFwid2hlZWxcIik7XCJwYW5cIj09PW4/KHQucHJldmVudERlZmF1bHQoKSx0aGlzLnBhbk9ubHlab29tZWQmJiF0aGlzLmNhblpvb21PdXQoKXx8dGhpcy5hcHBseUNoYW5nZSh7cGFuWDoyKi10LmRlbHRhWCxwYW5ZOjIqLXQuZGVsdGFZLGJvdW5jZTohMX0pKTpcInpvb21cIj09PW4mJiExIT09dGhpcy5vcHRpb24oXCJ6b29tXCIpJiZ0aGlzLnpvb21XaXRoV2hlZWwodCl9b25Nb3VzZU1vdmUodCl7dGhpcy5wYW5XaXRoTW91c2UodCl9b25LZXlkb3duKHQpe1wiRXNjYXBlXCI9PT10LmtleSYmdGhpcy50b2dnbGVGUygpfW9uUmVzaXplKCl7dGhpcy51cGRhdGVNZXRyaWNzKCksdGhpcy5jaGVja0JvdW5kcygpLmluQm91bmRzfHx0aGlzLnJlcXVlc3RUaWNrKCl9c2V0VHJhbnNmb3JtKCl7dGhpcy5lbWl0KFwiYmVmb3JlVHJhbnNmb3JtXCIpO2NvbnN0e2N1cnJlbnQ6dCx0YXJnZXQ6aSxjb250ZW50Om4sY29udGVudFJlY3Q6c309dGhpcyxvPU9iamVjdC5hc3NpZ24oe30sVCk7Zm9yKGNvbnN0IG4gb2YgYil7Y29uc3Qgcz1cImVcIj09bnx8XCJmXCI9PT1uP086TTtvW25dPWUodFtuXSxzKSxNYXRoLmFicyhpW25dLXRbbl0pPChcImVcIj09bnx8XCJmXCI9PT1uPy41MTouMDAxKSYmKHRbbl09aVtuXSl9bGV0e2E6YSxiOnIsYzpsLGQ6YyxlOmgsZjpkfT1vLHU9YG1hdHJpeCgke2F9LCAke3J9LCAke2x9LCAke2N9LCAke2h9LCAke2R9KWAsZj1uLnBhcmVudEVsZW1lbnQgaW5zdGFuY2VvZiBIVE1MUGljdHVyZUVsZW1lbnQ/bi5wYXJlbnRFbGVtZW50Om47aWYodGhpcy5vcHRpb24oXCJ0cmFuc2Zvcm1QYXJlbnRcIikmJihmPWYucGFyZW50RWxlbWVudHx8ZiksZi5zdHlsZS50cmFuc2Zvcm09PT11KXJldHVybjtmLnN0eWxlLnRyYW5zZm9ybT11O2NvbnN0e2NvbnRlbnRXaWR0aDpwLGNvbnRlbnRIZWlnaHQ6Z309dGhpcy5jYWxjdWxhdGVDb250ZW50RGltKCk7cy53aWR0aD1wLHMuaGVpZ2h0PWcsdGhpcy5lbWl0KFwiYWZ0ZXJUcmFuc2Zvcm1cIil9dXBkYXRlTWV0cmljcyh0PSExKXt2YXIgaTtpZighdGhpc3x8dGhpcy5zdGF0ZT09PXYuRGVzdHJveSlyZXR1cm47aWYodGhpcy5pc0NvbnRlbnRMb2FkaW5nKXJldHVybjtjb25zdCBuPU1hdGgubWF4KDEsKG51bGw9PT0oaT13aW5kb3cudmlzdWFsVmlld3BvcnQpfHx2b2lkIDA9PT1pP3ZvaWQgMDppLnNjYWxlKXx8MSkse2NvbnRhaW5lcjpzLGNvbnRlbnQ6b309dGhpcyxhPW8gaW5zdGFuY2VvZiBIVE1MSW1hZ2VFbGVtZW50LHI9cy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxsPWdldENvbXB1dGVkU3R5bGUodGhpcy5jb250YWluZXIpO2xldCBjPXIud2lkdGgqbixoPXIuaGVpZ2h0Km47Y29uc3QgZD1wYXJzZUZsb2F0KGwucGFkZGluZ1RvcCkrcGFyc2VGbG9hdChsLnBhZGRpbmdCb3R0b20pLHU9Yy0ocGFyc2VGbG9hdChsLnBhZGRpbmdMZWZ0KStwYXJzZUZsb2F0KGwucGFkZGluZ1JpZ2h0KSksZj1oLWQ7dGhpcy5jb250YWluZXJSZWN0PXt3aWR0aDpjLGhlaWdodDpoLGlubmVyV2lkdGg6dSxpbm5lckhlaWdodDpmfTtsZXQgcD10aGlzLm9wdGlvbihcIndpZHRoXCIpfHxcImF1dG9cIixnPXRoaXMub3B0aW9uKFwiaGVpZ2h0XCIpfHxcImF1dG9cIjtcImF1dG9cIj09PXAmJihwPXBhcnNlRmxvYXQoby5kYXRhc2V0LndpZHRofHxcIlwiKXx8KHQ9PntsZXQgZT0wO3JldHVybiBlPXQgaW5zdGFuY2VvZiBIVE1MSW1hZ2VFbGVtZW50P3QubmF0dXJhbFdpZHRoOnQgaW5zdGFuY2VvZiBTVkdFbGVtZW50P3Qud2lkdGguYmFzZVZhbC52YWx1ZTpNYXRoLm1heCh0Lm9mZnNldFdpZHRoLHQuc2Nyb2xsV2lkdGgpLGV8fDB9KShvKSksXCJhdXRvXCI9PT1nJiYoZz1wYXJzZUZsb2F0KG8uZGF0YXNldC5oZWlnaHR8fFwiXCIpfHwodD0+e2xldCBlPTA7cmV0dXJuIGU9dCBpbnN0YW5jZW9mIEhUTUxJbWFnZUVsZW1lbnQ/dC5uYXR1cmFsSGVpZ2h0OnQgaW5zdGFuY2VvZiBTVkdFbGVtZW50P3QuaGVpZ2h0LmJhc2VWYWwudmFsdWU6TWF0aC5tYXgodC5vZmZzZXRIZWlnaHQsdC5zY3JvbGxIZWlnaHQpLGV8fDB9KShvKSk7bGV0IG09by5wYXJlbnRFbGVtZW50IGluc3RhbmNlb2YgSFRNTFBpY3R1cmVFbGVtZW50P28ucGFyZW50RWxlbWVudDpvO3RoaXMub3B0aW9uKFwidHJhbnNmb3JtUGFyZW50XCIpJiYobT1tLnBhcmVudEVsZW1lbnR8fG0pO2NvbnN0IGI9bS5nZXRBdHRyaWJ1dGUoXCJzdHlsZVwiKXx8XCJcIjttLnN0eWxlLnNldFByb3BlcnR5KFwidHJhbnNmb3JtXCIsXCJub25lXCIsXCJpbXBvcnRhbnRcIiksYSYmKG0uc3R5bGUud2lkdGg9XCJcIixtLnN0eWxlLmhlaWdodD1cIlwiKSxtLm9mZnNldEhlaWdodDtjb25zdCB5PW8uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7bGV0IHc9eS53aWR0aCpuLHg9eS5oZWlnaHQqbixFPTAsUz0wO2EmJihNYXRoLmFicyhwLXcpPjF8fE1hdGguYWJzKGcteCk+MSkmJih7d2lkdGg6dyxoZWlnaHQ6eCx0b3A6RSxsZWZ0OlN9PSgodCxlLGksbik9Pntjb25zdCBzPWkvbjtyZXR1cm4gcz50L2U/KGk9dCxuPXQvcyk6KGk9ZSpzLG49ZSkse3dpZHRoOmksaGVpZ2h0Om4sdG9wOi41KihlLW4pLGxlZnQ6LjUqKHQtaSl9fSkodyx4LHAsZykpLHRoaXMuY29udGVudFJlY3Q9T2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LHRoaXMuY29udGVudFJlY3QpLHt0b3A6eS50b3Atci50b3ArRSxib3R0b206ci5ib3R0b20teS5ib3R0b20rRSxsZWZ0OnkubGVmdC1yLmxlZnQrUyxyaWdodDpyLnJpZ2h0LXkucmlnaHQrUyxmaXRXaWR0aDp3LGZpdEhlaWdodDp4LHdpZHRoOncsaGVpZ2h0OngsZnVsbFdpZHRoOnAsZnVsbEhlaWdodDpnfSksbS5zdHlsZS5jc3NUZXh0PWIsYSYmKG0uc3R5bGUud2lkdGg9YCR7d31weGAsbS5zdHlsZS5oZWlnaHQ9YCR7eH1weGApLHRoaXMuc2V0VHJhbnNmb3JtKCksITAhPT10JiZ0aGlzLmVtaXQoXCJyZWZyZXNoXCIpLHRoaXMuaWdub3JlQm91bmRzfHwoZSh0aGlzLnRhcmdldFNjYWxlKTxlKHRoaXMubWluU2NhbGUpP3RoaXMuem9vbVRvKHRoaXMubWluU2NhbGUse2ZyaWN0aW9uOjB9KTp0aGlzLnRhcmdldFNjYWxlPnRoaXMubWF4U2NhbGU/dGhpcy56b29tVG8odGhpcy5tYXhTY2FsZSx7ZnJpY3Rpb246MH0pOnRoaXMuc3RhdGU9PT12LkluaXR8fHRoaXMuY2hlY2tCb3VuZHMoKS5pbkJvdW5kc3x8dGhpcy5yZXF1ZXN0VGljaygpKSx0aGlzLnVwZGF0ZUNvbnRyb2xzKCl9Y2FsY3VsYXRlQm91bmRzKCl7Y29uc3R7Y29udGVudFdpZHRoOnQsY29udGVudEhlaWdodDppfT10aGlzLmNhbGN1bGF0ZUNvbnRlbnREaW0odGhpcy50YXJnZXQpLHt0YXJnZXRTY2FsZTpuLGxvY2tlZEF4aXM6c309dGhpcyx7Zml0V2lkdGg6byxmaXRIZWlnaHQ6YX09dGhpcy5jb250ZW50UmVjdDtsZXQgcj0wLGw9MCxjPTAsaD0wO2NvbnN0IGQ9dGhpcy5vcHRpb24oXCJpbmZpbml0ZVwiKTtpZighMD09PWR8fHMmJmQ9PT1zKXI9LTEvMCxjPTEvMCxsPS0xLzAsaD0xLzA7ZWxzZXtsZXR7Y29udGFpbmVyUmVjdDpzLGNvbnRlbnRSZWN0OmR9PXRoaXMsdT1lKG8qbixPKSxmPWUoYSpuLE8pLHtpbm5lcldpZHRoOnAsaW5uZXJIZWlnaHQ6Z309cztpZihzLndpZHRoPT09dSYmKHA9cy53aWR0aCkscy53aWR0aD09PWYmJihnPXMuaGVpZ2h0KSx0PnApe2M9LjUqKHQtcCkscj0tMSpjO2xldCBlPS41KihkLnJpZ2h0LWQubGVmdCk7cis9ZSxjKz1lfWlmKG8+cCYmdDxwJiYoci09LjUqKG8tcCksYy09LjUqKG8tcCkpLGk+Zyl7aD0uNSooaS1nKSxsPS0xKmg7bGV0IHQ9LjUqKGQuYm90dG9tLWQudG9wKTtsKz10LGgrPXR9YT5nJiZpPGcmJihyLT0uNSooYS1nKSxjLT0uNSooYS1nKSl9cmV0dXJue3g6e21pbjpyLG1heDpjfSx5OnttaW46bCxtYXg6aH19fWdldEJvdW5kcygpe2NvbnN0IHQ9dGhpcy5vcHRpb24oXCJib3VuZHNcIik7cmV0dXJuXCJhdXRvXCIhPT10P3Q6dGhpcy5jYWxjdWxhdGVCb3VuZHMoKX11cGRhdGVDb250cm9scygpe2NvbnN0IHQ9dGhpcyxpPXQuY29udGFpbmVyLHtwYW5Nb2RlOm4sY29udGVudFJlY3Q6cyxmdWxsU2NhbGU6byx0YXJnZXRTY2FsZTpyLGNvdmVyU2NhbGU6bCxtYXhTY2FsZTpjLG1pblNjYWxlOmh9PXQ7bGV0IGQ9e3RvZ2dsZU1heDpyLWg8LjUqKGMtaCk/YzpoLHRvZ2dsZUNvdmVyOnItaDwuNSoobC1oKT9sOmgsdG9nZ2xlWm9vbTpyLWg8LjUqKG8taCk/bzpofVt0Lm9wdGlvbihcImNsaWNrXCIpfHxcIlwiXXx8aCx1PXQuY2FuWm9vbUluKCksZj10LmNhblpvb21PdXQoKSxwPW49PT1MJiYhIXRoaXMub3B0aW9uKFwidG91Y2hcIiksZz1mJiZwO2lmKHAmJihlKHIpPGUoaCkmJiF0aGlzLnBhbk9ubHlab29tZWQmJihnPSEwKSwoZShzLndpZHRoLDEpPmUocy5maXRXaWR0aCwxKXx8ZShzLmhlaWdodCwxKT5lKHMuZml0SGVpZ2h0LDEpKSYmKGc9ITApKSxlKHMud2lkdGgqciwxKTxlKHMuZml0V2lkdGgsMSkmJihnPSExKSxuPT09QSYmKGc9ITEpLGEoaSx0aGlzLmNuKFwiaXNEcmFnZ2FibGVcIiksZyksIXRoaXMub3B0aW9uKFwiem9vbVwiKSlyZXR1cm47bGV0IG09dSYmZShkKT5lKHIpLHY9IW0mJiFnJiZmJiZlKGQpPGUocik7YShpLHRoaXMuY24oXCJjYW5ab29tSW5cIiksbSksYShpLHRoaXMuY24oXCJjYW5ab29tT3V0XCIpLHYpO2Zvcihjb25zdCB0IG9mIGkucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtcGFuem9vbS1hY3Rpb249XCJ6b29tSW5cIl0nKSl1Pyh0LnJlbW92ZUF0dHJpYnV0ZShcImRpc2FibGVkXCIpLHQucmVtb3ZlQXR0cmlidXRlKFwidGFiaW5kZXhcIikpOih0LnNldEF0dHJpYnV0ZShcImRpc2FibGVkXCIsXCJcIiksdC5zZXRBdHRyaWJ1dGUoXCJ0YWJpbmRleFwiLFwiLTFcIikpO2Zvcihjb25zdCB0IG9mIGkucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtcGFuem9vbS1hY3Rpb249XCJ6b29tT3V0XCJdJykpZj8odC5yZW1vdmVBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKSx0LnJlbW92ZUF0dHJpYnV0ZShcInRhYmluZGV4XCIpKToodC5zZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiLFwiXCIpLHQuc2V0QXR0cmlidXRlKFwidGFiaW5kZXhcIixcIi0xXCIpKTtmb3IoY29uc3QgdCBvZiBpLnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLXBhbnpvb20tYWN0aW9uPVwidG9nZ2xlWm9vbVwiXSxbZGF0YS1wYW56b29tLWFjdGlvbj1cIml0ZXJhdGVab29tXCJdJykpe3V8fGY/KHQucmVtb3ZlQXR0cmlidXRlKFwiZGlzYWJsZWRcIiksdC5yZW1vdmVBdHRyaWJ1dGUoXCJ0YWJpbmRleFwiKSk6KHQuc2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIixcIlwiKSx0LnNldEF0dHJpYnV0ZShcInRhYmluZGV4XCIsXCItMVwiKSk7Y29uc3QgZT10LnF1ZXJ5U2VsZWN0b3IoXCJnXCIpO2UmJihlLnN0eWxlLmRpc3BsYXk9dT9cIlwiOlwibm9uZVwiKX19cGFuVG8oe3g6dD10aGlzLnRhcmdldC5lLHk6ZT10aGlzLnRhcmdldC5mLHNjYWxlOmk9dGhpcy50YXJnZXRTY2FsZSxmcmljdGlvbjpuPXRoaXMub3B0aW9uKFwiZnJpY3Rpb25cIiksYW5nbGU6cz0wLG9yaWdpblg6bz0wLG9yaWdpblk6YT0wLGZsaXBYOnI9ITEsZmxpcFk6bD0hMSxpZ25vcmVCb3VuZHM6Yz0hMX0pe3RoaXMuc3RhdGUhPT12LkRlc3Ryb3kmJnRoaXMuYXBwbHlDaGFuZ2Uoe3Bhblg6dC10aGlzLnRhcmdldC5lLHBhblk6ZS10aGlzLnRhcmdldC5mLHNjYWxlOmkvdGhpcy50YXJnZXRTY2FsZSxhbmdsZTpzLG9yaWdpblg6byxvcmlnaW5ZOmEsZnJpY3Rpb246bixmbGlwWDpyLGZsaXBZOmwsaWdub3JlQm91bmRzOmN9KX1hcHBseUNoYW5nZSh7cGFuWDp0PTAscGFuWTppPTAsc2NhbGU6bj0xLGFuZ2xlOnM9MCxvcmlnaW5YOm89LXRoaXMuY3VycmVudC5lLG9yaWdpblk6YT0tdGhpcy5jdXJyZW50LmYsZnJpY3Rpb246cj10aGlzLm9wdGlvbihcImZyaWN0aW9uXCIpLGZsaXBYOmw9ITEsZmxpcFk6Yz0hMSxpZ25vcmVCb3VuZHM6aD0hMSxib3VuY2U6ZD10aGlzLm9wdGlvbihcImJvdW5jZVwiKX0pe2NvbnN0IHU9dGhpcy5zdGF0ZTtpZih1PT09di5EZXN0cm95KXJldHVybjt0aGlzLnJBRiYmKGNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMuckFGKSx0aGlzLnJBRj1udWxsKSx0aGlzLmZyaWN0aW9uPXJ8fDAsdGhpcy5pZ25vcmVCb3VuZHM9aDtjb25zdHtjdXJyZW50OmZ9PXRoaXMscD1mLmUsZz1mLmYsbT10aGlzLmdldE1hdHJpeCh0aGlzLnRhcmdldCk7bGV0IHk9KG5ldyBET01NYXRyaXgpLnRyYW5zbGF0ZShwLGcpLnRyYW5zbGF0ZShvLGEpLnRyYW5zbGF0ZSh0LGkpO2lmKHRoaXMub3B0aW9uKFwiem9vbVwiKSl7aWYoIWgpe2NvbnN0IHQ9dGhpcy50YXJnZXRTY2FsZSxlPXRoaXMubWluU2NhbGUsaT10aGlzLm1heFNjYWxlO3QqbjxlJiYobj1lL3QpLHQqbj5pJiYobj1pL3QpfXk9eS5zY2FsZShuKX15PXkudHJhbnNsYXRlKC1vLC1hKS50cmFuc2xhdGUoLXAsLWcpLm11bHRpcGx5KG0pLHMmJih5PXkucm90YXRlKHMpKSxsJiYoeT15LnNjYWxlKC0xLDEpKSxjJiYoeT15LnNjYWxlKDEsLTEpKTtmb3IoY29uc3QgdCBvZiBiKVwiZVwiIT09dCYmXCJmXCIhPT10JiYoeVt0XT50aGlzLm1pblNjYWxlKzFlLTV8fHlbdF08dGhpcy5taW5TY2FsZS0xZS01KT90aGlzLnRhcmdldFt0XT15W3RdOnRoaXMudGFyZ2V0W3RdPWUoeVt0XSxPKTsodGhpcy50YXJnZXRTY2FsZTx0aGlzLnNjYWxlfHxNYXRoLmFicyhuLTEpPi4xfHx0aGlzLnBhbk1vZGU9PT1BfHwhMT09PWQpJiYhaCYmdGhpcy5jbGFtcFRhcmdldEJvdW5kcygpLHU9PT12LkluaXQ/dGhpcy5hbmltYXRlKCk6dGhpcy5pc1Jlc3Rpbmd8fCh0aGlzLnN0YXRlPXYuUGFubmluZyx0aGlzLnJlcXVlc3RUaWNrKCkpfXN0b3AodD0hMSl7aWYodGhpcy5zdGF0ZT09PXYuSW5pdHx8dGhpcy5zdGF0ZT09PXYuRGVzdHJveSlyZXR1cm47Y29uc3QgZT10aGlzLmlzVGlja2luZzt0aGlzLnJBRiYmKGNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMuckFGKSx0aGlzLnJBRj1udWxsKSx0aGlzLmlzQm91bmNpbmdYPSExLHRoaXMuaXNCb3VuY2luZ1k9ITE7Zm9yKGNvbnN0IGUgb2YgYil0aGlzLnZlbG9jaXR5W2VdPTAsXCJjdXJyZW50XCI9PT10P3RoaXMuY3VycmVudFtlXT10aGlzLnRhcmdldFtlXTpcInRhcmdldFwiPT09dCYmKHRoaXMudGFyZ2V0W2VdPXRoaXMuY3VycmVudFtlXSk7dGhpcy5zZXRUcmFuc2Zvcm0oKSxQKHRoaXMuY29udGFpbmVyLFwiaXMtc2NhbGluZ1wiKSxQKHRoaXMuY29udGFpbmVyLFwiaXMtYW5pbWF0aW5nXCIpLHRoaXMuaXNUaWNraW5nPSExLHRoaXMuc3RhdGU9di5SZWFkeSxlJiYodGhpcy5lbWl0KFwiZW5kQW5pbWF0aW9uXCIpLHRoaXMudXBkYXRlQ29udHJvbHMoKSl9cmVxdWVzdFRpY2soKXt0aGlzLmlzVGlja2luZ3x8KHRoaXMuZW1pdChcInN0YXJ0QW5pbWF0aW9uXCIpLHRoaXMudXBkYXRlQ29udHJvbHMoKSxDKHRoaXMuY29udGFpbmVyLFwiaXMtYW5pbWF0aW5nXCIpLHRoaXMuaXNTY2FsaW5nJiZDKHRoaXMuY29udGFpbmVyLFwiaXMtc2NhbGluZ1wiKSksdGhpcy5pc1RpY2tpbmc9ITAsdGhpcy5yQUZ8fCh0aGlzLnJBRj1yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCgpPT50aGlzLmFuaW1hdGUoKSkpKX1wYW5XaXRoTW91c2UodCxpPXRoaXMub3B0aW9uKFwibW91c2VNb3ZlRnJpY3Rpb25cIikpe2lmKHRoaXMucG1tZT10LHRoaXMucGFuTW9kZSE9PUF8fCF0KXJldHVybjtpZihlKHRoaXMudGFyZ2V0U2NhbGUpPD1lKHRoaXMubWluU2NhbGUpKXJldHVybjt0aGlzLmVtaXQoXCJtb3VzZU1vdmVcIix0KTtjb25zdHtjb250YWluZXI6bixjb250YWluZXJSZWN0OnMsY29udGVudFJlY3Q6b309dGhpcyxhPXMud2lkdGgscj1zLmhlaWdodCxsPW4uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksYz0odC5jbGllbnRYfHwwKS1sLmxlZnQsaD0odC5jbGllbnRZfHwwKS1sLnRvcDtsZXR7Y29udGVudFdpZHRoOmQsY29udGVudEhlaWdodDp1fT10aGlzLmNhbGN1bGF0ZUNvbnRlbnREaW0odGhpcy50YXJnZXQpO2NvbnN0IGY9dGhpcy5vcHRpb24oXCJtb3VzZU1vdmVGYWN0b3JcIik7Zj4xJiYoZCE9PWEmJihkKj1mKSx1IT09ciYmKHUqPWYpKTtsZXQgcD0uNSooZC1hKS1jL2EqMTAwLzEwMCooZC1hKTtwKz0uNSooby5yaWdodC1vLmxlZnQpO2xldCBnPS41Kih1LXIpLWgvcioxMDAvMTAwKih1LXIpO2crPS41KihvLmJvdHRvbS1vLnRvcCksdGhpcy5hcHBseUNoYW5nZSh7cGFuWDpwLXRoaXMudGFyZ2V0LmUscGFuWTpnLXRoaXMudGFyZ2V0LmYsZnJpY3Rpb246aX0pfXpvb21XaXRoV2hlZWwodCl7aWYodGhpcy5zdGF0ZT09PXYuRGVzdHJveXx8dGhpcy5zdGF0ZT09PXYuSW5pdClyZXR1cm47Y29uc3QgaT1EYXRlLm5vdygpO2lmKGktdGhpcy5wd3Q8NDUpcmV0dXJuIHZvaWQgdC5wcmV2ZW50RGVmYXVsdCgpO3RoaXMucHd0PWk7dmFyIG49Wy10LmRlbHRhWHx8MCwtdC5kZWx0YVl8fDAsLXQuZGV0YWlsfHwwXS5yZWR1Y2UoKGZ1bmN0aW9uKHQsZSl7cmV0dXJuIE1hdGguYWJzKGUpPk1hdGguYWJzKHQpP2U6dH0pKTtjb25zdCBzPU1hdGgubWF4KC0xLE1hdGgubWluKDEsbikpLHt0YXJnZXRTY2FsZTpvLG1heFNjYWxlOmEsbWluU2NhbGU6cn09dGhpcztsZXQgbD1vKigxMDArNDUqcykvMTAwO2UobCk8ZShyKSYmZShvKTw9ZShyKT8odGhpcy5jd2QrPU1hdGguYWJzKHMpLGw9cik6ZShsKT5lKGEpJiZlKG8pPj1lKGEpPyh0aGlzLmN3ZCs9TWF0aC5hYnMocyksbD1hKToodGhpcy5jd2Q9MCxsPU1hdGgubWF4KE1hdGgubWluKGwsYSkscikpLHRoaXMuY3dkPnRoaXMub3B0aW9uKFwid2hlZWxMaW1pdFwiKXx8KHQucHJldmVudERlZmF1bHQoKSxlKGwpIT09ZShvKSYmdGhpcy56b29tVG8obCx7ZXZlbnQ6dH0pKX1jYW5ab29tSW4oKXtyZXR1cm4gdGhpcy5vcHRpb24oXCJ6b29tXCIpJiYoZSh0aGlzLmNvbnRlbnRSZWN0LndpZHRoLDEpPGUodGhpcy5jb250ZW50UmVjdC5maXRXaWR0aCwxKXx8ZSh0aGlzLnRhcmdldFNjYWxlKTxlKHRoaXMubWF4U2NhbGUpKX1jYW5ab29tT3V0KCl7cmV0dXJuIHRoaXMub3B0aW9uKFwiem9vbVwiKSYmZSh0aGlzLnRhcmdldFNjYWxlKT5lKHRoaXMubWluU2NhbGUpfXpvb21Jbih0PTEuMjUsZSl7dGhpcy56b29tVG8odGhpcy50YXJnZXRTY2FsZSp0LGUpfXpvb21PdXQodD0uOCxlKXt0aGlzLnpvb21Ubyh0aGlzLnRhcmdldFNjYWxlKnQsZSl9em9vbVRvRml0KHQpe3RoaXMuem9vbVRvKFwiZml0XCIsdCl9em9vbVRvQ292ZXIodCl7dGhpcy56b29tVG8oXCJjb3ZlclwiLHQpfXpvb21Ub0Z1bGwodCl7dGhpcy56b29tVG8oXCJmdWxsXCIsdCl9em9vbVRvTWF4KHQpe3RoaXMuem9vbVRvKFwibWF4XCIsdCl9dG9nZ2xlWm9vbSh0KXt0aGlzLnpvb21Ubyh0aGlzLnRhcmdldFNjYWxlLXRoaXMubWluU2NhbGU8LjUqKHRoaXMuZnVsbFNjYWxlLXRoaXMubWluU2NhbGUpP1wiZnVsbFwiOlwiZml0XCIsdCl9dG9nZ2xlTWF4KHQpe3RoaXMuem9vbVRvKHRoaXMudGFyZ2V0U2NhbGUtdGhpcy5taW5TY2FsZTwuNSoodGhpcy5tYXhTY2FsZS10aGlzLm1pblNjYWxlKT9cIm1heFwiOlwiZml0XCIsdCl9dG9nZ2xlQ292ZXIodCl7dGhpcy56b29tVG8odGhpcy50YXJnZXRTY2FsZS10aGlzLm1pblNjYWxlPC41Kih0aGlzLmNvdmVyU2NhbGUtdGhpcy5taW5TY2FsZSk/XCJjb3ZlclwiOlwiZml0XCIsdCl9aXRlcmF0ZVpvb20odCl7dGhpcy56b29tVG8oXCJuZXh0XCIsdCl9em9vbVRvKHQ9MSx7ZnJpY3Rpb246ZT1cImF1dG9cIixvcmlnaW5YOmk9XCJhdXRvXCIsb3JpZ2luWTpuPVwiYXV0b1wiLGV2ZW50OnN9PXt9KXtpZih0aGlzLmlzQ29udGVudExvYWRpbmd8fHRoaXMuc3RhdGU9PT12LkRlc3Ryb3kpcmV0dXJuO2NvbnN0e3RhcmdldFNjYWxlOm99PXRoaXM7dGhpcy5zdG9wKCk7bGV0IGE9MTtpZih0aGlzLnBhbk1vZGU9PT1BJiYocz10aGlzLnBtbWV8fHMpLHN8fFwiYXV0b1wiPT09aXx8XCJhdXRvXCI9PT1uKXtjb25zdCB0PXRoaXMuY29udGVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxlPXRoaXMuY29udGFpbmVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLG89cz9zLmNsaWVudFg6ZS5sZWZ0Ky41KmUud2lkdGgsYT1zP3MuY2xpZW50WTplLnRvcCsuNSplLmhlaWdodDtpPW8tdC5sZWZ0LS41KnQud2lkdGgsbj1hLXQudG9wLS41KnQuaGVpZ2h0fWNvbnN0IHI9dGhpcy5mdWxsU2NhbGUsbD10aGlzLm1heFNjYWxlLGM9dGhpcy5jb3ZlclNjYWxlO2lmKFwibnVtYmVyXCI9PXR5cGVvZiB0KWE9dC9vfHwxO2Vsc2UgaWYoXCJmdWxsXCI9PT10KWE9ci9vfHwxO2Vsc2UgaWYoXCJjb3ZlclwiPT09dClhPWMvb3x8MTtlbHNlIGlmKFwibWF4XCI9PT10KWE9bC9vfHwxO2Vsc2UgaWYoXCJmaXRcIj09PXQpYT0xL298fDE7ZWxzZSBpZihcIm5leHRcIj09PXQpe2xldCB0PVsxLHIsbF0uc29ydCgoKHQsZSk9PnQtZSkpLGU9dC5maW5kSW5kZXgoKHQ9PnQ+bysxZS01KSk7YT10W2VdL298fDEvb31lPVwiYXV0b1wiPT09ZT9hPjE/LjE1Oi4yNTplLHRoaXMuYXBwbHlDaGFuZ2Uoe3NjYWxlOmEsb3JpZ2luWDppLG9yaWdpblk6bixmcmljdGlvbjplfSkscyYmdGhpcy5wYW5Nb2RlPT09QSYmdGhpcy5wYW5XaXRoTW91c2UocyxlKX1yb3RhdGVDQ1coKXt0aGlzLmFwcGx5Q2hhbmdlKHthbmdsZTotOTB9KX1yb3RhdGVDVygpe3RoaXMuYXBwbHlDaGFuZ2Uoe2FuZ2xlOjkwfSl9ZmxpcFgoKXt0aGlzLmFwcGx5Q2hhbmdlKHtmbGlwWDohMH0pfWZsaXBZKCl7dGhpcy5hcHBseUNoYW5nZSh7ZmxpcFk6ITB9KX1maXRYKCl7dGhpcy5zdG9wKFwidGFyZ2V0XCIpO2NvbnN0e2NvbnRhaW5lclJlY3Q6dCxjb250ZW50UmVjdDplLHRhcmdldDppfT10aGlzO3RoaXMuYXBwbHlDaGFuZ2Uoe3Bhblg6LjUqdC53aWR0aC0oZS5sZWZ0Ky41KmUuZml0V2lkdGgpLWkuZSxwYW5ZOi41KnQuaGVpZ2h0LShlLnRvcCsuNSplLmZpdEhlaWdodCktaS5mLHNjYWxlOnQud2lkdGgvZS5maXRXaWR0aC90aGlzLnRhcmdldFNjYWxlLG9yaWdpblg6MCxvcmlnaW5ZOjAsaWdub3JlQm91bmRzOiEwfSl9Zml0WSgpe3RoaXMuc3RvcChcInRhcmdldFwiKTtjb25zdHtjb250YWluZXJSZWN0OnQsY29udGVudFJlY3Q6ZSx0YXJnZXQ6aX09dGhpczt0aGlzLmFwcGx5Q2hhbmdlKHtwYW5YOi41KnQud2lkdGgtKGUubGVmdCsuNSplLmZpdFdpZHRoKS1pLmUscGFuWTouNSp0LmlubmVySGVpZ2h0LShlLnRvcCsuNSplLmZpdEhlaWdodCktaS5mLHNjYWxlOnQuaGVpZ2h0L2UuZml0SGVpZ2h0L3RoaXMudGFyZ2V0U2NhbGUsb3JpZ2luWDowLG9yaWdpblk6MCxpZ25vcmVCb3VuZHM6ITB9KX10b2dnbGVGUygpe2NvbnN0e2NvbnRhaW5lcjp0fT10aGlzLGU9dGhpcy5jbihcImluRnVsbHNjcmVlblwiKSxpPXRoaXMuY24oXCJodG1sSGFzRnVsbHNjcmVlblwiKTt0LmNsYXNzTGlzdC50b2dnbGUoZSk7Y29uc3Qgbj10LmNsYXNzTGlzdC5jb250YWlucyhlKTtuPyhkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZChpKSxkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLHRoaXMub25LZXlkb3duLCEwKSk6KGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKGkpLGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsdGhpcy5vbktleWRvd24sITApKSx0aGlzLnVwZGF0ZU1ldHJpY3MoKSx0aGlzLmVtaXQobj9cImVudGVyRlNcIjpcImV4aXRGU1wiKX1nZXRNYXRyaXgodD10aGlzLmN1cnJlbnQpe2NvbnN0e2E6ZSxiOmksYzpuLGQ6cyxlOm8sZjphfT10O3JldHVybiBuZXcgRE9NTWF0cml4KFtlLGksbixzLG8sYV0pfXJlc2V0KHQpe2lmKHRoaXMuc3RhdGUhPT12LkluaXQmJnRoaXMuc3RhdGUhPT12LkRlc3Ryb3kpe3RoaXMuc3RvcChcImN1cnJlbnRcIik7Zm9yKGNvbnN0IHQgb2YgYil0aGlzLnRhcmdldFt0XT1UW3RdO3RoaXMudGFyZ2V0LmE9dGhpcy5taW5TY2FsZSx0aGlzLnRhcmdldC5kPXRoaXMubWluU2NhbGUsdGhpcy5jbGFtcFRhcmdldEJvdW5kcygpLHRoaXMuaXNSZXN0aW5nfHwodGhpcy5mcmljdGlvbj12b2lkIDA9PT10P3RoaXMub3B0aW9uKFwiZnJpY3Rpb25cIik6dCx0aGlzLnN0YXRlPXYuUGFubmluZyx0aGlzLnJlcXVlc3RUaWNrKCkpfX1kZXN0cm95KCl7dGhpcy5zdG9wKCksdGhpcy5zdGF0ZT12LkRlc3Ryb3ksdGhpcy5kZXRhY2hFdmVudHMoKSx0aGlzLmRldGFjaE9ic2VydmVyKCk7Y29uc3R7Y29udGFpbmVyOnQsY29udGVudDplfT10aGlzLGk9dGhpcy5vcHRpb24oXCJjbGFzc2VzXCIpfHx7fTtmb3IoY29uc3QgZSBvZiBPYmplY3QudmFsdWVzKGkpKXQuY2xhc3NMaXN0LnJlbW92ZShlK1wiXCIpO2UmJihlLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsdGhpcy5vbkxvYWQpLGUucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImVycm9yXCIsdGhpcy5vbkVycm9yKSksdGhpcy5kZXRhY2hQbHVnaW5zKCl9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eShJLFwiZGVmYXVsdHNcIix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6d30pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShJLFwiUGx1Z2luc1wiLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTp7fX0pO2NvbnN0IEQ9ZnVuY3Rpb24odCxlKXtsZXQgaT0hMDtyZXR1cm4oLi4ubik9PntpJiYoaT0hMSx0KC4uLm4pLHNldFRpbWVvdXQoKCgpPT57aT0hMH0pLGUpKX19LEY9KHQsZSk9PntsZXQgaT1bXTtyZXR1cm4gdC5jaGlsZE5vZGVzLmZvckVhY2goKHQ9Pnt0Lm5vZGVUeXBlIT09Tm9kZS5FTEVNRU5UX05PREV8fGUmJiF0Lm1hdGNoZXMoZSl8fGkucHVzaCh0KX0pKSxpfSxqPXt2aWV3cG9ydDpudWxsLHRyYWNrOm51bGwsZW5hYmxlZDohMCxzbGlkZXM6W10sYXhpczpcInhcIix0cmFuc2l0aW9uOlwiZmFkZVwiLHByZWxvYWQ6MSxzbGlkZXNQZXJQYWdlOlwiYXV0b1wiLGluaXRpYWxQYWdlOjAsZnJpY3Rpb246LjEyLFBhbnpvb206e2RlY2VsRnJpY3Rpb246LjEyfSxjZW50ZXI6ITAsaW5maW5pdGU6ITAsZmlsbDohMCxkcmFnRnJlZTohMSxhZGFwdGl2ZUhlaWdodDohMSxkaXJlY3Rpb246XCJsdHJcIixjbGFzc2VzOntjb250YWluZXI6XCJmLWNhcm91c2VsXCIsdmlld3BvcnQ6XCJmLWNhcm91c2VsX192aWV3cG9ydFwiLHRyYWNrOlwiZi1jYXJvdXNlbF9fdHJhY2tcIixzbGlkZTpcImYtY2Fyb3VzZWxfX3NsaWRlXCIsaXNMVFI6XCJpcy1sdHJcIixpc1JUTDpcImlzLXJ0bFwiLGlzSG9yaXpvbnRhbDpcImlzLWhvcml6b250YWxcIixpc1ZlcnRpY2FsOlwiaXMtdmVydGljYWxcIixpblRyYW5zaXRpb246XCJpbi10cmFuc2l0aW9uXCIsaXNTZWxlY3RlZDpcImlzLXNlbGVjdGVkXCJ9LGwxMG46e05FWFQ6XCJOZXh0IHNsaWRlXCIsUFJFVjpcIlByZXZpb3VzIHNsaWRlXCIsR09UTzpcIkdvIHRvIHNsaWRlICMlZFwifX07dmFyIEI7IWZ1bmN0aW9uKHQpe3RbdC5Jbml0PTBdPVwiSW5pdFwiLHRbdC5SZWFkeT0xXT1cIlJlYWR5XCIsdFt0LkRlc3Ryb3k9Ml09XCJEZXN0cm95XCJ9KEJ8fChCPXt9KSk7Y29uc3QgSD10PT57aWYoXCJzdHJpbmdcIj09dHlwZW9mIHR8fHQgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCl0PXtodG1sOnR9O2Vsc2V7Y29uc3QgZT10LnRodW1iO3ZvaWQgMCE9PWUmJihcInN0cmluZ1wiPT10eXBlb2YgZSYmKHQudGh1bWJTcmM9ZSksZSBpbnN0YW5jZW9mIEhUTUxJbWFnZUVsZW1lbnQmJih0LnRodW1iRWw9ZSx0LnRodW1iRWxTcmM9ZS5zcmMsdC50aHVtYlNyYz1lLnNyYyksZGVsZXRlIHQudGh1bWIpfXJldHVybiBPYmplY3QuYXNzaWduKHtodG1sOlwiXCIsZWw6bnVsbCxpc0RvbTohMSxjbGFzczpcIlwiLGN1c3RvbUNsYXNzOlwiXCIsaW5kZXg6LTEsZGltOjAsZ2FwOjAscG9zOjAsdHJhbnNpdGlvbjohMX0sdCl9LE49KHQ9e30pPT5PYmplY3QuYXNzaWduKHtpbmRleDotMSxzbGlkZXM6W10sZGltOjAscG9zOi0xfSx0KTtjbGFzcyBfIGV4dGVuZHMgZ3tjb25zdHJ1Y3Rvcih0LGUpe3N1cGVyKGUpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwiaW5zdGFuY2VcIix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6dH0pfWF0dGFjaCgpe31kZXRhY2goKXt9fWNvbnN0ICQ9e2NsYXNzZXM6e2xpc3Q6XCJmLWNhcm91c2VsX19kb3RzXCIsaXNEeW5hbWljOlwiaXMtZHluYW1pY1wiLGhhc0RvdHM6XCJoYXMtZG90c1wiLGRvdDpcImYtY2Fyb3VzZWxfX2RvdFwiLGlzQmVmb3JlUHJldjpcImlzLWJlZm9yZS1wcmV2XCIsaXNQcmV2OlwiaXMtcHJldlwiLGlzQ3VycmVudDpcImlzLWN1cnJlbnRcIixpc05leHQ6XCJpcy1uZXh0XCIsaXNBZnRlck5leHQ6XCJpcy1hZnRlci1uZXh0XCJ9LGRvdFRwbDonPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgZGF0YS1jYXJvdXNlbC1wYWdlPVwiJWlcIiBhcmlhLWxhYmVsPVwie3tHT1RPfX1cIj48c3BhbiBjbGFzcz1cImYtY2Fyb3VzZWxfX2RvdFwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvc3Bhbj48L2J1dHRvbj4nLGR5bmFtaWNGcm9tOjExLG1heENvdW50OjEvMCxtaW5Db3VudDoyfTtjbGFzcyBXIGV4dGVuZHMgX3tjb25zdHJ1Y3Rvcigpe3N1cGVyKC4uLmFyZ3VtZW50cyksT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJpc0R5bmFtaWNcIix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6ITF9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxcImxpc3RcIix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6bnVsbH0pfW9uUmVmcmVzaCgpe3RoaXMucmVmcmVzaCgpfWJ1aWxkKCl7bGV0IHQ9dGhpcy5saXN0O2lmKCF0KXt0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ1bFwiKSxDKHQsdGhpcy5jbihcImxpc3RcIikpLHQuc2V0QXR0cmlidXRlKFwicm9sZVwiLFwidGFibGlzdFwiKTtjb25zdCBlPXRoaXMuaW5zdGFuY2UuY29udGFpbmVyO2UuYXBwZW5kQ2hpbGQodCksQyhlLHRoaXMuY24oXCJoYXNEb3RzXCIpKSx0aGlzLmxpc3Q9dH1yZXR1cm4gdH1yZWZyZXNoKCl7dmFyIHQ7Y29uc3QgZT10aGlzLmluc3RhbmNlLnBhZ2VzLmxlbmd0aCxpPU1hdGgubWluKDIsdGhpcy5vcHRpb24oXCJtaW5Db3VudFwiKSksbj1NYXRoLm1heCgyZTMsdGhpcy5vcHRpb24oXCJtYXhDb3VudFwiKSkscz10aGlzLm9wdGlvbihcImR5bmFtaWNGcm9tXCIpO2lmKGU8aXx8ZT5uKXJldHVybiB2b2lkIHRoaXMuY2xlYW51cCgpO2NvbnN0IG89XCJudW1iZXJcIj09dHlwZW9mIHMmJmU+NSYmZT49cyxyPSF0aGlzLmxpc3R8fHRoaXMuaXNEeW5hbWljIT09b3x8dGhpcy5saXN0LmNoaWxkcmVuLmxlbmd0aCE9PWU7ciYmdGhpcy5jbGVhbnVwKCk7Y29uc3QgbD10aGlzLmJ1aWxkKCk7aWYoYShsLHRoaXMuY24oXCJpc0R5bmFtaWNcIiksISFvKSxyKWZvcihsZXQgdD0wO3Q8ZTt0KyspbC5hcHBlbmQodGhpcy5jcmVhdGVJdGVtKHQpKTtsZXQgYyxoPTA7Zm9yKGNvbnN0IGUgb2ZbLi4ubC5jaGlsZHJlbl0pe2NvbnN0IGk9aD09PXRoaXMuaW5zdGFuY2UucGFnZTtpJiYoYz1lKSxhKGUsdGhpcy5jbihcImlzQ3VycmVudFwiKSxpKSxudWxsPT09KHQ9ZS5jaGlsZHJlblswXSl8fHZvaWQgMD09PXR8fHQuc2V0QXR0cmlidXRlKFwiYXJpYS1zZWxlY3RlZFwiLGk/XCJ0cnVlXCI6XCJmYWxzZVwiKTtmb3IoY29uc3QgdCBvZltcImlzQmVmb3JlUHJldlwiLFwiaXNQcmV2XCIsXCJpc05leHRcIixcImlzQWZ0ZXJOZXh0XCJdKVAoZSx0aGlzLmNuKHQpKTtoKyt9aWYoYz1jfHxsLmZpcnN0Q2hpbGQsbyYmYyl7Y29uc3QgdD1jLnByZXZpb3VzRWxlbWVudFNpYmxpbmcsZT10JiZ0LnByZXZpb3VzRWxlbWVudFNpYmxpbmc7Qyh0LHRoaXMuY24oXCJpc1ByZXZcIikpLEMoZSx0aGlzLmNuKFwiaXNCZWZvcmVQcmV2XCIpKTtjb25zdCBpPWMubmV4dEVsZW1lbnRTaWJsaW5nLG49aSYmaS5uZXh0RWxlbWVudFNpYmxpbmc7QyhpLHRoaXMuY24oXCJpc05leHRcIikpLEMobix0aGlzLmNuKFwiaXNBZnRlck5leHRcIikpfXRoaXMuaXNEeW5hbWljPW99Y3JlYXRlSXRlbSh0PTApe3ZhciBlO2NvbnN0IGk9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxpXCIpO2kuc2V0QXR0cmlidXRlKFwicm9sZVwiLFwicHJlc2VudGF0aW9uXCIpO2NvbnN0IG49cyh0aGlzLmluc3RhbmNlLmxvY2FsaXplKHRoaXMub3B0aW9uKFwiZG90VHBsXCIpLFtbXCIlZFwiLHQrMV1dKS5yZXBsYWNlKC9cXCVpL2csdCtcIlwiKSk7cmV0dXJuIGkuYXBwZW5kQ2hpbGQobiksbnVsbD09PShlPWkuY2hpbGRyZW5bMF0pfHx2b2lkIDA9PT1lfHxlLnNldEF0dHJpYnV0ZShcInJvbGVcIixcInRhYlwiKSxpfWNsZWFudXAoKXt0aGlzLmxpc3QmJih0aGlzLmxpc3QucmVtb3ZlKCksdGhpcy5saXN0PW51bGwpLHRoaXMuaXNEeW5hbWljPSExLFAodGhpcy5pbnN0YW5jZS5jb250YWluZXIsdGhpcy5jbihcImhhc0RvdHNcIikpfWF0dGFjaCgpe3RoaXMuaW5zdGFuY2Uub24oW1wicmVmcmVzaFwiLFwiY2hhbmdlXCJdLHRoaXMub25SZWZyZXNoKX1kZXRhY2goKXt0aGlzLmluc3RhbmNlLm9mZihbXCJyZWZyZXNoXCIsXCJjaGFuZ2VcIl0sdGhpcy5vblJlZnJlc2gpLHRoaXMuY2xlYW51cCgpfX1PYmplY3QuZGVmaW5lUHJvcGVydHkoVyxcImRlZmF1bHRzXCIse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOiR9KTtjb25zdCBYPVwiZGlzYWJsZWRcIixxPVwibmV4dFwiLFk9XCJwcmV2XCI7Y2xhc3MgViBleHRlbmRzIF97Y29uc3RydWN0b3IoKXtzdXBlciguLi5hcmd1bWVudHMpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwiY29udGFpbmVyXCIse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOm51bGx9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxcInByZXZcIix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6bnVsbH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwibmV4dFwiLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTpudWxsfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJpc0RvbVwiLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTohMX0pfW9uUmVmcmVzaCgpe2NvbnN0IHQ9dGhpcy5pbnN0YW5jZSxlPXQucGFnZXMubGVuZ3RoLGk9dC5wYWdlO2lmKGU8MilyZXR1cm4gdm9pZCB0aGlzLmNsZWFudXAoKTt0aGlzLmJ1aWxkKCk7bGV0IG49dGhpcy5wcmV2LHM9dGhpcy5uZXh0O24mJnMmJihuLnJlbW92ZUF0dHJpYnV0ZShYKSxzLnJlbW92ZUF0dHJpYnV0ZShYKSx0LmlzSW5maW5pdGV8fChpPD0wJiZuLnNldEF0dHJpYnV0ZShYLFwiXCIpLGk+PWUtMSYmcy5zZXRBdHRyaWJ1dGUoWCxcIlwiKSkpfWFkZEJ0bih0KXt2YXIgZTtjb25zdCBpPXRoaXMuaW5zdGFuY2Usbj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO24uc2V0QXR0cmlidXRlKFwidGFiaW5kZXhcIixcIjBcIiksbi5zZXRBdHRyaWJ1dGUoXCJ0aXRsZVwiLGkubG9jYWxpemUoYHt7JHt0LnRvVXBwZXJDYXNlKCl9fX1gKSksQyhuLHRoaXMuY24oXCJidXR0b25cIikrXCIgXCIrdGhpcy5jbih0PT09cT9cImlzTmV4dFwiOlwiaXNQcmV2XCIpKTtjb25zdCBzPWkuaXNSVEw/dD09PXE/WTpxOnQ7dmFyIG87cmV0dXJuIG4uaW5uZXJIVE1MPWkubG9jYWxpemUodGhpcy5vcHRpb24oYCR7c31UcGxgKSksbi5kYXRhc2V0W2BjYXJvdXNlbCR7bz10LG8/by5tYXRjaChcIl5bYS16XVwiKT9vLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpK28uc3Vic3RyaW5nKDEpOm86XCJcIn1gXT1cInRydWVcIixudWxsPT09KGU9dGhpcy5jb250YWluZXIpfHx2b2lkIDA9PT1lfHxlLmFwcGVuZENoaWxkKG4pLG59YnVpbGQoKXtjb25zdCB0PXRoaXMuaW5zdGFuY2UuY29udGFpbmVyLGU9dGhpcy5jbihcImNvbnRhaW5lclwiKTtsZXR7Y29udGFpbmVyOmkscHJldjpuLG5leHQ6c309dGhpcztpfHwoaT10LnF1ZXJ5U2VsZWN0b3IoXCIuXCIrZSksdGhpcy5pc0RvbT0hIWkpLGl8fChpPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksQyhpLGUpLHQuYXBwZW5kQ2hpbGQoaSkpLHRoaXMuY29udGFpbmVyPWksc3x8KHM9aS5xdWVyeVNlbGVjdG9yKFwiW2RhdGEtY2Fyb3VzZWwtbmV4dF1cIikpLHN8fChzPXRoaXMuYWRkQnRuKHEpKSx0aGlzLm5leHQ9cyxufHwobj1pLnF1ZXJ5U2VsZWN0b3IoXCJbZGF0YS1jYXJvdXNlbC1wcmV2XVwiKSksbnx8KG49dGhpcy5hZGRCdG4oWSkpLHRoaXMucHJldj1ufWNsZWFudXAoKXt0aGlzLmlzRG9tfHwodGhpcy5wcmV2JiZ0aGlzLnByZXYucmVtb3ZlKCksdGhpcy5uZXh0JiZ0aGlzLm5leHQucmVtb3ZlKCksdGhpcy5jb250YWluZXImJnRoaXMuY29udGFpbmVyLnJlbW92ZSgpKSx0aGlzLnByZXY9bnVsbCx0aGlzLm5leHQ9bnVsbCx0aGlzLmNvbnRhaW5lcj1udWxsLHRoaXMuaXNEb209ITF9YXR0YWNoKCl7dGhpcy5pbnN0YW5jZS5vbihbXCJyZWZyZXNoXCIsXCJjaGFuZ2VcIl0sdGhpcy5vblJlZnJlc2gpfWRldGFjaCgpe3RoaXMuaW5zdGFuY2Uub2ZmKFtcInJlZnJlc2hcIixcImNoYW5nZVwiXSx0aGlzLm9uUmVmcmVzaCksdGhpcy5jbGVhbnVwKCl9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eShWLFwiZGVmYXVsdHNcIix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6e2NsYXNzZXM6e2NvbnRhaW5lcjpcImYtY2Fyb3VzZWxfX25hdlwiLGJ1dHRvbjpcImYtYnV0dG9uXCIsaXNOZXh0OlwiaXMtbmV4dFwiLGlzUHJldjpcImlzLXByZXZcIn0sbmV4dFRwbDonPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgdmlld0JveD1cIjAgMCAyNCAyNFwiIHRhYmluZGV4PVwiLTFcIj48cGF0aCBkPVwiTTkgM2w5IDktOSA5XCIvPjwvc3ZnPicscHJldlRwbDonPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgdmlld0JveD1cIjAgMCAyNCAyNFwiIHRhYmluZGV4PVwiLTFcIj48cGF0aCBkPVwiTTE1IDNsLTkgOSA5IDlcIi8+PC9zdmc+J319KTtjbGFzcyBaIGV4dGVuZHMgX3tjb25zdHJ1Y3Rvcigpe3N1cGVyKC4uLmFyZ3VtZW50cyksT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJzZWxlY3RlZEluZGV4XCIse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOm51bGx9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxcInRhcmdldFwiLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTpudWxsfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJuYXZcIix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6bnVsbH0pfWFkZEFzVGFyZ2V0Rm9yKHQpe3RoaXMudGFyZ2V0PXRoaXMuaW5zdGFuY2UsdGhpcy5uYXY9dCx0aGlzLmF0dGFjaEV2ZW50cygpfWFkZEFzTmF2Rm9yKHQpe3RoaXMubmF2PXRoaXMuaW5zdGFuY2UsdGhpcy50YXJnZXQ9dCx0aGlzLmF0dGFjaEV2ZW50cygpfWF0dGFjaEV2ZW50cygpe2NvbnN0e25hdjp0LHRhcmdldDplfT10aGlzO3QmJmUmJih0Lm9wdGlvbnMuaW5pdGlhbFNsaWRlPWUub3B0aW9ucy5pbml0aWFsUGFnZSx0LnN0YXRlPT09Qi5SZWFkeT90aGlzLm9uTmF2UmVhZHkodCk6dC5vbihcInJlYWR5XCIsdGhpcy5vbk5hdlJlYWR5KSxlLnN0YXRlPT09Qi5SZWFkeT90aGlzLm9uVGFyZ2V0UmVhZHkoZSk6ZS5vbihcInJlYWR5XCIsdGhpcy5vblRhcmdldFJlYWR5KSl9b25OYXZSZWFkeSh0KXt0Lm9uKFwiY3JlYXRlU2xpZGVcIix0aGlzLm9uTmF2Q3JlYXRlU2xpZGUpLHQub24oXCJQYW56b29tLmNsaWNrXCIsdGhpcy5vbk5hdkNsaWNrKSx0Lm9uKFwiUGFuem9vbS50b3VjaEVuZFwiLHRoaXMub25OYXZUb3VjaCksdGhpcy5vblRhcmdldENoYW5nZSgpfW9uVGFyZ2V0UmVhZHkodCl7dC5vbihcImNoYW5nZVwiLHRoaXMub25UYXJnZXRDaGFuZ2UpLHQub24oXCJQYW56b29tLnJlZnJlc2hcIix0aGlzLm9uVGFyZ2V0Q2hhbmdlKSx0aGlzLm9uVGFyZ2V0Q2hhbmdlKCl9b25OYXZDbGljayh0LGUsaSl7dGhpcy5vbk5hdlRvdWNoKHQsdC5wYW56b29tLGkpfW9uTmF2VG91Y2godCxlLGkpe3ZhciBuLHM7aWYoTWF0aC5hYnMoZS5kcmFnT2Zmc2V0LngpPjN8fE1hdGguYWJzKGUuZHJhZ09mZnNldC55KT4zKXJldHVybjtjb25zdCBvPWkudGFyZ2V0LHtuYXY6YSx0YXJnZXQ6cn09dGhpcztpZighYXx8IXJ8fCFvKXJldHVybjtjb25zdCBsPW8uY2xvc2VzdChcIltkYXRhLWluZGV4XVwiKTtpZihpLnN0b3BQcm9wYWdhdGlvbigpLGkucHJldmVudERlZmF1bHQoKSwhbClyZXR1cm47Y29uc3QgYz1wYXJzZUludChsLmRhdGFzZXQuaW5kZXh8fFwiXCIsMTApfHwwLGg9ci5nZXRQYWdlRm9yU2xpZGUoYyksZD1hLmdldFBhZ2VGb3JTbGlkZShjKTthLnNsaWRlVG8oZCksci5zbGlkZVRvKGgse2ZyaWN0aW9uOihudWxsPT09KHM9bnVsbD09PShuPXRoaXMubmF2KXx8dm9pZCAwPT09bj92b2lkIDA6bi5wbHVnaW5zKXx8dm9pZCAwPT09cz92b2lkIDA6cy5TeW5jLm9wdGlvbihcImZyaWN0aW9uXCIpKXx8MH0pLHRoaXMubWFya1NlbGVjdGVkU2xpZGUoYyl9b25OYXZDcmVhdGVTbGlkZSh0LGUpe2UuaW5kZXg9PT10aGlzLnNlbGVjdGVkSW5kZXgmJnRoaXMubWFya1NlbGVjdGVkU2xpZGUoZS5pbmRleCl9b25UYXJnZXRDaGFuZ2UoKXt2YXIgdCxlO2NvbnN0e3RhcmdldDppLG5hdjpufT10aGlzO2lmKCFpfHwhbilyZXR1cm47aWYobi5zdGF0ZSE9PUIuUmVhZHl8fGkuc3RhdGUhPT1CLlJlYWR5KXJldHVybjtjb25zdCBzPW51bGw9PT0oZT1udWxsPT09KHQ9aS5wYWdlc1tpLnBhZ2VdKXx8dm9pZCAwPT09dD92b2lkIDA6dC5zbGlkZXNbMF0pfHx2b2lkIDA9PT1lP3ZvaWQgMDplLmluZGV4LG89bi5nZXRQYWdlRm9yU2xpZGUocyk7dGhpcy5tYXJrU2VsZWN0ZWRTbGlkZShzKSxuLnNsaWRlVG8obyxudWxsPT09bi5wcmV2UGFnZSYmbnVsbD09PWkucHJldlBhZ2U/e2ZyaWN0aW9uOjB9OnZvaWQgMCl9bWFya1NlbGVjdGVkU2xpZGUodCl7Y29uc3QgZT10aGlzLm5hdjtlJiZlLnN0YXRlPT09Qi5SZWFkeSYmKHRoaXMuc2VsZWN0ZWRJbmRleD10LFsuLi5lLnNsaWRlc10ubWFwKChlPT57ZS5lbCYmZS5lbC5jbGFzc0xpc3RbZS5pbmRleD09PXQ/XCJhZGRcIjpcInJlbW92ZVwiXShcImlzLW5hdi1zZWxlY3RlZFwiKX0pKSl9YXR0YWNoKCl7Y29uc3QgdD10aGlzO2xldCBlPXQub3B0aW9ucy50YXJnZXQsaT10Lm9wdGlvbnMubmF2O2U/dC5hZGRBc05hdkZvcihlKTppJiZ0LmFkZEFzVGFyZ2V0Rm9yKGkpfWRldGFjaCgpe2NvbnN0IHQ9dGhpcyxlPXQubmF2LGk9dC50YXJnZXQ7ZSYmKGUub2ZmKFwicmVhZHlcIix0Lm9uTmF2UmVhZHkpLGUub2ZmKFwiY3JlYXRlU2xpZGVcIix0Lm9uTmF2Q3JlYXRlU2xpZGUpLGUub2ZmKFwiUGFuem9vbS5jbGlja1wiLHQub25OYXZDbGljayksZS5vZmYoXCJQYW56b29tLnRvdWNoRW5kXCIsdC5vbk5hdlRvdWNoKSksdC5uYXY9bnVsbCxpJiYoaS5vZmYoXCJyZWFkeVwiLHQub25UYXJnZXRSZWFkeSksaS5vZmYoXCJyZWZyZXNoXCIsdC5vblRhcmdldENoYW5nZSksaS5vZmYoXCJjaGFuZ2VcIix0Lm9uVGFyZ2V0Q2hhbmdlKSksdC50YXJnZXQ9bnVsbH19T2JqZWN0LmRlZmluZVByb3BlcnR5KFosXCJkZWZhdWx0c1wiLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTp7ZnJpY3Rpb246LjM1fX0pO2NvbnN0IFU9e05hdmlnYXRpb246VixEb3RzOlcsU3luYzpafSxHPVwiYW5pbWF0aW9uZW5kXCIsSz1cImlzU2VsZWN0ZWRcIixKPVwic2xpZGVcIjtjbGFzcyBRIGV4dGVuZHMgbXtnZXQgYXhpcygpe3JldHVybiB0aGlzLmlzSG9yaXpvbnRhbD9cImVcIjpcImZcIn1nZXQgaXNFbmFibGVkKCl7cmV0dXJuIHRoaXMuc3RhdGU9PT1CLlJlYWR5fWdldCBpc0luZmluaXRlKCl7bGV0IHQ9ITE7Y29uc3R7Y29udGVudERpbTplLHZpZXdwb3J0RGltOmkscGFnZXM6bixzbGlkZXM6c309dGhpcyxvPXNbMF07cmV0dXJuIG4ubGVuZ3RoPj0yJiZvJiZlK28uZGltPj1pJiYodD10aGlzLm9wdGlvbihcImluZmluaXRlXCIpKSx0fWdldCBpc1JUTCgpe3JldHVyblwicnRsXCI9PT10aGlzLm9wdGlvbihcImRpcmVjdGlvblwiKX1nZXQgaXNIb3Jpem9udGFsKCl7cmV0dXJuXCJ4XCI9PT10aGlzLm9wdGlvbihcImF4aXNcIil9Y29uc3RydWN0b3IodCxlPXt9LGk9e30pe2lmKHN1cGVyKCksT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJicFwiLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTpcIlwifSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJscFwiLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTowfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJ1c2VyT3B0aW9uc1wiLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTp7fX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwidXNlclBsdWdpbnNcIix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6e319KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxcInN0YXRlXCIse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOkIuSW5pdH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwicGFnZVwiLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTowfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJwcmV2UGFnZVwiLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTpudWxsfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJjb250YWluZXJcIix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6dm9pZCAwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJ2aWV3cG9ydFwiLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTpudWxsfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJ0cmFja1wiLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTpudWxsfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJzbGlkZXNcIix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6W119KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxcInBhZ2VzXCIse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOltdfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJwYW56b29tXCIse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOm51bGx9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxcImluVHJhbnNpdGlvblwiLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTpuZXcgU2V0fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJjb250ZW50RGltXCIse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOjB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxcInZpZXdwb3J0RGltXCIse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOjB9KSxcInN0cmluZ1wiPT10eXBlb2YgdCYmKHQ9ZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0KSksIXR8fCFTKHQpKXRocm93IG5ldyBFcnJvcihcIk5vIEVsZW1lbnQgZm91bmRcIik7dGhpcy5jb250YWluZXI9dCx0aGlzLnNsaWRlTmV4dD1EKHRoaXMuc2xpZGVOZXh0LmJpbmQodGhpcyksMTUwKSx0aGlzLnNsaWRlUHJldj1EKHRoaXMuc2xpZGVQcmV2LmJpbmQodGhpcyksMTUwKSx0aGlzLnVzZXJPcHRpb25zPWUsdGhpcy51c2VyUGx1Z2lucz1pLHF1ZXVlTWljcm90YXNrKCgoKT0+e3RoaXMucHJvY2Vzc09wdGlvbnMoKX0pKX1wcm9jZXNzT3B0aW9ucygpe3ZhciB0LGU7Y29uc3QgaT1mKHt9LFEuZGVmYXVsdHMsdGhpcy51c2VyT3B0aW9ucyk7bGV0IG49XCJcIjtjb25zdCBzPWkuYnJlYWtwb2ludHM7aWYocyYmdShzKSlmb3IoY29uc3RbdCxlXW9mIE9iamVjdC5lbnRyaWVzKHMpKXdpbmRvdy5tYXRjaE1lZGlhKHQpLm1hdGNoZXMmJnUoZSkmJihuKz10LGYoaSxlKSk7bj09PXRoaXMuYnAmJnRoaXMuc3RhdGUhPT1CLkluaXR8fCh0aGlzLmJwPW4sdGhpcy5zdGF0ZT09PUIuUmVhZHkmJihpLmluaXRpYWxTbGlkZT0obnVsbD09PShlPW51bGw9PT0odD10aGlzLnBhZ2VzW3RoaXMucGFnZV0pfHx2b2lkIDA9PT10P3ZvaWQgMDp0LnNsaWRlc1swXSl8fHZvaWQgMD09PWU/dm9pZCAwOmUuaW5kZXgpfHwwKSx0aGlzLnN0YXRlIT09Qi5Jbml0JiZ0aGlzLmRlc3Ryb3koKSxzdXBlci5zZXRPcHRpb25zKGkpLCExPT09dGhpcy5vcHRpb24oXCJlbmFibGVkXCIpP3RoaXMuYXR0YWNoRXZlbnRzKCk6c2V0VGltZW91dCgoKCk9Pnt0aGlzLmluaXQoKX0pLDApKX1pbml0KCl7dGhpcy5zdGF0ZT1CLkluaXQsdGhpcy5lbWl0KFwiaW5pdFwiKSx0aGlzLmF0dGFjaFBsdWdpbnMoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LFEuUGx1Z2lucyksdGhpcy51c2VyUGx1Z2lucykpLHRoaXMuZW1pdChcImF0dGFjaFBsdWdpbnNcIiksdGhpcy5pbml0TGF5b3V0KCksdGhpcy5pbml0U2xpZGVzKCksdGhpcy51cGRhdGVNZXRyaWNzKCksdGhpcy5zZXRJbml0aWFsUG9zaXRpb24oKSx0aGlzLmluaXRQYW56b29tKCksdGhpcy5hdHRhY2hFdmVudHMoKSx0aGlzLnN0YXRlPUIuUmVhZHksdGhpcy5lbWl0KFwicmVhZHlcIil9aW5pdExheW91dCgpe2NvbnN0e2NvbnRhaW5lcjp0fT10aGlzLGU9dGhpcy5vcHRpb24oXCJjbGFzc2VzXCIpO0ModCx0aGlzLmNuKFwiY29udGFpbmVyXCIpKSxhKHQsZS5pc0xUUiwhdGhpcy5pc1JUTCksYSh0LGUuaXNSVEwsdGhpcy5pc1JUTCksYSh0LGUuaXNWZXJ0aWNhbCwhdGhpcy5pc0hvcml6b250YWwpLGEodCxlLmlzSG9yaXpvbnRhbCx0aGlzLmlzSG9yaXpvbnRhbCk7bGV0IGk9dGhpcy5vcHRpb24oXCJ2aWV3cG9ydFwiKXx8dC5xdWVyeVNlbGVjdG9yKGAuJHtlLnZpZXdwb3J0fWApO2l8fChpPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksQyhpLGUudmlld3BvcnQpLGkuYXBwZW5kKC4uLkYodCxgLiR7ZS5zbGlkZX1gKSksdC5wcmVwZW5kKGkpKSxpLmFkZEV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIix0aGlzLm9uU2Nyb2xsKTtsZXQgbj10aGlzLm9wdGlvbihcInRyYWNrXCIpfHx0LnF1ZXJ5U2VsZWN0b3IoYC4ke2UudHJhY2t9YCk7bnx8KG49ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSxDKG4sZS50cmFjayksbi5hcHBlbmQoLi4uQXJyYXkuZnJvbShpLmNoaWxkTm9kZXMpKSksbi5zZXRBdHRyaWJ1dGUoXCJhcmlhLWxpdmVcIixcInBvbGl0ZVwiKSxpLmNvbnRhaW5zKG4pfHxpLnByZXBlbmQobiksdGhpcy52aWV3cG9ydD1pLHRoaXMudHJhY2s9bix0aGlzLmVtaXQoXCJpbml0TGF5b3V0XCIpfWluaXRTbGlkZXMoKXtjb25zdHt0cmFjazp0fT10aGlzO2lmKCF0KXJldHVybjtjb25zdCBlPVsuLi50aGlzLnNsaWRlc10saT1bXTtbLi4uRih0LGAuJHt0aGlzLmNuKEopfWApXS5mb3JFYWNoKCh0PT57aWYoUyh0KSl7Y29uc3QgZT1IKHtlbDp0LGlzRG9tOiEwLGluZGV4OnRoaXMuc2xpZGVzLmxlbmd0aH0pO2kucHVzaChlKX19KSk7Zm9yKGxldCB0IG9mWy4uLnRoaXMub3B0aW9uKFwic2xpZGVzXCIsW10pfHxbXSwuLi5lXSlpLnB1c2goSCh0KSk7dGhpcy5zbGlkZXM9aTtmb3IobGV0IHQ9MDt0PHRoaXMuc2xpZGVzLmxlbmd0aDt0KyspdGhpcy5zbGlkZXNbdF0uaW5kZXg9dDtmb3IoY29uc3QgdCBvZiBpKXRoaXMuZW1pdChcImJlZm9yZUluaXRTbGlkZVwiLHQsdC5pbmRleCksdGhpcy5lbWl0KFwiaW5pdFNsaWRlXCIsdCx0LmluZGV4KTt0aGlzLmVtaXQoXCJpbml0U2xpZGVzXCIpfXNldEluaXRpYWxQYWdlKCl7Y29uc3QgdD10aGlzLm9wdGlvbihcImluaXRpYWxTbGlkZVwiKTt0aGlzLnBhZ2U9XCJudW1iZXJcIj09dHlwZW9mIHQ/dGhpcy5nZXRQYWdlRm9yU2xpZGUodCk6cGFyc2VJbnQodGhpcy5vcHRpb24oXCJpbml0aWFsUGFnZVwiLDApK1wiXCIsMTApfHwwfXNldEluaXRpYWxQb3NpdGlvbigpe2NvbnN0e3RyYWNrOnQscGFnZXM6ZSxpc0hvcml6b250YWw6aX09dGhpcztpZighdHx8IWUubGVuZ3RoKXJldHVybjtsZXQgbj10aGlzLnBhZ2U7ZVtuXXx8KHRoaXMucGFnZT1uPTApO2NvbnN0IHM9KGVbbl0ucG9zfHwwKSoodGhpcy5pc1JUTCYmaT8xOi0xKSxvPWk/YCR7c31weGA6XCIwXCIsYT1pP1wiMFwiOmAke3N9cHhgO3Quc3R5bGUudHJhbnNmb3JtPWB0cmFuc2xhdGUzZCgke299LCAke2F9LCAwKSBzY2FsZSgxKWAsdGhpcy5vcHRpb24oXCJhZGFwdGl2ZUhlaWdodFwiKSYmdGhpcy5zZXRWaWV3cG9ydEhlaWdodCgpfWluaXRQYW56b29tKCl7dGhpcy5wYW56b29tJiYodGhpcy5wYW56b29tLmRlc3Ryb3koKSx0aGlzLnBhbnpvb209bnVsbCk7Y29uc3QgdD10aGlzLm9wdGlvbihcIlBhbnpvb21cIil8fHt9O3RoaXMucGFuem9vbT1uZXcgSSh0aGlzLnZpZXdwb3J0LGYoe30se2NvbnRlbnQ6dGhpcy50cmFjayx6b29tOiExLHBhbk9ubHlab29tZWQ6ITEsbG9ja0F4aXM6dGhpcy5pc0hvcml6b250YWw/XCJ4XCI6XCJ5XCIsaW5maW5pdGU6dGhpcy5pc0luZmluaXRlLGNsaWNrOiExLGRibENsaWNrOiExLHRvdWNoOnQ9PiEodGhpcy5wYWdlcy5sZW5ndGg8MiYmIXQub3B0aW9ucy5pbmZpbml0ZSksYm91bmRzOigpPT50aGlzLmdldEJvdW5kcygpLG1heFZlbG9jaXR5OnQ9Pk1hdGguYWJzKHQudGFyZ2V0W3RoaXMuYXhpc10tdC5jdXJyZW50W3RoaXMuYXhpc10pPDIqdGhpcy52aWV3cG9ydERpbT8xMDA6MH0sdCkpLHRoaXMucGFuem9vbS5vbihcIipcIiwoKHQsZSwuLi5pKT0+e3RoaXMuZW1pdChgUGFuem9vbS4ke2V9YCx0LC4uLmkpfSkpLHRoaXMucGFuem9vbS5vbihcImRlY2VsXCIsdGhpcy5vbkRlY2VsKSx0aGlzLnBhbnpvb20ub24oXCJyZWZyZXNoXCIsdGhpcy5vblJlZnJlc2gpLHRoaXMucGFuem9vbS5vbihcImJlZm9yZVRyYW5zZm9ybVwiLHRoaXMub25CZWZvcmVUcmFuc2Zvcm0pLHRoaXMucGFuem9vbS5vbihcImVuZEFuaW1hdGlvblwiLHRoaXMub25FbmRBbmltYXRpb24pfWF0dGFjaEV2ZW50cygpe2NvbnN0IHQ9dGhpcy5jb250YWluZXI7dCYmKHQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsdGhpcy5vbkNsaWNrLHtwYXNzaXZlOiExLGNhcHR1cmU6ITF9KSx0LmFkZEV2ZW50TGlzdGVuZXIoXCJzbGlkZVRvXCIsdGhpcy5vblNsaWRlVG8pKSx3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLHRoaXMub25SZXNpemUpfWNyZWF0ZVBhZ2VzKCl7bGV0IHQ9W107Y29uc3R7Y29udGVudERpbTplLHZpZXdwb3J0RGltOml9PXRoaXM7bGV0IG49dGhpcy5vcHRpb24oXCJzbGlkZXNQZXJQYWdlXCIpO249KFwiYXV0b1wiPT09bnx8ZTw9aSkmJiExIT09dGhpcy5vcHRpb24oXCJmaWxsXCIpPzEvMDpwYXJzZUZsb2F0KG4rXCJcIik7bGV0IHM9MCxvPTAsYT0wO2Zvcihjb25zdCBlIG9mIHRoaXMuc2xpZGVzKSghdC5sZW5ndGh8fG8rZS5kaW0taT4uMDV8fGE+PW4pJiYodC5wdXNoKE4oKSkscz10Lmxlbmd0aC0xLG89MCxhPTApLHRbc10uc2xpZGVzLnB1c2goZSksbys9ZS5kaW0rZS5nYXAsYSsrO3JldHVybiB0fXByb2Nlc3NQYWdlcygpe2NvbnN0IHQ9dGhpcy5wYWdlcyx7Y29udGVudERpbTppLHZpZXdwb3J0RGltOm4saXNJbmZpbml0ZTpzfT10aGlzLG89dGhpcy5vcHRpb24oXCJjZW50ZXJcIiksYT10aGlzLm9wdGlvbihcImZpbGxcIikscj1hJiZvJiZpPm4mJiFzO2lmKHQuZm9yRWFjaCgoKHQsZSk9Pnt2YXIgczt0LmluZGV4PWUsdC5wb3M9KG51bGw9PT0ocz10LnNsaWRlc1swXSl8fHZvaWQgMD09PXM/dm9pZCAwOnMucG9zKXx8MCx0LmRpbT0wO2Zvcihjb25zdFtlLGldb2YgdC5zbGlkZXMuZW50cmllcygpKXQuZGltKz1pLmRpbSxlPHQuc2xpZGVzLmxlbmd0aC0xJiYodC5kaW0rPWkuZ2FwKTtyJiZ0LnBvcysuNSp0LmRpbTwuNSpuP3QucG9zPTA6ciYmdC5wb3MrLjUqdC5kaW0+PWktLjUqbj90LnBvcz1pLW46byYmKHQucG9zKz0tLjUqKG4tdC5kaW0pKX0pKSx0LmZvckVhY2goKHQ9PnthJiYhcyYmaT5uJiYodC5wb3M9TWF0aC5tYXgodC5wb3MsMCksdC5wb3M9TWF0aC5taW4odC5wb3MsaS1uKSksdC5wb3M9ZSh0LnBvcywxZTMpLHQuZGltPWUodC5kaW0sMWUzKSxNYXRoLmFicyh0LnBvcyk8PS4xJiYodC5wb3M9MCl9KSkscylyZXR1cm4gdDtjb25zdCBsPVtdO2xldCBjO3JldHVybiB0LmZvckVhY2goKHQ9Pntjb25zdCBlPU9iamVjdC5hc3NpZ24oe30sdCk7YyYmZS5wb3M9PT1jLnBvcz8oYy5kaW0rPWUuZGltLGMuc2xpZGVzPVsuLi5jLnNsaWRlcywuLi5lLnNsaWRlc10pOihlLmluZGV4PWwubGVuZ3RoLGM9ZSxsLnB1c2goZSkpfSkpLGx9Z2V0UGFnZUZyb21JbmRleCh0PTApe2NvbnN0IGU9dGhpcy5wYWdlcy5sZW5ndGg7bGV0IGk7cmV0dXJuIHQ9cGFyc2VJbnQoKHR8fDApLnRvU3RyaW5nKCkpfHwwLGk9dGhpcy5pc0luZmluaXRlPyh0JWUrZSklZTpNYXRoLm1heChNYXRoLm1pbih0LGUtMSksMCksaX1nZXRTbGlkZU1ldHJpY3ModCl7dmFyIGksbjtjb25zdCBzPXRoaXMuaXNIb3Jpem9udGFsP1wid2lkdGhcIjpcImhlaWdodFwiO2xldCBvPTAsYT0wLHI9dC5lbDtjb25zdCBsPSEoIXJ8fHIucGFyZW50Tm9kZSk7aWYocj9vPXBhcnNlRmxvYXQoci5kYXRhc2V0W3NdfHxcIlwiKXx8MDoocj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLHIuc3R5bGUudmlzaWJpbGl0eT1cImhpZGRlblwiLCh0aGlzLnRyYWNrfHxkb2N1bWVudC5ib2R5KS5wcmVwZW5kKHIpKSxDKHIsdGhpcy5jbihKKStcIiBcIit0LmNsYXNzK1wiIFwiK3QuY3VzdG9tQ2xhc3MpLG8pci5zdHlsZVtzXT1gJHtvfXB4YCxyLnN0eWxlW1wid2lkdGhcIj09PXM/XCJoZWlnaHRcIjpcIndpZHRoXCJdPVwiXCI7ZWxzZXtsJiYodGhpcy50cmFja3x8ZG9jdW1lbnQuYm9keSkucHJlcGVuZChyKSxvPXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClbc10qTWF0aC5tYXgoMSwobnVsbD09PShpPXdpbmRvdy52aXN1YWxWaWV3cG9ydCl8fHZvaWQgMD09PWk/dm9pZCAwOmkuc2NhbGUpfHwxKTtsZXQgdD1yW3RoaXMuaXNIb3Jpem9udGFsP1wib2Zmc2V0V2lkdGhcIjpcIm9mZnNldEhlaWdodFwiXTt0LTE+byYmKG89dCl9Y29uc3QgYz1nZXRDb21wdXRlZFN0eWxlKHIpO3JldHVyblwiY29udGVudC1ib3hcIj09PWMuYm94U2l6aW5nJiYodGhpcy5pc0hvcml6b250YWw/KG8rPXBhcnNlRmxvYXQoYy5wYWRkaW5nTGVmdCl8fDAsbys9cGFyc2VGbG9hdChjLnBhZGRpbmdSaWdodCl8fDApOihvKz1wYXJzZUZsb2F0KGMucGFkZGluZ1RvcCl8fDAsbys9cGFyc2VGbG9hdChjLnBhZGRpbmdCb3R0b20pfHwwKSksYT1wYXJzZUZsb2F0KGNbdGhpcy5pc0hvcml6b250YWw/XCJtYXJnaW5SaWdodFwiOlwibWFyZ2luQm90dG9tXCJdKXx8MCxsP251bGw9PT0obj1yLnBhcmVudEVsZW1lbnQpfHx2b2lkIDA9PT1ufHxuLnJlbW92ZUNoaWxkKHIpOnQuZWx8fHIucmVtb3ZlKCkse2RpbTplKG8sMWUzKSxnYXA6ZShhLDFlMyl9fWdldEJvdW5kcygpe2NvbnN0e2lzSW5maW5pdGU6dCxpc1JUTDplLGlzSG9yaXpvbnRhbDppLHBhZ2VzOm59PXRoaXM7bGV0IHM9e21pbjowLG1heDowfTtpZih0KXM9e21pbjotMS8wLG1heDoxLzB9O2Vsc2UgaWYobi5sZW5ndGgpe2NvbnN0IHQ9blswXS5wb3Msbz1uW24ubGVuZ3RoLTFdLnBvcztzPWUmJmk/e21pbjp0LG1heDpvfTp7bWluOi0xKm8sbWF4Oi0xKnR9fXJldHVybnt4Omk/czp7bWluOjAsbWF4OjB9LHk6aT97bWluOjAsbWF4OjB9OnN9fXJlcG9zaXRpb25TbGlkZXMoKXtsZXQgdCx7aXNIb3Jpem9udGFsOmksaXNSVEw6bixpc0luZmluaXRlOnMsdmlld3BvcnQ6byx2aWV3cG9ydERpbTphLGNvbnRlbnREaW06cixwYWdlOmwscGFnZXM6YyxzbGlkZXM6aCxwYW56b29tOmR9PXRoaXMsdT0wLGY9MCxwPTAsZz0wO2Q/Zz0tMSpkLmN1cnJlbnRbdGhpcy5heGlzXTpjW2xdJiYoZz1jW2xdLnBvc3x8MCksdD1pP24/XCJyaWdodFwiOlwibGVmdFwiOlwidG9wXCIsbiYmaSYmKGcqPS0xKTtmb3IoY29uc3QgaSBvZiBoKXtjb25zdCBuPWkuZWw7bj8oXCJ0b3BcIj09PXQ/KG4uc3R5bGUucmlnaHQ9XCJcIixuLnN0eWxlLmxlZnQ9XCJcIik6bi5zdHlsZS50b3A9XCJcIixpLmluZGV4IT09dT9uLnN0eWxlW3RdPTA9PT1mP1wiXCI6YCR7ZShmLDFlMyl9cHhgOm4uc3R5bGVbdF09XCJcIixwKz1pLmRpbStpLmdhcCx1KyspOmYrPWkuZGltK2kuZ2FwfWlmKHMmJnAmJm8pe2xldCBuPWdldENvbXB1dGVkU3R5bGUobykscz1cInBhZGRpbmdcIixsPWk/XCJSaWdodFwiOlwiQm90dG9tXCIsYz1wYXJzZUZsb2F0KG5bcysoaT9cIkxlZnRcIjpcIlRvcFwiKV0pO2ctPWMsYSs9YyxhKz1wYXJzZUZsb2F0KG5bcytsXSk7Zm9yKGNvbnN0IGkgb2YgaClpLmVsJiYoZShpLnBvcyk8ZShhKSYmZShpLnBvcytpLmRpbStpLmdhcCk8ZShnKSYmZShnKT5lKHItYSkmJihpLmVsLnN0eWxlW3RdPWAke2UoZitwLDFlMyl9cHhgKSxlKGkucG9zK2kuZ2FwKT49ZShyLWEpJiZlKGkucG9zKT5lKGcrYSkmJmUoZyk8ZShhKSYmKGkuZWwuc3R5bGVbdF09YC0ke2UocCwxZTMpfXB4YCkpfWxldCBtLHYsYj1bLi4udGhpcy5pblRyYW5zaXRpb25dO2lmKGIubGVuZ3RoPjEmJihtPWNbYlswXV0sdj1jW2JbMV1dKSxtJiZ2KXtsZXQgaT0wO2Zvcihjb25zdCBuIG9mIGgpbi5lbD90aGlzLmluVHJhbnNpdGlvbi5oYXMobi5pbmRleCkmJm0uc2xpZGVzLmluZGV4T2Yobik8MCYmKG4uZWwuc3R5bGVbdF09YCR7ZShpKyhtLnBvcy12LnBvcyksMWUzKX1weGApOmkrPW4uZGltK24uZ2FwfX1jcmVhdGVTbGlkZUVsKHQpe2NvbnN0e3RyYWNrOmUsc2xpZGVzOml9PXRoaXM7aWYoIWV8fCF0KXJldHVybjtpZih0LmVsJiZ0LmVsLnBhcmVudE5vZGUpcmV0dXJuO2NvbnN0IG49dC5lbHx8ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtDKG4sdGhpcy5jbihKKSksQyhuLHQuY2xhc3MpLEMobix0LmN1c3RvbUNsYXNzKTtjb25zdCBzPXQuaHRtbDtzJiYocyBpbnN0YW5jZW9mIEhUTUxFbGVtZW50P24uYXBwZW5kQ2hpbGQocyk6bi5pbm5lckhUTUw9dC5odG1sK1wiXCIpO2NvbnN0IG89W107aS5mb3JFYWNoKCgodCxlKT0+e3QuZWwmJm8ucHVzaChlKX0pKTtjb25zdCBhPXQuaW5kZXg7bGV0IHI9bnVsbDtpZihvLmxlbmd0aCl7cj1pW28ucmVkdWNlKCgodCxlKT0+TWF0aC5hYnMoZS1hKTxNYXRoLmFicyh0LWEpP2U6dCkpXX1jb25zdCBsPXImJnIuZWwmJnIuZWwucGFyZW50Tm9kZT9yLmluZGV4PHQuaW5kZXg/ci5lbC5uZXh0U2libGluZzpyLmVsOm51bGw7ZS5pbnNlcnRCZWZvcmUobixlLmNvbnRhaW5zKGwpP2w6bnVsbCksdC5lbD1uLHRoaXMuZW1pdChcImNyZWF0ZVNsaWRlXCIsdCl9cmVtb3ZlU2xpZGVFbCh0LGU9ITEpe2NvbnN0IGk9bnVsbD09dD92b2lkIDA6dC5lbDtpZighaXx8IWkucGFyZW50Tm9kZSlyZXR1cm47Y29uc3Qgbj10aGlzLmNuKEspO2lmKGkuY2xhc3NMaXN0LmNvbnRhaW5zKG4pJiYoUChpLG4pLHRoaXMuZW1pdChcInVuc2VsZWN0U2xpZGVcIix0KSksdC5pc0RvbSYmIWUpcmV0dXJuIGkucmVtb3ZlQXR0cmlidXRlKFwiYXJpYS1oaWRkZW5cIiksaS5yZW1vdmVBdHRyaWJ1dGUoXCJkYXRhLWluZGV4XCIpLHZvaWQoaS5zdHlsZS5sZWZ0PVwiXCIpO3RoaXMuZW1pdChcInJlbW92ZVNsaWRlXCIsdCk7Y29uc3Qgcz1uZXcgQ3VzdG9tRXZlbnQoRyk7aS5kaXNwYXRjaEV2ZW50KHMpLHQuZWwmJih0LmVsLnJlbW92ZSgpLHQuZWw9bnVsbCl9dHJhbnNpdGlvblRvKHQ9MCxlPXRoaXMub3B0aW9uKFwidHJhbnNpdGlvblwiKSl7dmFyIGksbixzLG87aWYoIWUpcmV0dXJuITE7Y29uc3QgYT10aGlzLnBhZ2Use3BhZ2VzOnIscGFuem9vbTpsfT10aGlzO3Q9cGFyc2VJbnQoKHR8fDApLnRvU3RyaW5nKCkpfHwwO2NvbnN0IGM9dGhpcy5nZXRQYWdlRnJvbUluZGV4KHQpO2lmKCFsfHwhcltjXXx8ci5sZW5ndGg8Mnx8TWF0aC5hYnMoKChudWxsPT09KG49bnVsbD09PShpPXJbYV0pfHx2b2lkIDA9PT1pP3ZvaWQgMDppLnNsaWRlc1swXSl8fHZvaWQgMD09PW4/dm9pZCAwOm4uZGltKXx8MCktdGhpcy52aWV3cG9ydERpbSk+MSlyZXR1cm4hMTtjb25zdCBoPXQ+YT8xOi0xLGQ9cltjXS5wb3MqKHRoaXMuaXNSVEw/MTotMSk7aWYoYT09PWMmJk1hdGguYWJzKGQtbC50YXJnZXRbdGhpcy5heGlzXSk8MSlyZXR1cm4hMTt0aGlzLmNsZWFyVHJhbnNpdGlvbnMoKTtjb25zdCB1PWwuaXNSZXN0aW5nO0ModGhpcy5jb250YWluZXIsdGhpcy5jbihcImluVHJhbnNpdGlvblwiKSk7Y29uc3QgZj0obnVsbD09PShzPXJbYV0pfHx2b2lkIDA9PT1zP3ZvaWQgMDpzLnNsaWRlc1swXSl8fG51bGwscD0obnVsbD09PShvPXJbY10pfHx2b2lkIDA9PT1vP3ZvaWQgMDpvLnNsaWRlc1swXSl8fG51bGw7dGhpcy5pblRyYW5zaXRpb24uYWRkKHAuaW5kZXgpLHRoaXMuY3JlYXRlU2xpZGVFbChwKTtsZXQgZz1mLmVsLG09cC5lbDt1fHxlPT09Snx8KGU9XCJmYWRlRmFzdFwiLGc9bnVsbCk7Y29uc3Qgdj10aGlzLmlzUlRMP1wibmV4dFwiOlwicHJldlwiLGI9dGhpcy5pc1JUTD9cInByZXZcIjpcIm5leHRcIjtyZXR1cm4gZyYmKHRoaXMuaW5UcmFuc2l0aW9uLmFkZChmLmluZGV4KSxmLnRyYW5zaXRpb249ZSxnLmFkZEV2ZW50TGlzdGVuZXIoRyx0aGlzLm9uQW5pbWF0aW9uRW5kKSxnLmNsYXNzTGlzdC5hZGQoYGYtJHtlfU91dGAsYHRvLSR7aD4wP2I6dn1gKSksbSYmKHAudHJhbnNpdGlvbj1lLG0uYWRkRXZlbnRMaXN0ZW5lcihHLHRoaXMub25BbmltYXRpb25FbmQpLG0uY2xhc3NMaXN0LmFkZChgZi0ke2V9SW5gLGBmcm9tLSR7aD4wP3Y6Yn1gKSksbC5jdXJyZW50W3RoaXMuYXhpc109ZCxsLnRhcmdldFt0aGlzLmF4aXNdPWQsbC5yZXF1ZXN0VGljaygpLHRoaXMub25DaGFuZ2UoYyksITB9bWFuYWdlU2xpZGVWaXNpYmxpdHkoKXtjb25zdCB0PW5ldyBTZXQsZT1uZXcgU2V0LGk9dGhpcy5nZXRWaXNpYmxlU2xpZGVzKHBhcnNlRmxvYXQodGhpcy5vcHRpb24oXCJwcmVsb2FkXCIsMCkrXCJcIil8fDApO2Zvcihjb25zdCBuIG9mIHRoaXMuc2xpZGVzKWkuaGFzKG4pP3QuYWRkKG4pOmUuYWRkKG4pO2Zvcihjb25zdCBlIG9mIHRoaXMuaW5UcmFuc2l0aW9uKXQuYWRkKHRoaXMuc2xpZGVzW2VdKTtmb3IoY29uc3QgZSBvZiB0KXRoaXMuY3JlYXRlU2xpZGVFbChlKSx0aGlzLmxhenlMb2FkU2xpZGUoZSk7Zm9yKGNvbnN0IGkgb2YgZSl0LmhhcyhpKXx8dGhpcy5yZW1vdmVTbGlkZUVsKGkpO3RoaXMubWFya1NlbGVjdGVkU2xpZGVzKCksdGhpcy5yZXBvc2l0aW9uU2xpZGVzKCl9bWFya1NlbGVjdGVkU2xpZGVzKCl7aWYoIXRoaXMucGFnZXNbdGhpcy5wYWdlXXx8IXRoaXMucGFnZXNbdGhpcy5wYWdlXS5zbGlkZXMpcmV0dXJuO2NvbnN0IHQ9XCJhcmlhLWhpZGRlblwiO2xldCBlPXRoaXMuY24oSyk7aWYoZSlmb3IoY29uc3QgaSBvZiB0aGlzLnNsaWRlcyl7Y29uc3Qgbj1pLmVsO24mJihuLmRhdGFzZXQuaW5kZXg9YCR7aS5pbmRleH1gLG4uY2xhc3NMaXN0LmNvbnRhaW5zKFwiZi10aHVtYnNfX3NsaWRlXCIpP3RoaXMuZ2V0VmlzaWJsZVNsaWRlcygwKS5oYXMoaSk/bi5yZW1vdmVBdHRyaWJ1dGUodCk6bi5zZXRBdHRyaWJ1dGUodCxcInRydWVcIik6dGhpcy5wYWdlc1t0aGlzLnBhZ2VdLnNsaWRlcy5pbmNsdWRlcyhpKT8obi5jbGFzc0xpc3QuY29udGFpbnMoZSl8fChDKG4sZSksdGhpcy5lbWl0KFwic2VsZWN0U2xpZGVcIixpKSksbi5yZW1vdmVBdHRyaWJ1dGUodCkpOihuLmNsYXNzTGlzdC5jb250YWlucyhlKSYmKFAobixlKSx0aGlzLmVtaXQoXCJ1bnNlbGVjdFNsaWRlXCIsaSkpLG4uc2V0QXR0cmlidXRlKHQsXCJ0cnVlXCIpKSl9fWZsaXBJbmZpbml0ZVRyYWNrKCl7Y29uc3R7YXhpczp0LGlzSG9yaXpvbnRhbDplLGlzSW5maW5pdGU6aSxpc1JUTDpuLHZpZXdwb3J0RGltOnMsY29udGVudERpbTpvfT10aGlzLGE9dGhpcy5wYW56b29tO2lmKCFhfHwhaSlyZXR1cm47bGV0IHI9YS5jdXJyZW50W3RdLGw9YS50YXJnZXRbdF0tcixjPTAsaD0uNSpzO24mJmU/KHI8LWgmJihjPS0xLHIrPW8pLHI+by1oJiYoYz0xLHItPW8pKToocj5oJiYoYz0xLHItPW8pLHI8LW8raCYmKGM9LTEscis9bykpLGMmJihhLmN1cnJlbnRbdF09cixhLnRhcmdldFt0XT1yK2wpfWxhenlMb2FkSW1nKHQsZSl7Y29uc3QgaT10aGlzLG49XCJmLWZhZGVJblwiLG89XCJpcy1wcmVsb2FkaW5nXCI7bGV0IGE9ITEscj1udWxsO2NvbnN0IGw9KCk9PnthfHwoYT0hMCxyJiYoci5yZW1vdmUoKSxyPW51bGwpLFAoZSxvKSxlLmNvbXBsZXRlJiYoQyhlLG4pLHNldFRpbWVvdXQoKCgpPT57UChlLG4pfSksMzUwKSksdGhpcy5vcHRpb24oXCJhZGFwdGl2ZUhlaWdodFwiKSYmdC5lbCYmdGhpcy5wYWdlc1t0aGlzLnBhZ2VdLnNsaWRlcy5pbmRleE9mKHQpPi0xJiYoaS51cGRhdGVNZXRyaWNzKCksaS5zZXRWaWV3cG9ydEhlaWdodCgpKSx0aGlzLmVtaXQoXCJsb2FkXCIsdCkpfTtDKGUsbyksZS5zcmM9ZS5kYXRhc2V0LmxhenlTcmNzZXR8fGUuZGF0YXNldC5sYXp5U3JjfHxcIlwiLGRlbGV0ZSBlLmRhdGFzZXQubGF6eVNyYyxkZWxldGUgZS5kYXRhc2V0LmxhenlTcmNzZXQsZS5hZGRFdmVudExpc3RlbmVyKFwiZXJyb3JcIiwoKCk9PntsKCl9KSksZS5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLCgoKT0+e2woKX0pKSxzZXRUaW1lb3V0KCgoKT0+e2NvbnN0IGk9ZS5wYXJlbnROb2RlO2kmJnQuZWwmJihlLmNvbXBsZXRlP2woKTphfHwocj1zKEUpLGkuaW5zZXJ0QmVmb3JlKHIsZSkpKX0pLDMwMCl9bGF6eUxvYWRTbGlkZSh0KXtjb25zdCBlPXQmJnQuZWw7aWYoIWUpcmV0dXJuO2NvbnN0IGk9bmV3IFNldDtsZXQgbj1BcnJheS5mcm9tKGUucXVlcnlTZWxlY3RvckFsbChcIltkYXRhLWxhenktc3JjXSxbZGF0YS1sYXp5LXNyY3NldF1cIikpO2UuZGF0YXNldC5sYXp5U3JjJiZuLnB1c2goZSksbi5tYXAoKHQ9Pnt0IGluc3RhbmNlb2YgSFRNTEltYWdlRWxlbWVudD9pLmFkZCh0KTp0IGluc3RhbmNlb2YgSFRNTEVsZW1lbnQmJnQuZGF0YXNldC5sYXp5U3JjJiYodC5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2U9YHVybCgnJHt0LmRhdGFzZXQubGF6eVNyY30nKWAsZGVsZXRlIHQuZGF0YXNldC5sYXp5U3JjKX0pKTtmb3IoY29uc3QgZSBvZiBpKXRoaXMubGF6eUxvYWRJbWcodCxlKX1vbkFuaW1hdGlvbkVuZCh0KXt2YXIgZTtjb25zdCBpPXQudGFyZ2V0LG49aT9wYXJzZUludChpLmRhdGFzZXQuaW5kZXh8fFwiXCIsMTApfHwwOi0xLHM9dGhpcy5zbGlkZXNbbl0sbz10LmFuaW1hdGlvbk5hbWU7aWYoIWl8fCFzfHwhbylyZXR1cm47Y29uc3QgYT0hIXRoaXMuaW5UcmFuc2l0aW9uLmhhcyhuKSYmcy50cmFuc2l0aW9uO2EmJm8uc3Vic3RyaW5nKDAsYS5sZW5ndGgrMik9PT1gZi0ke2F9YCYmdGhpcy5pblRyYW5zaXRpb24uZGVsZXRlKG4pLHRoaXMuaW5UcmFuc2l0aW9uLnNpemV8fHRoaXMuY2xlYXJUcmFuc2l0aW9ucygpLG49PT10aGlzLnBhZ2UmJihudWxsPT09KGU9dGhpcy5wYW56b29tKXx8dm9pZCAwPT09ZT92b2lkIDA6ZS5pc1Jlc3RpbmcpJiZ0aGlzLmVtaXQoXCJzZXR0bGVcIil9b25EZWNlbCh0LGU9MCxpPTAsbj0wLHM9MCl7aWYodGhpcy5vcHRpb24oXCJkcmFnRnJlZVwiKSlyZXR1cm4gdm9pZCB0aGlzLnNldFBhZ2VGcm9tUG9zaXRpb24oKTtjb25zdHtpc1JUTDpvLGlzSG9yaXpvbnRhbDphLGF4aXM6cixwYWdlczpsfT10aGlzLGM9bC5sZW5ndGgsaD1NYXRoLmFicyhNYXRoLmF0YW4yKGksZSkvKE1hdGguUEkvMTgwKSk7bGV0IGQ9MDtpZihkPWg+NDUmJmg8MTM1P2E/MDppOmE/ZTowLCFjKXJldHVybjtsZXQgdT10aGlzLnBhZ2UsZj1vJiZhPzE6LTE7Y29uc3QgcD10LmN1cnJlbnRbcl0qZjtsZXR7cGFnZUluZGV4Omd9PXRoaXMuZ2V0UGFnZUZyb21Qb3NpdGlvbihwKTtNYXRoLmFicyhkKT41PyhsW3VdLmRpbTxkb2N1bWVudC5kb2N1bWVudEVsZW1lbnRbXCJjbGllbnRcIisodGhpcy5pc0hvcml6b250YWw/XCJXaWR0aFwiOlwiSGVpZ2h0XCIpXS0xJiYodT1nKSx1PW8mJmE/ZDwwP3UtMTp1KzE6ZDwwP3UrMTp1LTEpOnU9MD09PW4mJjA9PT1zP3U6Zyx0aGlzLnNsaWRlVG8odSx7dHJhbnNpdGlvbjohMSxmcmljdGlvbjp0Lm9wdGlvbihcImRlY2VsRnJpY3Rpb25cIil9KX1vbkNsaWNrKHQpe2NvbnN0IGU9dC50YXJnZXQsaT1lJiZTKGUpP2UuZGF0YXNldDpudWxsO2xldCBuLHM7aSYmKHZvaWQgMCE9PWkuY2Fyb3VzZWxQYWdlPyhzPVwic2xpZGVUb1wiLG49aS5jYXJvdXNlbFBhZ2UpOnZvaWQgMCE9PWkuY2Fyb3VzZWxOZXh0P3M9XCJzbGlkZU5leHRcIjp2b2lkIDAhPT1pLmNhcm91c2VsUHJldiYmKHM9XCJzbGlkZVByZXZcIikpLHM/KHQucHJldmVudERlZmF1bHQoKSx0LnN0b3BQcm9wYWdhdGlvbigpLGUmJiFlLmhhc0F0dHJpYnV0ZShcImRpc2FibGVkXCIpJiZ0aGlzW3NdKG4pKTp0aGlzLmVtaXQoXCJjbGlja1wiLHQpfW9uU2xpZGVUbyh0KXtjb25zdCBlPXQuZGV0YWlsfHwwO3RoaXMuc2xpZGVUbyh0aGlzLmdldFBhZ2VGb3JTbGlkZShlKSx7ZnJpY3Rpb246MH0pfW9uQ2hhbmdlKHQsZT0wKXtjb25zdCBpPXRoaXMucGFnZTt0aGlzLnByZXZQYWdlPWksdGhpcy5wYWdlPXQsdGhpcy5vcHRpb24oXCJhZGFwdGl2ZUhlaWdodFwiKSYmdGhpcy5zZXRWaWV3cG9ydEhlaWdodCgpLHQhPT1pJiYodGhpcy5tYXJrU2VsZWN0ZWRTbGlkZXMoKSx0aGlzLmVtaXQoXCJjaGFuZ2VcIix0LGksZSkpfW9uUmVmcmVzaCgpe2xldCB0PXRoaXMuY29udGVudERpbSxlPXRoaXMudmlld3BvcnREaW07dGhpcy51cGRhdGVNZXRyaWNzKCksdGhpcy5jb250ZW50RGltPT09dCYmdGhpcy52aWV3cG9ydERpbT09PWV8fHRoaXMuc2xpZGVUbyh0aGlzLnBhZ2Use2ZyaWN0aW9uOjAsdHJhbnNpdGlvbjohMX0pfW9uU2Nyb2xsKCl7dmFyIHQ7bnVsbD09PSh0PXRoaXMudmlld3BvcnQpfHx2b2lkIDA9PT10fHx0LnNjcm9sbCgwLDApfW9uUmVzaXplKCl7dGhpcy5vcHRpb24oXCJicmVha3BvaW50c1wiKSYmdGhpcy5wcm9jZXNzT3B0aW9ucygpfW9uQmVmb3JlVHJhbnNmb3JtKHQpe3RoaXMubHAhPT10LmN1cnJlbnRbdGhpcy5heGlzXSYmKHRoaXMuZmxpcEluZmluaXRlVHJhY2soKSx0aGlzLm1hbmFnZVNsaWRlVmlzaWJsaXR5KCkpLHRoaXMubHA9dC5jdXJyZW50LmV9b25FbmRBbmltYXRpb24oKXt0aGlzLmluVHJhbnNpdGlvbi5zaXplfHx0aGlzLmVtaXQoXCJzZXR0bGVcIil9cmVJbml0KHQ9bnVsbCxlPW51bGwpe3RoaXMuZGVzdHJveSgpLHRoaXMuc3RhdGU9Qi5Jbml0LHRoaXMucHJldlBhZ2U9bnVsbCx0aGlzLnVzZXJPcHRpb25zPXR8fHRoaXMudXNlck9wdGlvbnMsdGhpcy51c2VyUGx1Z2lucz1lfHx0aGlzLnVzZXJQbHVnaW5zLHRoaXMucHJvY2Vzc09wdGlvbnMoKX1zbGlkZVRvKHQ9MCx7ZnJpY3Rpb246ZT10aGlzLm9wdGlvbihcImZyaWN0aW9uXCIpLHRyYW5zaXRpb246aT10aGlzLm9wdGlvbihcInRyYW5zaXRpb25cIil9PXt9KXtpZih0aGlzLnN0YXRlPT09Qi5EZXN0cm95KXJldHVybjt0PXBhcnNlSW50KCh0fHwwKS50b1N0cmluZygpKXx8MDtjb25zdCBuPXRoaXMuZ2V0UGFnZUZyb21JbmRleCh0KSx7YXhpczpzLGlzSG9yaXpvbnRhbDpvLGlzUlRMOmEscGFnZXM6cixwYW56b29tOmx9PXRoaXMsYz1yLmxlbmd0aCxoPWEmJm8/MTotMTtpZighbHx8IWMpcmV0dXJuO2lmKHRoaXMucGFnZSE9PW4pe2NvbnN0IGU9bmV3IEV2ZW50KFwiYmVmb3JlQ2hhbmdlXCIse2J1YmJsZXM6ITAsY2FuY2VsYWJsZTohMH0pO2lmKHRoaXMuZW1pdChcImJlZm9yZUNoYW5nZVwiLGUsdCksZS5kZWZhdWx0UHJldmVudGVkKXJldHVybn1pZih0aGlzLnRyYW5zaXRpb25Ubyh0LGkpKXJldHVybjtsZXQgZD1yW25dLnBvcztpZih0aGlzLmlzSW5maW5pdGUpe2NvbnN0IGU9dGhpcy5jb250ZW50RGltLGk9bC50YXJnZXRbc10qaDtpZigyPT09YylkKz1lKk1hdGguZmxvb3IocGFyc2VGbG9hdCh0K1wiXCIpLzIpO2Vsc2V7ZD1bZCxkLWUsZCtlXS5yZWR1Y2UoKGZ1bmN0aW9uKHQsZSl7cmV0dXJuIE1hdGguYWJzKGUtaSk8TWF0aC5hYnModC1pKT9lOnR9KSl9fWQqPWgsTWF0aC5hYnMobC50YXJnZXRbc10tZCk8MXx8KGwucGFuVG8oe3g6bz9kOjAseTpvPzA6ZCxmcmljdGlvbjplfSksdGhpcy5vbkNoYW5nZShuKSl9c2xpZGVUb0Nsb3Nlc3QodCl7aWYodGhpcy5wYW56b29tKXtjb25zdHtwYWdlSW5kZXg6ZX09dGhpcy5nZXRQYWdlRnJvbVBvc2l0aW9uKCk7dGhpcy5zbGlkZVRvKGUsdCl9fXNsaWRlTmV4dCgpe3RoaXMuc2xpZGVUbyh0aGlzLnBhZ2UrMSl9c2xpZGVQcmV2KCl7dGhpcy5zbGlkZVRvKHRoaXMucGFnZS0xKX1jbGVhclRyYW5zaXRpb25zKCl7dGhpcy5pblRyYW5zaXRpb24uY2xlYXIoKSxQKHRoaXMuY29udGFpbmVyLHRoaXMuY24oXCJpblRyYW5zaXRpb25cIikpO2NvbnN0IHQ9W1widG8tcHJldlwiLFwidG8tbmV4dFwiLFwiZnJvbS1wcmV2XCIsXCJmcm9tLW5leHRcIl07Zm9yKGNvbnN0IGUgb2YgdGhpcy5zbGlkZXMpe2NvbnN0IGk9ZS5lbDtpZihpKXtpLnJlbW92ZUV2ZW50TGlzdGVuZXIoRyx0aGlzLm9uQW5pbWF0aW9uRW5kKSxpLmNsYXNzTGlzdC5yZW1vdmUoLi4udCk7Y29uc3Qgbj1lLnRyYW5zaXRpb247biYmaS5jbGFzc0xpc3QucmVtb3ZlKGBmLSR7bn1PdXRgLGBmLSR7bn1JbmApfX10aGlzLm1hbmFnZVNsaWRlVmlzaWJsaXR5KCl9YWRkU2xpZGUodCxlKXt2YXIgaSxuLHMsbztjb25zdCBhPXRoaXMucGFuem9vbSxyPShudWxsPT09KGk9dGhpcy5wYWdlc1t0aGlzLnBhZ2VdKXx8dm9pZCAwPT09aT92b2lkIDA6aS5wb3MpfHwwLGw9KG51bGw9PT0obj10aGlzLnBhZ2VzW3RoaXMucGFnZV0pfHx2b2lkIDA9PT1uP3ZvaWQgMDpuLmRpbSl8fDAsYz10aGlzLmNvbnRlbnREaW08dGhpcy52aWV3cG9ydERpbTtsZXQgaD1BcnJheS5pc0FycmF5KGUpP2U6W2VdO2NvbnN0IGQ9W107Zm9yKGNvbnN0IHQgb2YgaClkLnB1c2goSCh0KSk7dGhpcy5zbGlkZXMuc3BsaWNlKHQsMCwuLi5kKTtmb3IobGV0IHQ9MDt0PHRoaXMuc2xpZGVzLmxlbmd0aDt0KyspdGhpcy5zbGlkZXNbdF0uaW5kZXg9dDtmb3IoY29uc3QgdCBvZiBkKXRoaXMuZW1pdChcImJlZm9yZUluaXRTbGlkZVwiLHQsdC5pbmRleCk7aWYodGhpcy5wYWdlPj10JiYodGhpcy5wYWdlKz1kLmxlbmd0aCksdGhpcy51cGRhdGVNZXRyaWNzKCksYSl7Y29uc3QgZT0obnVsbD09PShzPXRoaXMucGFnZXNbdGhpcy5wYWdlXSl8fHZvaWQgMD09PXM/dm9pZCAwOnMucG9zKXx8MCxpPShudWxsPT09KG89dGhpcy5wYWdlc1t0aGlzLnBhZ2VdKXx8dm9pZCAwPT09bz92b2lkIDA6by5kaW0pfHwwLG49dGhpcy5wYWdlcy5sZW5ndGh8fDEsaD10aGlzLmlzUlRMP2wtaTppLWwsZD10aGlzLmlzUlRMP3ItZTplLXI7YyYmMT09PW4/KHQ8PXRoaXMucGFnZSYmKGEuY3VycmVudFt0aGlzLmF4aXNdLT1oLGEudGFyZ2V0W3RoaXMuYXhpc10tPWgpLGEucGFuVG8oe1t0aGlzLmlzSG9yaXpvbnRhbD9cInhcIjpcInlcIl06LTEqZX0pKTpkJiZ0PD10aGlzLnBhZ2UmJihhLnRhcmdldFt0aGlzLmF4aXNdLT1kLGEuY3VycmVudFt0aGlzLmF4aXNdLT1kLGEucmVxdWVzdFRpY2soKSl9Zm9yKGNvbnN0IHQgb2YgZCl0aGlzLmVtaXQoXCJpbml0U2xpZGVcIix0LHQuaW5kZXgpfXByZXBlbmRTbGlkZSh0KXt0aGlzLmFkZFNsaWRlKDAsdCl9YXBwZW5kU2xpZGUodCl7dGhpcy5hZGRTbGlkZSh0aGlzLnNsaWRlcy5sZW5ndGgsdCl9cmVtb3ZlU2xpZGUodCl7Y29uc3QgZT10aGlzLnNsaWRlcy5sZW5ndGg7dD0odCVlK2UpJWU7Y29uc3QgaT10aGlzLnNsaWRlc1t0XTtpZihpKXt0aGlzLnJlbW92ZVNsaWRlRWwoaSwhMCksdGhpcy5zbGlkZXMuc3BsaWNlKHQsMSk7Zm9yKGxldCB0PTA7dDx0aGlzLnNsaWRlcy5sZW5ndGg7dCsrKXRoaXMuc2xpZGVzW3RdLmluZGV4PXQ7dGhpcy51cGRhdGVNZXRyaWNzKCksdGhpcy5zbGlkZVRvKHRoaXMucGFnZSx7ZnJpY3Rpb246MCx0cmFuc2l0aW9uOiExfSksdGhpcy5lbWl0KFwiZGVzdHJveVNsaWRlXCIsaSl9fXVwZGF0ZU1ldHJpY3MoKXtjb25zdHtwYW56b29tOnQsdmlld3BvcnQ6aSx0cmFjazpuLHNsaWRlczpzLGlzSG9yaXpvbnRhbDpvLGlzSW5maW5pdGU6YX09dGhpcztpZighbilyZXR1cm47Y29uc3Qgcj1vP1wid2lkdGhcIjpcImhlaWdodFwiLGw9bz9cIm9mZnNldFdpZHRoXCI6XCJvZmZzZXRIZWlnaHRcIjtpZihpKXtsZXQgdD1NYXRoLm1heChpW2xdLGUoaS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVtyXSwxZTMpKSxuPWdldENvbXB1dGVkU3R5bGUoaSkscz1cInBhZGRpbmdcIixhPW8/XCJSaWdodFwiOlwiQm90dG9tXCI7dC09cGFyc2VGbG9hdChuW3MrKG8/XCJMZWZ0XCI6XCJUb3BcIildKStwYXJzZUZsb2F0KG5bcythXSksdGhpcy52aWV3cG9ydERpbT10fWxldCBjLGg9MDtmb3IoY29uc3RbdCxpXW9mIHMuZW50cmllcygpKXtsZXQgbj0wLG89MDshaS5lbCYmYz8obj1jLmRpbSxvPWMuZ2FwKTooKHtkaW06bixnYXA6b309dGhpcy5nZXRTbGlkZU1ldHJpY3MoaSkpLGM9aSksbj1lKG4sMWUzKSxvPWUobywxZTMpLGkuZGltPW4saS5nYXA9byxpLnBvcz1oLGgrPW4sKGF8fHQ8cy5sZW5ndGgtMSkmJihoKz1vKX1oPWUoaCwxZTMpLHRoaXMuY29udGVudERpbT1oLHQmJih0LmNvbnRlbnRSZWN0W3JdPWgsdC5jb250ZW50UmVjdFtvP1wiZnVsbFdpZHRoXCI6XCJmdWxsSGVpZ2h0XCJdPWgpLHRoaXMucGFnZXM9dGhpcy5jcmVhdGVQYWdlcygpLHRoaXMucGFnZXM9dGhpcy5wcm9jZXNzUGFnZXMoKSx0aGlzLnN0YXRlPT09Qi5Jbml0JiZ0aGlzLnNldEluaXRpYWxQYWdlKCksdGhpcy5wYWdlPU1hdGgubWF4KDAsTWF0aC5taW4odGhpcy5wYWdlLHRoaXMucGFnZXMubGVuZ3RoLTEpKSx0aGlzLm1hbmFnZVNsaWRlVmlzaWJsaXR5KCksdGhpcy5lbWl0KFwicmVmcmVzaFwiKX1nZXRQcm9ncmVzcyh0LGk9ITEsbj0hMSl7dm9pZCAwPT09dCYmKHQ9dGhpcy5wYWdlKTtjb25zdCBzPXRoaXMsbz1zLnBhbnpvb20sYT1zLmNvbnRlbnREaW0scj1zLnBhZ2VzW3RdfHwwO2lmKCFyfHwhbylyZXR1cm4gdD50aGlzLnBhZ2U/LTE6MTtsZXQgbD0tMSpvLmN1cnJlbnQuZSxjPWUoKGwtci5wb3MpLygxKnIuZGltKSwxZTMpLGg9YyxkPWM7dGhpcy5pc0luZmluaXRlJiYhMCE9PW4mJihoPWUoKGwtci5wb3MrYSkvKDEqci5kaW0pLDFlMyksZD1lKChsLXIucG9zLWEpLygxKnIuZGltKSwxZTMpKTtsZXQgdT1bYyxoLGRdLnJlZHVjZSgoZnVuY3Rpb24odCxlKXtyZXR1cm4gTWF0aC5hYnMoZSk8TWF0aC5hYnModCk/ZTp0fSkpO3JldHVybiBpP3U6dT4xPzE6dTwtMT8tMTp1fXNldFZpZXdwb3J0SGVpZ2h0KCl7Y29uc3R7cGFnZTp0LHBhZ2VzOmUsdmlld3BvcnQ6aSxpc0hvcml6b250YWw6bn09dGhpcztpZighaXx8IWVbdF0pcmV0dXJuO2xldCBzPTA7biYmdGhpcy50cmFjayYmKHRoaXMudHJhY2suc3R5bGUuaGVpZ2h0PVwiYXV0b1wiLGVbdF0uc2xpZGVzLmZvckVhY2goKHQ9Pnt0LmVsJiYocz1NYXRoLm1heChzLHQuZWwub2Zmc2V0SGVpZ2h0KSl9KSkpLGkuc3R5bGUuaGVpZ2h0PXM/YCR7c31weGA6XCJcIn1nZXRQYWdlRm9yU2xpZGUodCl7Zm9yKGNvbnN0IGUgb2YgdGhpcy5wYWdlcylmb3IoY29uc3QgaSBvZiBlLnNsaWRlcylpZihpLmluZGV4PT09dClyZXR1cm4gZS5pbmRleDtyZXR1cm4tMX1nZXRWaXNpYmxlU2xpZGVzKHQ9MCl7dmFyIGU7Y29uc3QgaT1uZXcgU2V0O2xldHtwYW56b29tOm4sY29udGVudERpbTpzLHZpZXdwb3J0RGltOm8scGFnZXM6YSxwYWdlOnJ9PXRoaXM7aWYobyl7cz1zKyhudWxsPT09KGU9dGhpcy5zbGlkZXNbdGhpcy5zbGlkZXMubGVuZ3RoLTFdKXx8dm9pZCAwPT09ZT92b2lkIDA6ZS5nYXApfHwwO2xldCBsPTA7bD1uJiZuLnN0YXRlIT09di5Jbml0JiZuLnN0YXRlIT09di5EZXN0cm95Py0xKm4uY3VycmVudFt0aGlzLmF4aXNdOmFbcl0mJmFbcl0ucG9zfHwwLHRoaXMuaXNJbmZpbml0ZSYmKGwtPU1hdGguZmxvb3IobC9zKSpzKSx0aGlzLmlzUlRMJiZ0aGlzLmlzSG9yaXpvbnRhbCYmKGwqPS0xKTtjb25zdCBjPWwtbyp0LGg9bCtvKih0KzEpLGQ9dGhpcy5pc0luZmluaXRlP1stMSwwLDFdOlswXTtmb3IoY29uc3QgdCBvZiB0aGlzLnNsaWRlcylmb3IoY29uc3QgZSBvZiBkKXtjb25zdCBuPXQucG9zK2UqcyxvPW4rdC5kaW0rdC5nYXA7bjxoJiZvPmMmJmkuYWRkKHQpfX1yZXR1cm4gaX1nZXRQYWdlRnJvbVBvc2l0aW9uKHQpe2NvbnN0e3ZpZXdwb3J0RGltOmUsY29udGVudERpbTppLHNsaWRlczpuLHBhZ2VzOnMscGFuem9vbTpvfT10aGlzLGE9cy5sZW5ndGgscj1uLmxlbmd0aCxsPW5bMF0sYz1uW3ItMV0saD10aGlzLm9wdGlvbihcImNlbnRlclwiKTtsZXQgZD0wLHU9MCxmPTAscD12b2lkIDA9PT10Py0xKigobnVsbD09bz92b2lkIDA6by50YXJnZXRbdGhpcy5heGlzXSl8fDApOnQ7aCYmKHArPS41KmUpLHRoaXMuaXNJbmZpbml0ZT8ocDxsLnBvcy0uNSpjLmdhcCYmKHAtPWksZj0tMSkscD5jLnBvcytjLmRpbSsuNSpjLmdhcCYmKHAtPWksZj0xKSk6cD1NYXRoLm1heChsLnBvc3x8MCxNYXRoLm1pbihwLGMucG9zKSk7bGV0IGc9YyxtPW4uZmluZCgodD0+e2NvbnN0IGU9dC5wb3MtLjUqZy5nYXAsaT10LnBvcyt0LmRpbSsuNSp0LmdhcDtyZXR1cm4gZz10LHA+PWUmJnA8aX0pKTtyZXR1cm4gbXx8KG09YyksdT10aGlzLmdldFBhZ2VGb3JTbGlkZShtLmluZGV4KSxkPXUrZiphLHtwYWdlOmQscGFnZUluZGV4OnV9fXNldFBhZ2VGcm9tUG9zaXRpb24oKXtjb25zdHtwYWdlSW5kZXg6dH09dGhpcy5nZXRQYWdlRnJvbVBvc2l0aW9uKCk7dGhpcy5vbkNoYW5nZSh0KX1kZXN0cm95KCl7aWYoW0IuRGVzdHJveV0uaW5jbHVkZXModGhpcy5zdGF0ZSkpcmV0dXJuO3RoaXMuc3RhdGU9Qi5EZXN0cm95O2NvbnN0e2NvbnRhaW5lcjp0LHZpZXdwb3J0OmUsdHJhY2s6aSxzbGlkZXM6bixwYW56b29tOnN9PXRoaXMsbz10aGlzLm9wdGlvbihcImNsYXNzZXNcIik7dC5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIix0aGlzLm9uQ2xpY2sse3Bhc3NpdmU6ITEsY2FwdHVyZTohMX0pLHQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInNsaWRlVG9cIix0aGlzLm9uU2xpZGVUbyksd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIix0aGlzLm9uUmVzaXplKSxzJiYocy5kZXN0cm95KCksdGhpcy5wYW56b29tPW51bGwpLG4mJm4uZm9yRWFjaCgodD0+e3RoaXMucmVtb3ZlU2xpZGVFbCh0KX0pKSx0aGlzLmRldGFjaFBsdWdpbnMoKSxlJiYoZS5yZW1vdmVFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsdGhpcy5vblNjcm9sbCksZS5vZmZzZXRQYXJlbnQmJmkmJmkub2Zmc2V0UGFyZW50JiZlLnJlcGxhY2VXaXRoKC4uLmkuY2hpbGROb2RlcykpO2Zvcihjb25zdFtlLGldb2YgT2JqZWN0LmVudHJpZXMobykpXCJjb250YWluZXJcIiE9PWUmJmkmJnQuY2xhc3NMaXN0LnJlbW92ZShpKTt0aGlzLnRyYWNrPW51bGwsdGhpcy52aWV3cG9ydD1udWxsLHRoaXMucGFnZT0wLHRoaXMuc2xpZGVzPVtdO2NvbnN0IGE9dGhpcy5ldmVudHMuZ2V0KFwicmVhZHlcIik7dGhpcy5ldmVudHM9bmV3IE1hcCxhJiZ0aGlzLmV2ZW50cy5zZXQoXCJyZWFkeVwiLGEpfX1PYmplY3QuZGVmaW5lUHJvcGVydHkoUSxcIlBhbnpvb21cIix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6SX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShRLFwiZGVmYXVsdHNcIix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6an0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShRLFwiUGx1Z2luc1wiLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTpVfSk7Y29uc3QgdHQ9ZnVuY3Rpb24odCl7aWYoIVModCkpcmV0dXJuIDA7Y29uc3QgZT13aW5kb3cuc2Nyb2xsWSxpPXdpbmRvdy5pbm5lckhlaWdodCxuPWUraSxzPXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksbz1zLnkrZSxhPXMuaGVpZ2h0LHI9bythO2lmKGU+cnx8bjxvKXJldHVybiAwO2lmKGU8byYmbj5yKXJldHVybiAxMDA7aWYobzxlJiZyPm4pcmV0dXJuIDEwMDtsZXQgbD1hO288ZSYmKGwtPWUtbykscj5uJiYobC09ci1uKTtjb25zdCBjPWwvaSoxMDA7cmV0dXJuIE1hdGgucm91bmQoYyl9LGV0PSEoXCJ1bmRlZmluZWRcIj09dHlwZW9mIHdpbmRvd3x8IXdpbmRvdy5kb2N1bWVudHx8IXdpbmRvdy5kb2N1bWVudC5jcmVhdGVFbGVtZW50KTtsZXQgaXQ7Y29uc3QgbnQ9W1wiYVtocmVmXVwiLFwiYXJlYVtocmVmXVwiLCdpbnB1dDpub3QoW2Rpc2FibGVkXSk6bm90KFt0eXBlPVwiaGlkZGVuXCJdKTpub3QoW2FyaWEtaGlkZGVuXSknLFwic2VsZWN0Om5vdChbZGlzYWJsZWRdKTpub3QoW2FyaWEtaGlkZGVuXSlcIixcInRleHRhcmVhOm5vdChbZGlzYWJsZWRdKTpub3QoW2FyaWEtaGlkZGVuXSlcIixcImJ1dHRvbjpub3QoW2Rpc2FibGVkXSk6bm90KFthcmlhLWhpZGRlbl0pOm5vdCguZmFuY3lib3gtZm9jdXMtZ3VhcmQpXCIsXCJpZnJhbWVcIixcIm9iamVjdFwiLFwiZW1iZWRcIixcInZpZGVvXCIsXCJhdWRpb1wiLFwiW2NvbnRlbnRlZGl0YWJsZV1cIiwnW3RhYmluZGV4XTpub3QoW3RhYmluZGV4Xj1cIi1cIl0pOm5vdChbZGlzYWJsZWRdKTpub3QoW2FyaWEtaGlkZGVuXSknXS5qb2luKFwiLFwiKSxzdD10PT57aWYodCYmZXQpe3ZvaWQgMD09PWl0JiZkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLmZvY3VzKHtnZXQgcHJldmVudFNjcm9sbCgpe3JldHVybiBpdD0hMCwhMX19KTt0cnl7aWYoaXQpdC5mb2N1cyh7cHJldmVudFNjcm9sbDohMH0pO2Vsc2V7Y29uc3QgZT13aW5kb3cuc2Nyb2xsWXx8ZG9jdW1lbnQuYm9keS5zY3JvbGxUb3AsaT13aW5kb3cuc2Nyb2xsWHx8ZG9jdW1lbnQuYm9keS5zY3JvbGxMZWZ0O3QuZm9jdXMoKSxkb2N1bWVudC5ib2R5LnNjcm9sbFRvKHt0b3A6ZSxsZWZ0OmksYmVoYXZpb3I6XCJhdXRvXCJ9KX19Y2F0Y2godCl7fX19LG90PSgpPT57Y29uc3QgdD1kb2N1bWVudDtsZXQgZSxpPVwiXCIsbj1cIlwiLHM9XCJcIjtyZXR1cm4gdC5mdWxsc2NyZWVuRW5hYmxlZD8oaT1cInJlcXVlc3RGdWxsc2NyZWVuXCIsbj1cImV4aXRGdWxsc2NyZWVuXCIscz1cImZ1bGxzY3JlZW5FbGVtZW50XCIpOnQud2Via2l0RnVsbHNjcmVlbkVuYWJsZWQmJihpPVwid2Via2l0UmVxdWVzdEZ1bGxzY3JlZW5cIixuPVwid2Via2l0RXhpdEZ1bGxzY3JlZW5cIixzPVwid2Via2l0RnVsbHNjcmVlbkVsZW1lbnRcIiksaSYmKGU9e3JlcXVlc3Q6ZnVuY3Rpb24oZT10LmRvY3VtZW50RWxlbWVudCl7cmV0dXJuXCJ3ZWJraXRSZXF1ZXN0RnVsbHNjcmVlblwiPT09aT9lW2ldKEVsZW1lbnQuQUxMT1dfS0VZQk9BUkRfSU5QVVQpOmVbaV0oKX0sZXhpdDpmdW5jdGlvbigpe3JldHVybiB0W3NdJiZ0W25dKCl9LGlzRnVsbHNjcmVlbjpmdW5jdGlvbigpe3JldHVybiB0W3NdfX0pLGV9LGF0PXtkcmFnVG9DbG9zZTohMCxoaWRlU2Nyb2xsYmFyOiEwLENhcm91c2VsOntjbGFzc2VzOntjb250YWluZXI6XCJmYW5jeWJveF9fY2Fyb3VzZWxcIix2aWV3cG9ydDpcImZhbmN5Ym94X192aWV3cG9ydFwiLHRyYWNrOlwiZmFuY3lib3hfX3RyYWNrXCIsc2xpZGU6XCJmYW5jeWJveF9fc2xpZGVcIn19LGNvbnRlbnRDbGljazpcInRvZ2dsZVpvb21cIixjb250ZW50RGJsQ2xpY2s6ITEsYmFja2Ryb3BDbGljazpcImNsb3NlXCIsYW5pbWF0ZWQ6ITAsaWRsZTozNTAwLHNob3dDbGFzczpcImYtem9vbUluVXBcIixoaWRlQ2xhc3M6XCJmLWZhZGVPdXRcIixjb21tb25DYXB0aW9uOiExLHBhcmVudEVsOm51bGwsc3RhcnRJbmRleDowLGwxMG46T2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LHkpLHtDTE9TRTpcIkNsb3NlXCIsTkVYVDpcIk5leHRcIixQUkVWOlwiUHJldmlvdXNcIixNT0RBTDpcIllvdSBjYW4gY2xvc2UgdGhpcyBtb2RhbCBjb250ZW50IHdpdGggdGhlIEVTQyBrZXlcIixFUlJPUjpcIlNvbWV0aGluZyBXZW50IFdyb25nLCBQbGVhc2UgVHJ5IEFnYWluIExhdGVyXCIsSU1BR0VfRVJST1I6XCJJbWFnZSBOb3QgRm91bmRcIixFTEVNRU5UX05PVF9GT1VORDpcIkhUTUwgRWxlbWVudCBOb3QgRm91bmRcIixBSkFYX05PVF9GT1VORDpcIkVycm9yIExvYWRpbmcgQUpBWCA6IE5vdCBGb3VuZFwiLEFKQVhfRk9SQklEREVOOlwiRXJyb3IgTG9hZGluZyBBSkFYIDogRm9yYmlkZGVuXCIsSUZSQU1FX0VSUk9SOlwiRXJyb3IgTG9hZGluZyBQYWdlXCIsVE9HR0xFX1pPT006XCJUb2dnbGUgem9vbSBsZXZlbFwiLFRPR0dMRV9USFVNQlM6XCJUb2dnbGUgdGh1bWJuYWlsc1wiLFRPR0dMRV9TTElERVNIT1c6XCJUb2dnbGUgc2xpZGVzaG93XCIsVE9HR0xFX0ZVTExTQ1JFRU46XCJUb2dnbGUgZnVsbC1zY3JlZW4gbW9kZVwiLERPV05MT0FEOlwiRG93bmxvYWRcIn0pLHRwbDp7Y2xvc2VCdXR0b246JzxidXR0b24gZGF0YS1mYW5jeWJveC1jbG9zZSBjbGFzcz1cImYtYnV0dG9uIGlzLWNsb3NlLWJ0blwiIHRpdGxlPVwie3tDTE9TRX19XCI+PHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgdmlld0JveD1cIjAgMCAyNCAyNFwiIHRhYmluZGV4PVwiLTFcIj48cGF0aCBkPVwiTTIwIDIwTDQgNG0xNiAwTDQgMjBcIi8+PC9zdmc+PC9idXR0b24+JyxtYWluOic8ZGl2IGNsYXNzPVwiZmFuY3lib3hfX2NvbnRhaW5lclwiIHJvbGU9XCJkaWFsb2dcIiBhcmlhLW1vZGFsPVwidHJ1ZVwiIGFyaWEtbGFiZWw9XCJ7e01PREFMfX1cIiB0YWJpbmRleD1cIi0xXCI+XFxuICAgIDxkaXYgY2xhc3M9XCJmYW5jeWJveF9fYmFja2Ryb3BcIj48L2Rpdj5cXG4gICAgPGRpdiBjbGFzcz1cImZhbmN5Ym94X19jYXJvdXNlbFwiPjwvZGl2PlxcbiAgICA8ZGl2IGNsYXNzPVwiZmFuY3lib3hfX2Zvb3RlclwiPjwvZGl2PlxcbiAgPC9kaXY+J30sZ3JvdXBBbGw6ITEsZ3JvdXBBdHRyOlwiZGF0YS1mYW5jeWJveFwiLGRlZmF1bHRUeXBlOlwiaW1hZ2VcIixkZWZhdWx0RGlzcGxheTpcImJsb2NrXCIsYXV0b0ZvY3VzOiEwLHRyYXBGb2N1czohMCxwbGFjZUZvY3VzQmFjazohMCxjbG9zZUJ1dHRvbjpcImF1dG9cIixrZXlib2FyZDp7RXNjYXBlOlwiY2xvc2VcIixEZWxldGU6XCJjbG9zZVwiLEJhY2tzcGFjZTpcImNsb3NlXCIsUGFnZVVwOlwibmV4dFwiLFBhZ2VEb3duOlwicHJldlwiLEFycm93VXA6XCJwcmV2XCIsQXJyb3dEb3duOlwibmV4dFwiLEFycm93UmlnaHQ6XCJuZXh0XCIsQXJyb3dMZWZ0OlwicHJldlwifSxGdWxsc2NyZWVuOnthdXRvU3RhcnQ6ITF9LGNvbXBhY3Q6KCk9PndpbmRvdy5tYXRjaE1lZGlhKFwiKG1heC13aWR0aDogNTc4cHgpLCAobWF4LWhlaWdodDogNTc4cHgpXCIpLm1hdGNoZXMsd2hlZWw6XCJ6b29tXCJ9O3ZhciBydCxsdDshZnVuY3Rpb24odCl7dFt0LkluaXQ9MF09XCJJbml0XCIsdFt0LlJlYWR5PTFdPVwiUmVhZHlcIix0W3QuQ2xvc2luZz0yXT1cIkNsb3NpbmdcIix0W3QuQ3VzdG9tQ2xvc2luZz0zXT1cIkN1c3RvbUNsb3NpbmdcIix0W3QuRGVzdHJveT00XT1cIkRlc3Ryb3lcIn0ocnR8fChydD17fSkpLGZ1bmN0aW9uKHQpe3RbdC5Mb2FkaW5nPTBdPVwiTG9hZGluZ1wiLHRbdC5PcGVuaW5nPTFdPVwiT3BlbmluZ1wiLHRbdC5SZWFkeT0yXT1cIlJlYWR5XCIsdFt0LkNsb3Npbmc9M109XCJDbG9zaW5nXCJ9KGx0fHwobHQ9e30pKTtsZXQgY3Q9XCJcIixodD0hMSxkdD0hMSx1dD1udWxsO2NvbnN0IGZ0PSgpPT57bGV0IHQ9XCJcIixlPVwiXCI7Y29uc3QgaT1UZS5nZXRJbnN0YW5jZSgpO2lmKGkpe2NvbnN0IG49aS5jYXJvdXNlbCxzPWkuZ2V0U2xpZGUoKTtpZihuJiZzKXtsZXQgbz1zLnNsdWd8fHZvaWQgMCxhPXMudHJpZ2dlckVsfHx2b2lkIDA7ZT1vfHwoaS5vcHRpb24oXCJzbHVnXCIpfHxcIlwiKSwhZSYmYSYmYS5kYXRhc2V0JiYoZT1hLmRhdGFzZXQuZmFuY3lib3h8fFwiXCIpLGUmJlwidHJ1ZVwiIT09ZSYmKHQ9XCIjXCIrZSsoIW8mJm4uc2xpZGVzLmxlbmd0aD4xP1wiLVwiKyhzLmluZGV4KzEpOlwiXCIpKX19cmV0dXJue2hhc2g6dCxzbHVnOmUsaW5kZXg6MX19LHB0PSgpPT57Y29uc3QgdD1uZXcgVVJMKGRvY3VtZW50LlVSTCkuaGFzaCxlPXQuc2xpY2UoMSkuc3BsaXQoXCItXCIpLGk9ZVtlLmxlbmd0aC0xXSxuPWkmJi9eXFwrP1xcZCskLy50ZXN0KGkpJiZwYXJzZUludChlLnBvcCgpfHxcIjFcIiwxMCl8fDE7cmV0dXJue2hhc2g6dCxzbHVnOmUuam9pbihcIi1cIiksaW5kZXg6bn19LGd0PSgpPT57Y29uc3R7c2x1Zzp0LGluZGV4OmV9PXB0KCk7aWYoIXQpcmV0dXJuO2xldCBpPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLXNsdWc9XCIke3R9XCJdYCk7aWYoaSYmaS5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudChcImNsaWNrXCIse2J1YmJsZXM6ITAsY2FuY2VsYWJsZTohMH0pKSxUZS5nZXRJbnN0YW5jZSgpKXJldHVybjtjb25zdCBuPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYFtkYXRhLWZhbmN5Ym94PVwiJHt0fVwiXWApO24ubGVuZ3RoJiYoaT1uW2UtMV0saSYmaS5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudChcImNsaWNrXCIse2J1YmJsZXM6ITAsY2FuY2VsYWJsZTohMH0pKSl9LG10PSgpPT57aWYoITE9PT1UZS5kZWZhdWx0cy5IYXNoKXJldHVybjtjb25zdCB0PVRlLmdldEluc3RhbmNlKCk7aWYoITE9PT0obnVsbD09dD92b2lkIDA6dC5vcHRpb25zLkhhc2gpKXJldHVybjtjb25zdHtzbHVnOmUsaW5kZXg6aX09cHQoKSx7c2x1ZzpufT1mdCgpO3QmJihlPT09bj90Lmp1bXBUbyhpLTEpOihodD0hMCx0LmNsb3NlKCkpKSxndCgpfSx2dD0oKT0+e3V0JiZjbGVhclRpbWVvdXQodXQpLHF1ZXVlTWljcm90YXNrKCgoKT0+e210KCl9KSl9LGJ0PSgpPT57d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJoYXNoY2hhbmdlXCIsdnQsITEpLHNldFRpbWVvdXQoKCgpPT57bXQoKX0pLDUwMCl9O2V0JiYoL2NvbXBsZXRlfGludGVyYWN0aXZlfGxvYWRlZC8udGVzdChkb2N1bWVudC5yZWFkeVN0YXRlKT9idCgpOmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsYnQpKTtjb25zdCB5dD1cImlzLXpvb21pbmctaW5cIjtjbGFzcyB3dCBleHRlbmRzIF97b25DcmVhdGVTbGlkZSh0LGUsaSl7Y29uc3Qgbj10aGlzLmluc3RhbmNlLm9wdGlvbkZvcihpLFwic3JjXCIpfHxcIlwiO2kuZWwmJlwiaW1hZ2VcIj09PWkudHlwZSYmXCJzdHJpbmdcIj09dHlwZW9mIG4mJnRoaXMuc2V0SW1hZ2UoaSxuKX1vblJlbW92ZVNsaWRlKHQsZSxpKXtpLnBhbnpvb20mJmkucGFuem9vbS5kZXN0cm95KCksaS5wYW56b29tPXZvaWQgMCxpLmltYWdlRWw9dm9pZCAwfW9uQ2hhbmdlKHQsZSxpLG4pe1AodGhpcy5pbnN0YW5jZS5jb250YWluZXIseXQpO2Zvcihjb25zdCB0IG9mIGUuc2xpZGVzKXtjb25zdCBlPXQucGFuem9vbTtlJiZ0LmluZGV4IT09aSYmZS5yZXNldCguMzUpfX1vbkNsb3NlKCl7dmFyIHQ7Y29uc3QgZT10aGlzLmluc3RhbmNlLGk9ZS5jb250YWluZXIsbj1lLmdldFNsaWRlKCk7aWYoIWl8fCFpLnBhcmVudEVsZW1lbnR8fCFuKXJldHVybjtjb25zdHtlbDpzLGNvbnRlbnRFbDpvLHBhbnpvb206YSx0aHVtYkVsU3JjOnJ9PW47aWYoIXN8fCFyfHwhb3x8IWF8fGEuaXNDb250ZW50TG9hZGluZ3x8YS5zdGF0ZT09PXYuSW5pdHx8YS5zdGF0ZT09PXYuRGVzdHJveSlyZXR1cm47YS51cGRhdGVNZXRyaWNzKCk7bGV0IGw9dGhpcy5nZXRab29tSW5mbyhuKTtpZighbClyZXR1cm47dGhpcy5pbnN0YW5jZS5zdGF0ZT1ydC5DdXN0b21DbG9zaW5nLGkuY2xhc3NMaXN0LnJlbW92ZSh5dCksaS5jbGFzc0xpc3QuYWRkKFwiaXMtem9vbWluZy1vdXRcIiksby5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2U9YHVybCgnJHtyfScpYDtjb25zdCBjPWkuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7MT09PSgobnVsbD09PSh0PXdpbmRvdy52aXN1YWxWaWV3cG9ydCl8fHZvaWQgMD09PXQ/dm9pZCAwOnQuc2NhbGUpfHwxKSYmT2JqZWN0LmFzc2lnbihpLnN0eWxlLHtwb3NpdGlvbjpcImFic29sdXRlXCIsdG9wOmAke2kub2Zmc2V0VG9wK3dpbmRvdy5zY3JvbGxZfXB4YCxsZWZ0OmAke2kub2Zmc2V0TGVmdCt3aW5kb3cuc2Nyb2xsWH1weGAsYm90dG9tOlwiYXV0b1wiLHJpZ2h0OlwiYXV0b1wiLHdpZHRoOmAke2Mud2lkdGh9cHhgLGhlaWdodDpgJHtjLmhlaWdodH1weGAsb3ZlcmZsb3c6XCJoaWRkZW5cIn0pO2NvbnN0e3g6aCx5OmQsc2NhbGU6dSxvcGFjaXR5OmZ9PWw7aWYoZil7Y29uc3QgdD0oKHQsZSxpLG4pPT57Y29uc3Qgcz1lLXQsbz1uLWk7cmV0dXJuIGU9PmkrKChlLXQpL3Mqb3x8MCl9KShhLnNjYWxlLHUsMSwwKTthLm9uKFwiYWZ0ZXJUcmFuc2Zvcm1cIiwoKCk9PntvLnN0eWxlLm9wYWNpdHk9dChhLnNjYWxlKStcIlwifSkpfWEub24oXCJlbmRBbmltYXRpb25cIiwoKCk9PntlLmRlc3Ryb3koKX0pKSxhLnRhcmdldC5hPXUsYS50YXJnZXQuYj0wLGEudGFyZ2V0LmM9MCxhLnRhcmdldC5kPXUsYS5wYW5Ubyh7eDpoLHk6ZCxzY2FsZTp1LGZyaWN0aW9uOmY/LjI6LjMzLGlnbm9yZUJvdW5kczohMH0pLGEuaXNSZXN0aW5nJiZlLmRlc3Ryb3koKX1zZXRJbWFnZSh0LGUpe2NvbnN0IGk9dGhpcy5pbnN0YW5jZTt0LnNyYz1lLHRoaXMucHJvY2Vzcyh0LGUpLnRoZW4oKGU9Pntjb25zdHtjb250ZW50RWw6bixpbWFnZUVsOnMsdGh1bWJFbFNyYzpvLGVsOmF9PXQ7aWYoaS5pc0Nsb3NpbmcoKXx8IW58fCFzKXJldHVybjtuLm9mZnNldEhlaWdodDtjb25zdCByPSEhaS5pc09wZW5pbmdTbGlkZSh0KSYmdGhpcy5nZXRab29tSW5mbyh0KTtpZih0aGlzLm9wdGlvbihcInByb3RlY3RlZFwiKSYmYSl7YS5hZGRFdmVudExpc3RlbmVyKFwiY29udGV4dG1lbnVcIiwodD0+e3QucHJldmVudERlZmF1bHQoKX0pKTtjb25zdCB0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7Qyh0LFwiZmFuY3lib3gtcHJvdGVjdGVkXCIpLG4uYXBwZW5kQ2hpbGQodCl9aWYobyYmcil7Y29uc3Qgcz1lLmNvbnRlbnRSZWN0LGE9TWF0aC5tYXgocy5mdWxsV2lkdGgscy5mdWxsSGVpZ2h0KTtsZXQgYz1udWxsOyFyLm9wYWNpdHkmJmE+MTIwMCYmKGM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKSxDKGMsXCJmYW5jeWJveC1naG9zdFwiKSxjLnNyYz1vLG4uYXBwZW5kQ2hpbGQoYykpO2NvbnN0IGg9KCk9PntjJiYoQyhjLFwiZi1mYWRlRmFzdE91dFwiKSxzZXRUaW1lb3V0KCgoKT0+e2MmJihjLnJlbW92ZSgpLGM9bnVsbCl9KSwyMDApKX07KGw9byxuZXcgUHJvbWlzZSgoKHQsZSk9Pntjb25zdCBpPW5ldyBJbWFnZTtpLm9ubG9hZD10LGkub25lcnJvcj1lLGkuc3JjPWx9KSkpLnRoZW4oKCgpPT57aS5oaWRlTG9hZGluZyh0KSx0LnN0YXRlPWx0Lk9wZW5pbmcsdGhpcy5pbnN0YW5jZS5lbWl0KFwicmV2ZWFsXCIsdCksdGhpcy56b29tSW4odCkudGhlbigoKCk9PntoKCksdGhpcy5pbnN0YW5jZS5kb25lKHQpfSksKCgpPT57fSkpLGMmJnNldFRpbWVvdXQoKCgpPT57aCgpfSksYT4yNTAwPzgwMDoyMDApfSksKCgpPT57aS5oaWRlTG9hZGluZyh0KSxpLnJldmVhbENvbnRlbnQodCl9KSl9ZWxzZXtjb25zdCBuPXRoaXMub3B0aW9uRm9yKHQsXCJpbml0aWFsU2l6ZVwiKSxzPXRoaXMub3B0aW9uRm9yKHQsXCJ6b29tXCIpLG89e2V2ZW50OmkucHJldk1vdXNlTW92ZUV2ZW50fHxpLm9wdGlvbnMuZXZlbnQsZnJpY3Rpb246cz8uMTI6MH07bGV0IGE9aS5vcHRpb25Gb3IodCxcInNob3dDbGFzc1wiKXx8dm9pZCAwLHI9ITA7aS5pc09wZW5pbmdTbGlkZSh0KSYmKFwiZnVsbFwiPT09bj9lLnpvb21Ub0Z1bGwobyk6XCJjb3ZlclwiPT09bj9lLnpvb21Ub0NvdmVyKG8pOlwibWF4XCI9PT1uP2Uuem9vbVRvTWF4KG8pOnI9ITEsZS5zdG9wKFwiY3VycmVudFwiKSksciYmYSYmKGE9ZS5pc0RyYWdnaW5nP1wiZi1mYWRlSW5cIjpcIlwiKSxpLmhpZGVMb2FkaW5nKHQpLGkucmV2ZWFsQ29udGVudCh0LGEpfXZhciBsfSksKCgpPT57aS5zZXRFcnJvcih0LFwie3tJTUFHRV9FUlJPUn19XCIpfSkpfXByb2Nlc3ModCxlKXtyZXR1cm4gbmV3IFByb21pc2UoKChpLG4pPT57dmFyIG87Y29uc3QgYT10aGlzLmluc3RhbmNlLHI9dC5lbDthLmNsZWFyQ29udGVudCh0KSxhLnNob3dMb2FkaW5nKHQpO2xldCBsPXRoaXMub3B0aW9uRm9yKHQsXCJjb250ZW50XCIpO2lmKFwic3RyaW5nXCI9PXR5cGVvZiBsJiYobD1zKGwpKSwhbHx8IVMobCkpe2lmKGw9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKSxsIGluc3RhbmNlb2YgSFRNTEltYWdlRWxlbWVudCl7bGV0IGk9XCJcIixuPXQuY2FwdGlvbjtpPVwic3RyaW5nXCI9PXR5cGVvZiBuJiZuP24ucmVwbGFjZSgvPFtePl0rPi9naSxcIlwiKS5zdWJzdHJpbmcoMCwxZTMpOmBJbWFnZSAke3QuaW5kZXgrMX0gb2YgJHsobnVsbD09PShvPWEuY2Fyb3VzZWwpfHx2b2lkIDA9PT1vP3ZvaWQgMDpvLnBhZ2VzLmxlbmd0aCl8fDF9YCxsLnNyYz1lfHxcIlwiLGwuYWx0PWksbC5kcmFnZ2FibGU9ITEsdC5zcmNzZXQmJmwuc2V0QXR0cmlidXRlKFwic3Jjc2V0XCIsdC5zcmNzZXQpLHRoaXMuaW5zdGFuY2UuaXNPcGVuaW5nU2xpZGUodCkmJihsLmZldGNoUHJpb3JpdHk9XCJoaWdoXCIpfXQuc2l6ZXMmJmwuc2V0QXR0cmlidXRlKFwic2l6ZXNcIix0LnNpemVzKX1DKGwsXCJmYW5jeWJveC1pbWFnZVwiKSx0LmltYWdlRWw9bCxhLnNldENvbnRlbnQodCxsLCExKTt0LnBhbnpvb209bmV3IEkocixmKHt0cmFuc2Zvcm1QYXJlbnQ6ITB9LHRoaXMub3B0aW9uKFwiUGFuem9vbVwiKXx8e30se2NvbnRlbnQ6bCx3aWR0aDphLm9wdGlvbkZvcih0LFwid2lkdGhcIixcImF1dG9cIiksaGVpZ2h0OmEub3B0aW9uRm9yKHQsXCJoZWlnaHRcIixcImF1dG9cIiksd2hlZWw6KCk9Pntjb25zdCB0PWEub3B0aW9uKFwid2hlZWxcIik7cmV0dXJuKFwiem9vbVwiPT09dHx8XCJwYW5cIj09dCkmJnR9LGNsaWNrOihlLGkpPT57dmFyIG4scztpZihhLmlzQ29tcGFjdHx8YS5pc0Nsb3NpbmcoKSlyZXR1cm4hMTtpZih0LmluZGV4IT09KG51bGw9PT0obj1hLmdldFNsaWRlKCkpfHx2b2lkIDA9PT1uP3ZvaWQgMDpuLmluZGV4KSlyZXR1cm4hMTtpZihpKXtjb25zdCB0PWkuY29tcG9zZWRQYXRoKClbMF07aWYoW1wiQVwiLFwiQlVUVE9OXCIsXCJURVhUQVJFQVwiLFwiT1BUSU9OXCIsXCJJTlBVVFwiLFwiU0VMRUNUXCIsXCJWSURFT1wiXS5pbmNsdWRlcyh0Lm5vZGVOYW1lKSlyZXR1cm4hMX1sZXQgbz0haXx8aS50YXJnZXQmJihudWxsPT09KHM9dC5jb250ZW50RWwpfHx2b2lkIDA9PT1zP3ZvaWQgMDpzLmNvbnRhaW5zKGkudGFyZ2V0KSk7cmV0dXJuIGEub3B0aW9uKG8/XCJjb250ZW50Q2xpY2tcIjpcImJhY2tkcm9wQ2xpY2tcIil8fCExfSxkYmxDbGljazooKT0+YS5pc0NvbXBhY3Q/XCJ0b2dnbGVab29tXCI6YS5vcHRpb24oXCJjb250ZW50RGJsQ2xpY2tcIil8fCExLHNwaW5uZXI6ITEscGFuT25seVpvb21lZDohMCx3aGVlbExpbWl0OjEvMCxvbjp7cmVhZHk6dD0+e2kodCl9LGVycm9yOigpPT57bigpfSxkZXN0cm95OigpPT57bigpfX19KSl9KSl9em9vbUluKHQpe3JldHVybiBuZXcgUHJvbWlzZSgoKGUsaSk9Pntjb25zdCBuPXRoaXMuaW5zdGFuY2Uscz1uLmNvbnRhaW5lcix7cGFuem9vbTpvLGNvbnRlbnRFbDphLGVsOnJ9PXQ7byYmby51cGRhdGVNZXRyaWNzKCk7Y29uc3QgbD10aGlzLmdldFpvb21JbmZvKHQpO2lmKCEobCYmciYmYSYmbyYmcykpcmV0dXJuIHZvaWQgaSgpO2NvbnN0e3g6Yyx5Omgsc2NhbGU6ZCxvcGFjaXR5OnV9PWwsZj0oKT0+e3Quc3RhdGUhPT1sdC5DbG9zaW5nJiYodSYmKGEuc3R5bGUub3BhY2l0eT1NYXRoLm1heChNYXRoLm1pbigxLDEtKDEtby5zY2FsZSkvKDEtZCkpLDApK1wiXCIpLG8uc2NhbGU+PTEmJm8uc2NhbGU+by50YXJnZXRTY2FsZS0uMSYmZShvKSl9LHA9dD0+eyh0LnNjYWxlPC45OXx8dC5zY2FsZT4xLjAxKSYmIXQuaXNEcmFnZ2luZ3x8KFAocyx5dCksYS5zdHlsZS5vcGFjaXR5PVwiXCIsdC5vZmYoXCJlbmRBbmltYXRpb25cIixwKSx0Lm9mZihcInRvdWNoU3RhcnRcIixwKSx0Lm9mZihcImFmdGVyVHJhbnNmb3JtXCIsZiksZSh0KSl9O28ub24oXCJlbmRBbmltYXRpb25cIixwKSxvLm9uKFwidG91Y2hTdGFydFwiLHApLG8ub24oXCJhZnRlclRyYW5zZm9ybVwiLGYpLG8ub24oW1wiZXJyb3JcIixcImRlc3Ryb3lcIl0sKCgpPT57aSgpfSkpLG8ucGFuVG8oe3g6Yyx5Omgsc2NhbGU6ZCxmcmljdGlvbjowLGlnbm9yZUJvdW5kczohMH0pLG8uc3RvcChcImN1cnJlbnRcIik7Y29uc3QgZz17ZXZlbnQ6XCJtb3VzZW1vdmVcIj09PW8ucGFuTW9kZT9uLnByZXZNb3VzZU1vdmVFdmVudHx8bi5vcHRpb25zLmV2ZW50OnZvaWQgMH0sbT10aGlzLm9wdGlvbkZvcih0LFwiaW5pdGlhbFNpemVcIik7QyhzLHl0KSxuLmhpZGVMb2FkaW5nKHQpLFwiZnVsbFwiPT09bT9vLnpvb21Ub0Z1bGwoZyk6XCJjb3ZlclwiPT09bT9vLnpvb21Ub0NvdmVyKGcpOlwibWF4XCI9PT1tP28uem9vbVRvTWF4KGcpOm8ucmVzZXQoLjE3Mil9KSl9Z2V0Wm9vbUluZm8odCl7Y29uc3R7ZWw6ZSxpbWFnZUVsOmksdGh1bWJFbDpuLHBhbnpvb206c309dCxvPXRoaXMuaW5zdGFuY2UsYT1vLmNvbnRhaW5lcjtpZighZXx8IWl8fCFufHwhc3x8dHQobik8M3x8IXRoaXMub3B0aW9uRm9yKHQsXCJ6b29tXCIpfHwhYXx8by5zdGF0ZT09PXJ0LkRlc3Ryb3kpcmV0dXJuITE7aWYoXCIwXCI9PT1nZXRDb21wdXRlZFN0eWxlKGEpLmdldFByb3BlcnR5VmFsdWUoXCItLWYtaW1hZ2VzLXpvb21cIikpcmV0dXJuITE7Y29uc3Qgcj13aW5kb3cudmlzdWFsVmlld3BvcnR8fG51bGw7aWYoMSE9PShyP3Iuc2NhbGU6MSkpcmV0dXJuITE7bGV0e3RvcDpsLGxlZnQ6Yyx3aWR0aDpoLGhlaWdodDpkfT1uLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLHt0b3A6dSxsZWZ0OmYsZml0V2lkdGg6cCxmaXRIZWlnaHQ6Z309cy5jb250ZW50UmVjdDtpZighKGgmJmQmJnAmJmcpKXJldHVybiExO2NvbnN0IG09cy5jb250YWluZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7Zis9bS5sZWZ0LHUrPW0udG9wO2NvbnN0IHY9LTEqKGYrLjUqcC0oYysuNSpoKSksYj0tMSoodSsuNSpnLShsKy41KmQpKSx5PWgvcDtsZXQgdz10aGlzLm9wdGlvbihcInpvb21PcGFjaXR5XCIpfHwhMTtyZXR1cm5cImF1dG9cIj09PXcmJih3PU1hdGguYWJzKGgvZC1wL2cpPi4xKSx7eDp2LHk6YixzY2FsZTp5LG9wYWNpdHk6d319YXR0YWNoKCl7Y29uc3QgdD10aGlzLGU9dC5pbnN0YW5jZTtlLm9uKFwiQ2Fyb3VzZWwuY2hhbmdlXCIsdC5vbkNoYW5nZSksZS5vbihcIkNhcm91c2VsLmNyZWF0ZVNsaWRlXCIsdC5vbkNyZWF0ZVNsaWRlKSxlLm9uKFwiQ2Fyb3VzZWwucmVtb3ZlU2xpZGVcIix0Lm9uUmVtb3ZlU2xpZGUpLGUub24oXCJjbG9zZVwiLHQub25DbG9zZSl9ZGV0YWNoKCl7Y29uc3QgdD10aGlzLGU9dC5pbnN0YW5jZTtlLm9mZihcIkNhcm91c2VsLmNoYW5nZVwiLHQub25DaGFuZ2UpLGUub2ZmKFwiQ2Fyb3VzZWwuY3JlYXRlU2xpZGVcIix0Lm9uQ3JlYXRlU2xpZGUpLGUub2ZmKFwiQ2Fyb3VzZWwucmVtb3ZlU2xpZGVcIix0Lm9uUmVtb3ZlU2xpZGUpLGUub2ZmKFwiY2xvc2VcIix0Lm9uQ2xvc2UpfX1PYmplY3QuZGVmaW5lUHJvcGVydHkod3QsXCJkZWZhdWx0c1wiLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTp7aW5pdGlhbFNpemU6XCJmaXRcIixQYW56b29tOnttYXhTY2FsZToxfSxwcm90ZWN0ZWQ6ITEsem9vbTohMCx6b29tT3BhY2l0eTpcImF1dG9cIn19KSxcImZ1bmN0aW9uXCI9PXR5cGVvZiBTdXBwcmVzc2VkRXJyb3ImJlN1cHByZXNzZWRFcnJvcjtjb25zdCB4dD1cImh0bWxcIixFdD1cImltYWdlXCIsU3Q9XCJtYXBcIixQdD1cInlvdXR1YmVcIixDdD1cInZpbWVvXCIsVHQ9XCJodG1sNXZpZGVvXCIsTXQ9KHQsZT17fSk9Pntjb25zdCBpPW5ldyBVUkwodCksbj1uZXcgVVJMU2VhcmNoUGFyYW1zKGkuc2VhcmNoKSxzPW5ldyBVUkxTZWFyY2hQYXJhbXM7Zm9yKGNvbnN0W3QsaV1vZlsuLi5uLC4uLk9iamVjdC5lbnRyaWVzKGUpXSl7bGV0IGU9aStcIlwiO2lmKFwidFwiPT09dCl7bGV0IHQ9ZS5tYXRjaCgvKChcXGQqKW0pPyhcXGQqKXM/Lyk7dCYmcy5zZXQoXCJzdGFydFwiLDYwKnBhcnNlSW50KHRbMl18fFwiMFwiKStwYXJzZUludCh0WzNdfHxcIjBcIikrXCJcIil9ZWxzZSBzLnNldCh0LGUpfWxldCBvPXMrXCJcIixhPXQubWF0Y2goLyN0PSgoLiopP1xcZCtzKS8pO3JldHVybiBhJiYobys9YCN0PSR7YVsxXX1gKSxvfSxPdD17YWpheDpudWxsLGF1dG9TaXplOiEwLGlmcmFtZUF0dHI6e2FsbG93OlwiYXV0b3BsYXk7IGZ1bGxzY3JlZW5cIixzY3JvbGxpbmc6XCJhdXRvXCJ9LHByZWxvYWQ6ITAsdmlkZW9BdXRvcGxheTohMCx2aWRlb1JhdGlvOjE2LzksdmlkZW9UcGw6Jzx2aWRlbyBjbGFzcz1cImZhbmN5Ym94X19odG1sNXZpZGVvXCIgcGxheXNpbmxpbmUgY29udHJvbHMgY29udHJvbHNMaXN0PVwibm9kb3dubG9hZFwiIHBvc3Rlcj1cInt7cG9zdGVyfX1cIj5cXG4gIDxzb3VyY2Ugc3JjPVwie3tzcmN9fVwiIHR5cGU9XCJ7e2Zvcm1hdH19XCIgLz5Tb3JyeSwgeW91ciBicm93c2VyIGRvZXNuXFwndCBzdXBwb3J0IGVtYmVkZGVkIHZpZGVvcy48L3ZpZGVvPicsdmlkZW9Gb3JtYXQ6XCJcIix2aW1lbzp7YnlsaW5lOjEsY29sb3I6XCIwMGFkZWZcIixjb250cm9sczoxLGRudDoxLG11dGVkOjB9LHlvdXR1YmU6e2NvbnRyb2xzOjEsZW5hYmxlanNhcGk6MSxub2Nvb2tpZToxLHJlbDowLGZzOjF9fSxBdD1bXCJpbWFnZVwiLFwiaHRtbFwiLFwiYWpheFwiLFwiaW5saW5lXCIsXCJjbG9uZVwiLFwiaWZyYW1lXCIsXCJtYXBcIixcInBkZlwiLFwiaHRtbDV2aWRlb1wiLFwieW91dHViZVwiLFwidmltZW9cIl07Y2xhc3MgTHQgZXh0ZW5kcyBfe29uQmVmb3JlSW5pdFNsaWRlKHQsZSxpKXt0aGlzLnByb2Nlc3NUeXBlKGkpfW9uQ3JlYXRlU2xpZGUodCxlLGkpe3RoaXMuc2V0Q29udGVudChpKX1vbkNsZWFyQ29udGVudCh0LGUpe2UueGhyJiYoZS54aHIuYWJvcnQoKSxlLnhocj1udWxsKTtjb25zdCBpPWUuaWZyYW1lRWw7aSYmKGkub25sb2FkPWkub25lcnJvcj1udWxsLGkuc3JjPVwiLy9hYm91dDpibGFua1wiLGUuaWZyYW1lRWw9bnVsbCk7Y29uc3Qgbj1lLmNvbnRlbnRFbCxzPWUucGxhY2Vob2xkZXJFbDtpZihcImlubGluZVwiPT09ZS50eXBlJiZuJiZzKW4uY2xhc3NMaXN0LnJlbW92ZShcImZhbmN5Ym94X19jb250ZW50XCIpLFwibm9uZVwiIT09bi5zdHlsZS5kaXNwbGF5JiYobi5zdHlsZS5kaXNwbGF5PVwibm9uZVwiKSxzLnBhcmVudE5vZGUmJnMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUobixzKSxzLnJlbW92ZSgpLGUuY29udGVudEVsPXZvaWQgMCxlLnBsYWNlaG9sZGVyRWw9dm9pZCAwO2Vsc2UgZm9yKDtlLmVsJiZlLmVsLmZpcnN0Q2hpbGQ7KWUuZWwucmVtb3ZlQ2hpbGQoZS5lbC5maXJzdENoaWxkKX1vblNlbGVjdFNsaWRlKHQsZSxpKXtpLnN0YXRlPT09bHQuUmVhZHkmJnRoaXMucGxheVZpZGVvKCl9b25VbnNlbGVjdFNsaWRlKHQsZSxpKXt2YXIgbixzO2lmKGkudHlwZT09PVR0KXt0cnl7bnVsbD09PShzPW51bGw9PT0obj1pLmVsKXx8dm9pZCAwPT09bj92b2lkIDA6bi5xdWVyeVNlbGVjdG9yKFwidmlkZW9cIikpfHx2b2lkIDA9PT1zfHxzLnBhdXNlKCl9Y2F0Y2godCl7fXJldHVybn1sZXQgbztpLnR5cGU9PT1DdD9vPXttZXRob2Q6XCJwYXVzZVwiLHZhbHVlOlwidHJ1ZVwifTppLnR5cGU9PT1QdCYmKG89e2V2ZW50OlwiY29tbWFuZFwiLGZ1bmM6XCJwYXVzZVZpZGVvXCJ9KSxvJiZpLmlmcmFtZUVsJiZpLmlmcmFtZUVsLmNvbnRlbnRXaW5kb3cmJmkuaWZyYW1lRWwuY29udGVudFdpbmRvdy5wb3N0TWVzc2FnZShKU09OLnN0cmluZ2lmeShvKSxcIipcIiksaS5wb2xsZXImJmNsZWFyVGltZW91dChpLnBvbGxlcil9b25Eb25lKHQsZSl7dC5pc0N1cnJlbnRTbGlkZShlKSYmIXQuaXNDbG9zaW5nKCkmJnRoaXMucGxheVZpZGVvKCl9b25SZWZyZXNoKHQsZSl7ZS5zbGlkZXMuZm9yRWFjaCgodD0+e3QuZWwmJih0aGlzLnJlc2l6ZUlmcmFtZSh0KSx0aGlzLnNldEFzcGVjdFJhdGlvKHQpKX0pKX1vbk1lc3NhZ2UodCl7dHJ5e2xldCBlPUpTT04ucGFyc2UodC5kYXRhKTtpZihcImh0dHBzOi8vcGxheWVyLnZpbWVvLmNvbVwiPT09dC5vcmlnaW4pe2lmKFwicmVhZHlcIj09PWUuZXZlbnQpZm9yKGxldCBlIG9mIEFycmF5LmZyb20oZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImZhbmN5Ym94X19pZnJhbWVcIikpKWUgaW5zdGFuY2VvZiBIVE1MSUZyYW1lRWxlbWVudCYmZS5jb250ZW50V2luZG93PT09dC5zb3VyY2UmJihlLmRhdGFzZXQucmVhZHk9XCJ0cnVlXCIpfWVsc2UgaWYodC5vcmlnaW4ubWF0Y2goL15odHRwczpcXC9cXC8od3d3Lik/eW91dHViZSgtbm9jb29raWUpPy5jb20kLykmJlwib25SZWFkeVwiPT09ZS5ldmVudCl7Y29uc3QgdD1kb2N1bWVudC5nZXRFbGVtZW50QnlJZChlLmlkKTt0JiYodC5kYXRhc2V0LnJlYWR5PVwidHJ1ZVwiKX19Y2F0Y2godCl7fX1sb2FkQWpheENvbnRlbnQodCl7Y29uc3QgZT10aGlzLmluc3RhbmNlLm9wdGlvbkZvcih0LFwic3JjXCIpfHxcIlwiO3RoaXMuaW5zdGFuY2Uuc2hvd0xvYWRpbmcodCk7Y29uc3QgaT10aGlzLmluc3RhbmNlLG49bmV3IFhNTEh0dHBSZXF1ZXN0O2kuc2hvd0xvYWRpbmcodCksbi5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKXtuLnJlYWR5U3RhdGU9PT1YTUxIdHRwUmVxdWVzdC5ET05FJiZpLnN0YXRlPT09cnQuUmVhZHkmJihpLmhpZGVMb2FkaW5nKHQpLDIwMD09PW4uc3RhdHVzP2kuc2V0Q29udGVudCh0LG4ucmVzcG9uc2VUZXh0KTppLnNldEVycm9yKHQsNDA0PT09bi5zdGF0dXM/XCJ7e0FKQVhfTk9UX0ZPVU5EfX1cIjpcInt7QUpBWF9GT1JCSURERU59fVwiKSl9O2NvbnN0IHM9dC5hamF4fHxudWxsO24ub3BlbihzP1wiUE9TVFwiOlwiR0VUXCIsZStcIlwiKSxuLnNldFJlcXVlc3RIZWFkZXIoXCJDb250ZW50LVR5cGVcIixcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZFwiKSxuLnNldFJlcXVlc3RIZWFkZXIoXCJYLVJlcXVlc3RlZC1XaXRoXCIsXCJYTUxIdHRwUmVxdWVzdFwiKSxuLnNlbmQocyksdC54aHI9bn1zZXRJbmxpbmVDb250ZW50KHQpe2xldCBlPW51bGw7aWYoUyh0LnNyYykpZT10LnNyYztlbHNlIGlmKFwic3RyaW5nXCI9PXR5cGVvZiB0LnNyYyl7Y29uc3QgaT10LnNyYy5zcGxpdChcIiNcIiwyKS5wb3AoKTtlPWk/ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaSk6bnVsbH1pZihlKXtpZihcImNsb25lXCI9PT10LnR5cGV8fGUuY2xvc2VzdChcIi5mYW5jeWJveF9fc2xpZGVcIikpe2U9ZS5jbG9uZU5vZGUoITApO2NvbnN0IGk9ZS5kYXRhc2V0LmFuaW1hdGlvbk5hbWU7aSYmKGUuY2xhc3NMaXN0LnJlbW92ZShpKSxkZWxldGUgZS5kYXRhc2V0LmFuaW1hdGlvbk5hbWUpO2xldCBuPWUuZ2V0QXR0cmlidXRlKFwiaWRcIik7bj1uP2Ake259LS1jbG9uZWA6YGNsb25lLSR7dGhpcy5pbnN0YW5jZS5pZH0tJHt0LmluZGV4fWAsZS5zZXRBdHRyaWJ1dGUoXCJpZFwiLG4pfWVsc2UgaWYoZS5wYXJlbnROb2RlKXtjb25zdCBpPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7aS5jbGFzc0xpc3QuYWRkKFwiZmFuY3lib3gtcGxhY2Vob2xkZXJcIiksZS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShpLGUpLHQucGxhY2Vob2xkZXJFbD1pfXRoaXMuaW5zdGFuY2Uuc2V0Q29udGVudCh0LGUpfWVsc2UgdGhpcy5pbnN0YW5jZS5zZXRFcnJvcih0LFwie3tFTEVNRU5UX05PVF9GT1VORH19XCIpfXNldElmcmFtZUNvbnRlbnQodCl7Y29uc3R7c3JjOmUsZWw6aX09dDtpZighZXx8XCJzdHJpbmdcIiE9dHlwZW9mIGV8fCFpKXJldHVybjtpLmNsYXNzTGlzdC5hZGQoXCJpcy1sb2FkaW5nXCIpO2NvbnN0IG49dGhpcy5pbnN0YW5jZSxzPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpZnJhbWVcIik7cy5jbGFzc05hbWU9XCJmYW5jeWJveF9faWZyYW1lXCIscy5zZXRBdHRyaWJ1dGUoXCJpZFwiLGBmYW5jeWJveF9faWZyYW1lXyR7bi5pZH1fJHt0LmluZGV4fWApO2Zvcihjb25zdFtlLGldb2YgT2JqZWN0LmVudHJpZXModGhpcy5vcHRpb25Gb3IodCxcImlmcmFtZUF0dHJcIil8fHt9KSlzLnNldEF0dHJpYnV0ZShlLGkpO3Mub25lcnJvcj0oKT0+e24uc2V0RXJyb3IodCxcInt7SUZSQU1FX0VSUk9SfX1cIil9LHQuaWZyYW1lRWw9cztjb25zdCBvPXRoaXMub3B0aW9uRm9yKHQsXCJwcmVsb2FkXCIpO2lmKFwiaWZyYW1lXCIhPT10LnR5cGV8fCExPT09bylyZXR1cm4gcy5zZXRBdHRyaWJ1dGUoXCJzcmNcIix0LnNyYytcIlwiKSxuLnNldENvbnRlbnQodCxzLCExKSx0aGlzLnJlc2l6ZUlmcmFtZSh0KSx2b2lkIG4ucmV2ZWFsQ29udGVudCh0KTtuLnNob3dMb2FkaW5nKHQpLHMub25sb2FkPSgpPT57aWYoIXMuc3JjLmxlbmd0aClyZXR1cm47Y29uc3QgZT1cInRydWVcIiE9PXMuZGF0YXNldC5yZWFkeTtzLmRhdGFzZXQucmVhZHk9XCJ0cnVlXCIsdGhpcy5yZXNpemVJZnJhbWUodCksZT9uLnJldmVhbENvbnRlbnQodCk6bi5oaWRlTG9hZGluZyh0KX0scy5zZXRBdHRyaWJ1dGUoXCJzcmNcIixlKSxuLnNldENvbnRlbnQodCxzLCExKX1yZXNpemVJZnJhbWUodCl7Y29uc3R7dHlwZTplLGlmcmFtZUVsOml9PXQ7aWYoZT09PVB0fHxlPT09Q3QpcmV0dXJuO2NvbnN0IG49bnVsbD09aT92b2lkIDA6aS5wYXJlbnRFbGVtZW50O2lmKCFpfHwhbilyZXR1cm47bGV0IHM9dC5hdXRvU2l6ZTt2b2lkIDA9PT1zJiYocz10aGlzLm9wdGlvbkZvcih0LFwiYXV0b1NpemVcIikpO2xldCBvPXQud2lkdGh8fDAsYT10LmhlaWdodHx8MDtvJiZhJiYocz0hMSk7Y29uc3Qgcj1uJiZuLnN0eWxlO2lmKCExIT09dC5wcmVsb2FkJiYhMSE9PXMmJnIpdHJ5e2NvbnN0IHQ9d2luZG93LmdldENvbXB1dGVkU3R5bGUobiksZT1wYXJzZUZsb2F0KHQucGFkZGluZ0xlZnQpK3BhcnNlRmxvYXQodC5wYWRkaW5nUmlnaHQpLHM9cGFyc2VGbG9hdCh0LnBhZGRpbmdUb3ApK3BhcnNlRmxvYXQodC5wYWRkaW5nQm90dG9tKSxsPWkuY29udGVudFdpbmRvdztpZihsKXtjb25zdCB0PWwuZG9jdW1lbnQsaT10LmdldEVsZW1lbnRzQnlUYWdOYW1lKHh0KVswXSxuPXQuYm9keTtyLndpZHRoPVwiXCIsbi5zdHlsZS5vdmVyZmxvdz1cImhpZGRlblwiLG89b3x8aS5zY3JvbGxXaWR0aCtlLHIud2lkdGg9YCR7b31weGAsbi5zdHlsZS5vdmVyZmxvdz1cIlwiLHIuZmxleD1cIjAgMCBhdXRvXCIsci5oZWlnaHQ9YCR7bi5zY3JvbGxIZWlnaHR9cHhgLGE9aS5zY3JvbGxIZWlnaHQrc319Y2F0Y2godCl7fWlmKG98fGEpe2NvbnN0IHQ9e2ZsZXg6XCIwIDEgYXV0b1wiLHdpZHRoOlwiXCIsaGVpZ2h0OlwiXCJ9O28mJlwiYXV0b1wiIT09byYmKHQud2lkdGg9YCR7b31weGApLGEmJlwiYXV0b1wiIT09YSYmKHQuaGVpZ2h0PWAke2F9cHhgKSxPYmplY3QuYXNzaWduKHIsdCl9fXBsYXlWaWRlbygpe2NvbnN0IHQ9dGhpcy5pbnN0YW5jZS5nZXRTbGlkZSgpO2lmKCF0KXJldHVybjtjb25zdHtlbDplfT10O2lmKCFlfHwhZS5vZmZzZXRQYXJlbnQpcmV0dXJuO2lmKCF0aGlzLm9wdGlvbkZvcih0LFwidmlkZW9BdXRvcGxheVwiKSlyZXR1cm47aWYodC50eXBlPT09VHQpdHJ5e2NvbnN0IHQ9ZS5xdWVyeVNlbGVjdG9yKFwidmlkZW9cIik7aWYodCl7Y29uc3QgZT10LnBsYXkoKTt2b2lkIDAhPT1lJiZlLnRoZW4oKCgpPT57fSkpLmNhdGNoKChlPT57dC5tdXRlZD0hMCx0LnBsYXkoKX0pKX19Y2F0Y2godCl7fWlmKHQudHlwZSE9PVB0JiZ0LnR5cGUhPT1DdClyZXR1cm47Y29uc3QgaT0oKT0+e2lmKHQuaWZyYW1lRWwmJnQuaWZyYW1lRWwuY29udGVudFdpbmRvdyl7bGV0IGU7aWYoXCJ0cnVlXCI9PT10LmlmcmFtZUVsLmRhdGFzZXQucmVhZHkpcmV0dXJuIGU9dC50eXBlPT09UHQ/e2V2ZW50OlwiY29tbWFuZFwiLGZ1bmM6XCJwbGF5VmlkZW9cIn06e21ldGhvZDpcInBsYXlcIix2YWx1ZTpcInRydWVcIn0sZSYmdC5pZnJhbWVFbC5jb250ZW50V2luZG93LnBvc3RNZXNzYWdlKEpTT04uc3RyaW5naWZ5KGUpLFwiKlwiKSx2b2lkKHQucG9sbGVyPXZvaWQgMCk7dC50eXBlPT09UHQmJihlPXtldmVudDpcImxpc3RlbmluZ1wiLGlkOnQuaWZyYW1lRWwuZ2V0QXR0cmlidXRlKFwiaWRcIil9LHQuaWZyYW1lRWwuY29udGVudFdpbmRvdy5wb3N0TWVzc2FnZShKU09OLnN0cmluZ2lmeShlKSxcIipcIikpfXQucG9sbGVyPXNldFRpbWVvdXQoaSwyNTApfTtpKCl9cHJvY2Vzc1R5cGUodCl7aWYodC5odG1sKXJldHVybiB0LnR5cGU9eHQsdC5zcmM9dC5odG1sLHZvaWQodC5odG1sPVwiXCIpO2NvbnN0IGU9dGhpcy5pbnN0YW5jZS5vcHRpb25Gb3IodCxcInNyY1wiLFwiXCIpO2lmKCFlfHxcInN0cmluZ1wiIT10eXBlb2YgZSlyZXR1cm47bGV0IGk9dC50eXBlLG49bnVsbDtpZihuPWUubWF0Y2goLyh5b3V0dWJlXFwuY29tfHlvdXR1XFwuYmV8eW91dHViZVxcLW5vY29va2llXFwuY29tKVxcLyg/OndhdGNoXFw/KD86LiomKT92PXx2XFwvfHVcXC98c2hvcnRzXFwvfGVtYmVkXFwvPyk/KHZpZGVvc2VyaWVzXFw/bGlzdD0oPzouKil8W1xcdy1dezExfXxcXD9saXN0VHlwZT0oPzouKikmbGlzdD0oPzouKikpKD86LiopL2kpKXtjb25zdCBzPXRoaXMub3B0aW9uRm9yKHQsUHQpLHtub2Nvb2tpZTpvfT1zLGE9ZnVuY3Rpb24odCxlKXt2YXIgaT17fTtmb3IodmFyIG4gaW4gdClPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxuKSYmZS5pbmRleE9mKG4pPDAmJihpW25dPXRbbl0pO2lmKG51bGwhPXQmJlwiZnVuY3Rpb25cIj09dHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpe3ZhciBzPTA7Zm9yKG49T2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyh0KTtzPG4ubGVuZ3RoO3MrKyllLmluZGV4T2YobltzXSk8MCYmT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKHQsbltzXSkmJihpW25bc11dPXRbbltzXV0pfXJldHVybiBpfShzLFtcIm5vY29va2llXCJdKSxyPWB3d3cueW91dHViZSR7bz9cIi1ub2Nvb2tpZVwiOlwiXCJ9LmNvbWAsbD1NdChlLGEpLGM9ZW5jb2RlVVJJQ29tcG9uZW50KG5bMl0pO3QudmlkZW9JZD1jLHQuc3JjPWBodHRwczovLyR7cn0vZW1iZWQvJHtjfT8ke2x9YCx0LnRodW1iU3JjPXQudGh1bWJTcmN8fGBodHRwczovL2kueXRpbWcuY29tL3ZpLyR7Y30vbXFkZWZhdWx0LmpwZ2AsaT1QdH1lbHNlIGlmKG49ZS5tYXRjaCgvXi4rdmltZW8uY29tXFwvKD86XFwvKT8oW1xcZF0rKSgoXFwvfFxcP2g9KShbYS16MC05XSspKT8oLiopPy8pKXtjb25zdCBzPU10KGUsdGhpcy5vcHRpb25Gb3IodCxDdCkpLG89ZW5jb2RlVVJJQ29tcG9uZW50KG5bMV0pLGE9bls0XXx8XCJcIjt0LnZpZGVvSWQ9byx0LnNyYz1gaHR0cHM6Ly9wbGF5ZXIudmltZW8uY29tL3ZpZGVvLyR7b30/JHthP2BoPSR7YX0ke3M/XCImXCI6XCJcIn1gOlwiXCJ9JHtzfWAsaT1DdH1pZighaSYmdC50cmlnZ2VyRWwpe2NvbnN0IGU9dC50cmlnZ2VyRWwuZGF0YXNldC50eXBlO0F0LmluY2x1ZGVzKGUpJiYoaT1lKX1pfHxcInN0cmluZ1wiPT10eXBlb2YgZSYmKFwiI1wiPT09ZS5jaGFyQXQoMCk/aT1cImlubGluZVwiOihuPWUubWF0Y2goL1xcLihtcDR8bW92fG9ndnx3ZWJtKSgoXFw/fCMpLiopPyQvaSkpPyhpPVR0LHQudmlkZW9Gb3JtYXQ9dC52aWRlb0Zvcm1hdHx8XCJ2aWRlby9cIisoXCJvZ3ZcIj09PW5bMV0/XCJvZ2dcIjpuWzFdKSk6ZS5tYXRjaCgvKF5kYXRhOmltYWdlXFwvW2EtejAtOStcXC89XSosKXwoXFwuKGpwKGV8Z3xlZyl8Z2lmfHBuZ3xibXB8d2VicHxzdmd8aWNvKSgoXFw/fCMpLiopPyQpL2kpP2k9RXQ6ZS5tYXRjaCgvXFwuKHBkZikoKFxcP3wjKS4qKT8kL2kpJiYoaT1cInBkZlwiKSksKG49ZS5tYXRjaCgvKD86bWFwc1xcLik/Z29vZ2xlXFwuKFthLXpdezIsM30oPzpcXC5bYS16XXsyfSk/KVxcLyg/Oig/Oig/Om1hcHNcXC8oPzpwbGFjZVxcLyg/Oi4qKVxcLyk/XFxAKC4qKSwoXFxkKy4/XFxkKz8peikpfCg/OlxcP2xsPSkpKC4qKT8vaSkpPyh0LnNyYz1gaHR0cHM6Ly9tYXBzLmdvb2dsZS4ke25bMV19Lz9sbD0keyhuWzJdP25bMl0rXCImej1cIitNYXRoLmZsb29yKHBhcnNlRmxvYXQoblszXSkpKyhuWzRdP25bNF0ucmVwbGFjZSgvXlxcLy8sXCImXCIpOlwiXCIpOm5bNF0rXCJcIikucmVwbGFjZSgvXFw/LyxcIiZcIil9Jm91dHB1dD0ke25bNF0mJm5bNF0uaW5kZXhPZihcImxheWVyPWNcIik+MD9cInN2ZW1iZWRcIjpcImVtYmVkXCJ9YCxpPVN0KToobj1lLm1hdGNoKC8oPzptYXBzXFwuKT9nb29nbGVcXC4oW2Etel17MiwzfSg/OlxcLlthLXpdezJ9KT8pXFwvKD86bWFwc1xcL3NlYXJjaFxcLykoLiopL2kpKSYmKHQuc3JjPWBodHRwczovL21hcHMuZ29vZ2xlLiR7blsxXX0vbWFwcz9xPSR7blsyXS5yZXBsYWNlKFwicXVlcnk9XCIsXCJxPVwiKS5yZXBsYWNlKFwiYXBpPTFcIixcIlwiKX0mb3V0cHV0PWVtYmVkYCxpPVN0KSxpPWl8fHRoaXMuaW5zdGFuY2Uub3B0aW9uKFwiZGVmYXVsdFR5cGVcIiksdC50eXBlPWksaT09PUV0JiYodC50aHVtYlNyYz10LnRodW1iU3JjfHx0LnNyYyl9c2V0Q29udGVudCh0KXtjb25zdCBlPXRoaXMuaW5zdGFuY2Uub3B0aW9uRm9yKHQsXCJzcmNcIil8fFwiXCI7aWYodCYmdC50eXBlJiZlKXtzd2l0Y2godC50eXBlKXtjYXNlIHh0OnRoaXMuaW5zdGFuY2Uuc2V0Q29udGVudCh0LGUpO2JyZWFrO2Nhc2UgVHQ6Y29uc3QgaT10aGlzLm9wdGlvbihcInZpZGVvVHBsXCIpO2kmJnRoaXMuaW5zdGFuY2Uuc2V0Q29udGVudCh0LGkucmVwbGFjZSgvXFx7XFx7c3JjXFx9XFx9L2dpLGUrXCJcIikucmVwbGFjZSgvXFx7XFx7Zm9ybWF0XFx9XFx9L2dpLHRoaXMub3B0aW9uRm9yKHQsXCJ2aWRlb0Zvcm1hdFwiKXx8XCJcIikucmVwbGFjZSgvXFx7XFx7cG9zdGVyXFx9XFx9L2dpLHQucG9zdGVyfHx0LnRodW1iU3JjfHxcIlwiKSk7YnJlYWs7Y2FzZVwiaW5saW5lXCI6Y2FzZVwiY2xvbmVcIjp0aGlzLnNldElubGluZUNvbnRlbnQodCk7YnJlYWs7Y2FzZVwiYWpheFwiOnRoaXMubG9hZEFqYXhDb250ZW50KHQpO2JyZWFrO2Nhc2VcInBkZlwiOmNhc2UgU3Q6Y2FzZSBQdDpjYXNlIEN0OnQucHJlbG9hZD0hMTtjYXNlXCJpZnJhbWVcIjp0aGlzLnNldElmcmFtZUNvbnRlbnQodCl9dGhpcy5zZXRBc3BlY3RSYXRpbyh0KX19c2V0QXNwZWN0UmF0aW8odCl7Y29uc3QgZT10LmNvbnRlbnRFbDtpZighKHQuZWwmJmUmJnQudHlwZSYmW1B0LEN0LFR0XS5pbmNsdWRlcyh0LnR5cGUpKSlyZXR1cm47bGV0IGksbj10LndpZHRofHxcImF1dG9cIixzPXQuaGVpZ2h0fHxcImF1dG9cIjtpZihcImF1dG9cIj09PW58fFwiYXV0b1wiPT09cyl7aT10aGlzLm9wdGlvbkZvcih0LFwidmlkZW9SYXRpb1wiKTtjb25zdCBlPShpK1wiXCIpLm1hdGNoKC8oXFxkKylcXHMqXFwvXFxzPyhcXGQrKS8pO2k9ZSYmZS5sZW5ndGg+Mj9wYXJzZUZsb2F0KGVbMV0pL3BhcnNlRmxvYXQoZVsyXSk6cGFyc2VGbG9hdChpK1wiXCIpfWVsc2UgbiYmcyYmKGk9bi9zKTtpZighaSlyZXR1cm47ZS5zdHlsZS5hc3BlY3RSYXRpbz1cIlwiLGUuc3R5bGUud2lkdGg9XCJcIixlLnN0eWxlLmhlaWdodD1cIlwiLGUub2Zmc2V0SGVpZ2h0O2NvbnN0IG89ZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxhPW8ud2lkdGh8fDEscj1vLmhlaWdodHx8MTtlLnN0eWxlLmFzcGVjdFJhdGlvPWkrXCJcIixpPGEvcj8ocz1cImF1dG9cIj09PXM/cjpNYXRoLm1pbihyLHMpLGUuc3R5bGUud2lkdGg9XCJhdXRvXCIsZS5zdHlsZS5oZWlnaHQ9YCR7c31weGApOihuPVwiYXV0b1wiPT09bj9hOk1hdGgubWluKGEsbiksZS5zdHlsZS53aWR0aD1gJHtufXB4YCxlLnN0eWxlLmhlaWdodD1cImF1dG9cIil9YXR0YWNoKCl7Y29uc3QgdD10aGlzLGU9dC5pbnN0YW5jZTtlLm9uKFwiQ2Fyb3VzZWwuYmVmb3JlSW5pdFNsaWRlXCIsdC5vbkJlZm9yZUluaXRTbGlkZSksZS5vbihcIkNhcm91c2VsLmNyZWF0ZVNsaWRlXCIsdC5vbkNyZWF0ZVNsaWRlKSxlLm9uKFwiQ2Fyb3VzZWwuc2VsZWN0U2xpZGVcIix0Lm9uU2VsZWN0U2xpZGUpLGUub24oXCJDYXJvdXNlbC51bnNlbGVjdFNsaWRlXCIsdC5vblVuc2VsZWN0U2xpZGUpLGUub24oXCJDYXJvdXNlbC5QYW56b29tLnJlZnJlc2hcIix0Lm9uUmVmcmVzaCksZS5vbihcImRvbmVcIix0Lm9uRG9uZSksZS5vbihcImNsZWFyQ29udGVudFwiLHQub25DbGVhckNvbnRlbnQpLHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLHQub25NZXNzYWdlKX1kZXRhY2goKXtjb25zdCB0PXRoaXMsZT10Lmluc3RhbmNlO2Uub2ZmKFwiQ2Fyb3VzZWwuYmVmb3JlSW5pdFNsaWRlXCIsdC5vbkJlZm9yZUluaXRTbGlkZSksZS5vZmYoXCJDYXJvdXNlbC5jcmVhdGVTbGlkZVwiLHQub25DcmVhdGVTbGlkZSksZS5vZmYoXCJDYXJvdXNlbC5zZWxlY3RTbGlkZVwiLHQub25TZWxlY3RTbGlkZSksZS5vZmYoXCJDYXJvdXNlbC51bnNlbGVjdFNsaWRlXCIsdC5vblVuc2VsZWN0U2xpZGUpLGUub2ZmKFwiQ2Fyb3VzZWwuUGFuem9vbS5yZWZyZXNoXCIsdC5vblJlZnJlc2gpLGUub2ZmKFwiZG9uZVwiLHQub25Eb25lKSxlLm9mZihcImNsZWFyQ29udGVudFwiLHQub25DbGVhckNvbnRlbnQpLHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLHQub25NZXNzYWdlKX19T2JqZWN0LmRlZmluZVByb3BlcnR5KEx0LFwiZGVmYXVsdHNcIix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6T3R9KTtjb25zdCB6dD1cInBsYXlcIixSdD1cInBhdXNlXCIsa3Q9XCJyZWFkeVwiO2NsYXNzIEl0IGV4dGVuZHMgX3tjb25zdHJ1Y3Rvcigpe3N1cGVyKC4uLmFyZ3VtZW50cyksT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJzdGF0ZVwiLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTprdH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwiaW5Ib3ZlclwiLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTohMX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwidGltZXJcIix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6bnVsbH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwicHJvZ3Jlc3NCYXJcIix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6bnVsbH0pfWdldCBpc0FjdGl2ZSgpe3JldHVybiB0aGlzLnN0YXRlIT09a3R9b25SZWFkeSh0KXt0aGlzLm9wdGlvbihcImF1dG9TdGFydFwiKSYmKHQuaXNJbmZpbml0ZXx8dC5wYWdlPHQucGFnZXMubGVuZ3RoLTEpJiZ0aGlzLnN0YXJ0KCl9b25DaGFuZ2UoKXt0aGlzLnJlbW92ZVByb2dyZXNzQmFyKCksdGhpcy5wYXVzZSgpfW9uU2V0dGxlKCl7dGhpcy5yZXN1bWUoKX1vblZpc2liaWxpdHlDaGFuZ2UoKXtcInZpc2libGVcIj09PWRvY3VtZW50LnZpc2liaWxpdHlTdGF0ZT90aGlzLnJlc3VtZSgpOnRoaXMucGF1c2UoKX1vbk1vdXNlRW50ZXIoKXt0aGlzLmluSG92ZXI9ITAsdGhpcy5wYXVzZSgpfW9uTW91c2VMZWF2ZSgpe3ZhciB0O3RoaXMuaW5Ib3Zlcj0hMSwobnVsbD09PSh0PXRoaXMuaW5zdGFuY2UucGFuem9vbSl8fHZvaWQgMD09PXQ/dm9pZCAwOnQuaXNSZXN0aW5nKSYmdGhpcy5yZXN1bWUoKX1vblRpbWVyRW5kKCl7Y29uc3QgdD10aGlzLmluc3RhbmNlO1wicGxheVwiPT09dGhpcy5zdGF0ZSYmKHQuaXNJbmZpbml0ZXx8dC5wYWdlIT09dC5wYWdlcy5sZW5ndGgtMT90LnNsaWRlTmV4dCgpOnQuc2xpZGVUbygwKSl9cmVtb3ZlUHJvZ3Jlc3NCYXIoKXt0aGlzLnByb2dyZXNzQmFyJiYodGhpcy5wcm9ncmVzc0Jhci5yZW1vdmUoKSx0aGlzLnByb2dyZXNzQmFyPW51bGwpfWNyZWF0ZVByb2dyZXNzQmFyKCl7dmFyIHQ7aWYoIXRoaXMub3B0aW9uKFwic2hvd1Byb2dyZXNzXCIpKXJldHVybiBudWxsO3RoaXMucmVtb3ZlUHJvZ3Jlc3NCYXIoKTtjb25zdCBlPXRoaXMuaW5zdGFuY2UsaT0obnVsbD09PSh0PWUucGFnZXNbZS5wYWdlXSl8fHZvaWQgMD09PXQ/dm9pZCAwOnQuc2xpZGVzKXx8W107bGV0IG49dGhpcy5vcHRpb24oXCJwcm9ncmVzc1BhcmVudEVsXCIpO2lmKG58fChuPSgxPT09aS5sZW5ndGg/aVswXS5lbDpudWxsKXx8ZS52aWV3cG9ydCksIW4pcmV0dXJuIG51bGw7Y29uc3Qgcz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO3JldHVybiBDKHMsXCJmLXByb2dyZXNzXCIpLG4ucHJlcGVuZChzKSx0aGlzLnByb2dyZXNzQmFyPXMscy5vZmZzZXRIZWlnaHQsc31zZXQoKXtjb25zdCB0PXRoaXMsZT10Lmluc3RhbmNlO2lmKGUucGFnZXMubGVuZ3RoPDIpcmV0dXJuO2lmKHQudGltZXIpcmV0dXJuO2NvbnN0IGk9dC5vcHRpb24oXCJ0aW1lb3V0XCIpO3Quc3RhdGU9enQsQyhlLmNvbnRhaW5lcixcImhhcy1hdXRvcGxheVwiKTtsZXQgbj10LmNyZWF0ZVByb2dyZXNzQmFyKCk7biYmKG4uc3R5bGUudHJhbnNpdGlvbkR1cmF0aW9uPWAke2l9bXNgLG4uc3R5bGUudHJhbnNmb3JtPVwic2NhbGVYKDEpXCIpLHQudGltZXI9c2V0VGltZW91dCgoKCk9Pnt0LnRpbWVyPW51bGwsdC5pbkhvdmVyfHx0Lm9uVGltZXJFbmQoKX0pLGkpLHQuZW1pdChcInNldFwiKX1jbGVhcigpe2NvbnN0IHQ9dGhpczt0LnRpbWVyJiYoY2xlYXJUaW1lb3V0KHQudGltZXIpLHQudGltZXI9bnVsbCksdC5yZW1vdmVQcm9ncmVzc0JhcigpfXN0YXJ0KCl7Y29uc3QgdD10aGlzO2lmKHQuc2V0KCksdC5zdGF0ZSE9PWt0KXtpZih0Lm9wdGlvbihcInBhdXNlT25Ib3ZlclwiKSl7Y29uc3QgZT10Lmluc3RhbmNlLmNvbnRhaW5lcjtlLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWVudGVyXCIsdC5vbk1vdXNlRW50ZXIsITEpLGUuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbGVhdmVcIix0Lm9uTW91c2VMZWF2ZSwhMSl9ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInZpc2liaWxpdHljaGFuZ2VcIix0Lm9uVmlzaWJpbGl0eUNoYW5nZSwhMSksdC5lbWl0KFwic3RhcnRcIil9fXN0b3AoKXtjb25zdCB0PXRoaXMsZT10LnN0YXRlLGk9dC5pbnN0YW5jZS5jb250YWluZXI7dC5jbGVhcigpLHQuc3RhdGU9a3QsaS5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2VlbnRlclwiLHQub25Nb3VzZUVudGVyLCExKSxpLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZWxlYXZlXCIsdC5vbk1vdXNlTGVhdmUsITEpLGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ2aXNpYmlsaXR5Y2hhbmdlXCIsdC5vblZpc2liaWxpdHlDaGFuZ2UsITEpLFAoaSxcImhhcy1hdXRvcGxheVwiKSxlIT09a3QmJnQuZW1pdChcInN0b3BcIil9cGF1c2UoKXtjb25zdCB0PXRoaXM7dC5zdGF0ZT09PXp0JiYodC5zdGF0ZT1SdCx0LmNsZWFyKCksdC5lbWl0KFJ0KSl9cmVzdW1lKCl7Y29uc3QgdD10aGlzLGU9dC5pbnN0YW5jZTtpZihlLmlzSW5maW5pdGV8fGUucGFnZSE9PWUucGFnZXMubGVuZ3RoLTEpaWYodC5zdGF0ZSE9PXp0KXtpZih0LnN0YXRlPT09UnQmJiF0LmluSG92ZXIpe2NvbnN0IGU9bmV3IEV2ZW50KFwicmVzdW1lXCIse2J1YmJsZXM6ITAsY2FuY2VsYWJsZTohMH0pO3QuZW1pdChcInJlc3VtZVwiLGUpLGUuZGVmYXVsdFByZXZlbnRlZHx8dC5zZXQoKX19ZWxzZSB0LnNldCgpO2Vsc2UgdC5zdG9wKCl9dG9nZ2xlKCl7dGhpcy5zdGF0ZT09PXp0fHx0aGlzLnN0YXRlPT09UnQ/dGhpcy5zdG9wKCk6dGhpcy5zdGFydCgpfWF0dGFjaCgpe2NvbnN0IHQ9dGhpcyxlPXQuaW5zdGFuY2U7ZS5vbihcInJlYWR5XCIsdC5vblJlYWR5KSxlLm9uKFwiUGFuem9vbS5zdGFydEFuaW1hdGlvblwiLHQub25DaGFuZ2UpLGUub24oXCJQYW56b29tLmVuZEFuaW1hdGlvblwiLHQub25TZXR0bGUpLGUub24oXCJQYW56b29tLnRvdWNoTW92ZVwiLHQub25DaGFuZ2UpfWRldGFjaCgpe2NvbnN0IHQ9dGhpcyxlPXQuaW5zdGFuY2U7ZS5vZmYoXCJyZWFkeVwiLHQub25SZWFkeSksZS5vZmYoXCJQYW56b29tLnN0YXJ0QW5pbWF0aW9uXCIsdC5vbkNoYW5nZSksZS5vZmYoXCJQYW56b29tLmVuZEFuaW1hdGlvblwiLHQub25TZXR0bGUpLGUub2ZmKFwiUGFuem9vbS50b3VjaE1vdmVcIix0Lm9uQ2hhbmdlKSx0LnN0b3AoKX19T2JqZWN0LmRlZmluZVByb3BlcnR5KEl0LFwiZGVmYXVsdHNcIix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6e2F1dG9TdGFydDohMCxwYXVzZU9uSG92ZXI6ITAscHJvZ3Jlc3NQYXJlbnRFbDpudWxsLHNob3dQcm9ncmVzczohMCx0aW1lb3V0OjNlM319KTtjbGFzcyBEdCBleHRlbmRzIF97Y29uc3RydWN0b3IoKXtzdXBlciguLi5hcmd1bWVudHMpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwicmVmXCIse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOm51bGx9KX1vblByZXBhcmUodCl7Y29uc3QgZT10LmNhcm91c2VsO2lmKCFlKXJldHVybjtjb25zdCBpPXQuY29udGFpbmVyO2kmJihlLm9wdGlvbnMuQXV0b3BsYXk9Zih7YXV0b1N0YXJ0OiExfSx0aGlzLm9wdGlvbihcIkF1dG9wbGF5XCIpfHx7fSx7cGF1c2VPbkhvdmVyOiExLHRpbWVvdXQ6dGhpcy5vcHRpb24oXCJ0aW1lb3V0XCIpLHByb2dyZXNzUGFyZW50RWw6KCk9PnRoaXMub3B0aW9uKFwicHJvZ3Jlc3NQYXJlbnRFbFwiKXx8bnVsbCxvbjp7c3RhcnQ6KCk9Pnt0LmVtaXQoXCJzdGFydFNsaWRlc2hvd1wiKX0sc2V0OmU9Pnt2YXIgbjtpLmNsYXNzTGlzdC5hZGQoXCJoYXMtc2xpZGVzaG93XCIpLChudWxsPT09KG49dC5nZXRTbGlkZSgpKXx8dm9pZCAwPT09bj92b2lkIDA6bi5zdGF0ZSkhPT1sdC5SZWFkeSYmZS5wYXVzZSgpfSxzdG9wOigpPT57aS5jbGFzc0xpc3QucmVtb3ZlKFwiaGFzLXNsaWRlc2hvd1wiKSx0LmlzQ29tcGFjdHx8dC5lbmRJZGxlKCksdC5lbWl0KFwiZW5kU2xpZGVzaG93XCIpfSxyZXN1bWU6KGUsaSk9Pnt2YXIgbixzLG87IWl8fCFpLmNhbmNlbGFibGV8fChudWxsPT09KG49dC5nZXRTbGlkZSgpKXx8dm9pZCAwPT09bj92b2lkIDA6bi5zdGF0ZSk9PT1sdC5SZWFkeSYmKG51bGw9PT0obz1udWxsPT09KHM9dC5jYXJvdXNlbCl8fHZvaWQgMD09PXM/dm9pZCAwOnMucGFuem9vbSl8fHZvaWQgMD09PW8/dm9pZCAwOm8uaXNSZXN0aW5nKXx8aS5wcmV2ZW50RGVmYXVsdCgpfX19KSxlLmF0dGFjaFBsdWdpbnMoe0F1dG9wbGF5Okl0fSksdGhpcy5yZWY9ZS5wbHVnaW5zLkF1dG9wbGF5KX1vblJlYWR5KHQpe2NvbnN0IGU9dC5jYXJvdXNlbCxpPXRoaXMucmVmO2kmJmUmJnRoaXMub3B0aW9uKFwicGxheU9uU3RhcnRcIikmJihlLmlzSW5maW5pdGV8fGUucGFnZTxlLnBhZ2VzLmxlbmd0aC0xKSYmaS5zdGFydCgpfW9uRG9uZSh0LGUpe2NvbnN0IGk9dGhpcy5yZWYsbj10LmNhcm91c2VsO2lmKCFpfHwhbilyZXR1cm47Y29uc3Qgcz1lLnBhbnpvb207cyYmcy5vbihcInN0YXJ0QW5pbWF0aW9uXCIsKCgpPT57dC5pc0N1cnJlbnRTbGlkZShlKSYmaS5zdG9wKCl9KSksdC5pc0N1cnJlbnRTbGlkZShlKSYmaS5yZXN1bWUoKX1vbktleWRvd24odCxlKXt2YXIgaTtjb25zdCBuPXRoaXMucmVmO24mJmU9PT10aGlzLm9wdGlvbihcImtleVwiKSYmXCJCVVRUT05cIiE9PShudWxsPT09KGk9ZG9jdW1lbnQuYWN0aXZlRWxlbWVudCl8fHZvaWQgMD09PWk/dm9pZCAwOmkubm9kZU5hbWUpJiZuLnRvZ2dsZSgpfWF0dGFjaCgpe2NvbnN0IHQ9dGhpcyxlPXQuaW5zdGFuY2U7ZS5vbihcIkNhcm91c2VsLmluaXRcIix0Lm9uUHJlcGFyZSksZS5vbihcIkNhcm91c2VsLnJlYWR5XCIsdC5vblJlYWR5KSxlLm9uKFwiZG9uZVwiLHQub25Eb25lKSxlLm9uKFwia2V5ZG93blwiLHQub25LZXlkb3duKX1kZXRhY2goKXtjb25zdCB0PXRoaXMsZT10Lmluc3RhbmNlO2Uub2ZmKFwiQ2Fyb3VzZWwuaW5pdFwiLHQub25QcmVwYXJlKSxlLm9mZihcIkNhcm91c2VsLnJlYWR5XCIsdC5vblJlYWR5KSxlLm9mZihcImRvbmVcIix0Lm9uRG9uZSksZS5vZmYoXCJrZXlkb3duXCIsdC5vbktleWRvd24pfX1PYmplY3QuZGVmaW5lUHJvcGVydHkoRHQsXCJkZWZhdWx0c1wiLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTp7a2V5OlwiIFwiLHBsYXlPblN0YXJ0OiExLHByb2dyZXNzUGFyZW50RWw6dD0+e3ZhciBlO3JldHVybihudWxsPT09KGU9dC5pbnN0YW5jZS5jb250YWluZXIpfHx2b2lkIDA9PT1lP3ZvaWQgMDplLnF1ZXJ5U2VsZWN0b3IoXCIuZmFuY3lib3hfX3Rvb2xiYXIgW2RhdGEtZmFuY3lib3gtdG9nZ2xlLXNsaWRlc2hvd11cIikpfHx0Lmluc3RhbmNlLmNvbnRhaW5lcn0sdGltZW91dDozZTN9fSk7Y29uc3QgRnQ9e2NsYXNzZXM6e2NvbnRhaW5lcjpcImYtdGh1bWJzIGYtY2Fyb3VzZWxfX3RodW1ic1wiLHZpZXdwb3J0OlwiZi10aHVtYnNfX3ZpZXdwb3J0XCIsdHJhY2s6XCJmLXRodW1ic19fdHJhY2tcIixzbGlkZTpcImYtdGh1bWJzX19zbGlkZVwiLGlzUmVzdGluZzpcImlzLXJlc3RpbmdcIixpc1NlbGVjdGVkOlwiaXMtc2VsZWN0ZWRcIixpc0xvYWRpbmc6XCJpcy1sb2FkaW5nXCIsaGFzVGh1bWJzOlwiaGFzLXRodW1ic1wifSxtaW5Db3VudDoyLHBhcmVudEVsOm51bGwsdGh1bWJUcGw6JzxidXR0b24gY2xhc3M9XCJmLXRodW1ic19fc2xpZGVfX2J1dHRvblwiIHRhYmluZGV4PVwiMFwiIHR5cGU9XCJidXR0b25cIiBhcmlhLWxhYmVsPVwie3tHT1RPfX1cIiBkYXRhLWNhcm91c2VsLWluZGV4PVwiJWlcIj48aW1nIGNsYXNzPVwiZi10aHVtYnNfX3NsaWRlX19pbWdcIiBkYXRhLWxhenktc3JjPVwie3slc319XCIgYWx0PVwiXCIgLz48L2J1dHRvbj4nLHR5cGU6XCJtb2Rlcm5cIn07dmFyIGp0OyFmdW5jdGlvbih0KXt0W3QuSW5pdD0wXT1cIkluaXRcIix0W3QuUmVhZHk9MV09XCJSZWFkeVwiLHRbdC5IaWRkZW49Ml09XCJIaWRkZW5cIn0oanR8fChqdD17fSkpO2NvbnN0IEJ0PVwiaXNSZXN0aW5nXCIsSHQ9XCJ0aHVtYldpZHRoXCIsTnQ9XCJ0aHVtYkhlaWdodFwiLF90PVwidGh1bWJDbGlwV2lkdGhcIjtsZXQgJHQ9Y2xhc3MgZXh0ZW5kcyBfe2NvbnN0cnVjdG9yKCl7c3VwZXIoLi4uYXJndW1lbnRzKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxcInR5cGVcIix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6XCJtb2Rlcm5cIn0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwiY29udGFpbmVyXCIse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOm51bGx9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxcInRyYWNrXCIse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOm51bGx9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxcImNhcm91c2VsXCIse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOm51bGx9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxcInRodW1iV2lkdGhcIix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6MH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwidGh1bWJDbGlwV2lkdGhcIix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6MH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwidGh1bWJIZWlnaHRcIix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6MH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwidGh1bWJHYXBcIix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6MH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwidGh1bWJFeHRyYUdhcFwiLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTowfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJzdGF0ZVwiLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTpqdC5Jbml0fSl9Z2V0IGlzTW9kZXJuKCl7cmV0dXJuXCJtb2Rlcm5cIj09PXRoaXMudHlwZX1vbkluaXRTbGlkZSh0LGUpe2NvbnN0IGk9ZS5lbD9lLmVsLmRhdGFzZXQ6dm9pZCAwO2kmJihlLnRodW1iU3JjPWkudGh1bWJTcmN8fGUudGh1bWJTcmN8fFwiXCIsZVtfdF09cGFyc2VGbG9hdChpW190XXx8XCJcIil8fGVbX3RdfHwwLGVbTnRdPXBhcnNlRmxvYXQoaS50aHVtYkhlaWdodHx8XCJcIil8fGVbTnRdfHwwKSx0aGlzLmFkZFNsaWRlKGUpfW9uSW5pdFNsaWRlcygpe3RoaXMuYnVpbGQoKX1vbkNoYW5nZSgpe3ZhciB0O2lmKCF0aGlzLmlzTW9kZXJuKXJldHVybjtjb25zdCBlPXRoaXMuY29udGFpbmVyLGk9dGhpcy5pbnN0YW5jZSxuPWkucGFuem9vbSxzPXRoaXMuY2Fyb3VzZWwsbz1zP3MucGFuem9vbTpudWxsLHI9aS5wYWdlO2lmKG4mJnMmJm8pe2lmKG4uaXNEcmFnZ2luZyl7UChlLHRoaXMuY24oQnQpKTtsZXQgbj0obnVsbD09PSh0PXMucGFnZXNbcl0pfHx2b2lkIDA9PT10P3ZvaWQgMDp0LnBvcyl8fDA7bis9aS5nZXRQcm9ncmVzcyhyKSoodGhpc1tfdF0rdGhpcy50aHVtYkdhcCk7bGV0IGE9by5nZXRCb3VuZHMoKTstMSpuPmEueC5taW4mJi0xKm48YS54Lm1heCYmby5wYW5Ubyh7eDotMSpuLGZyaWN0aW9uOi4xMn0pfWVsc2UgYShlLHRoaXMuY24oQnQpLG4uaXNSZXN0aW5nKTt0aGlzLnNoaWZ0TW9kZXJuKCl9fW9uUmVmcmVzaCgpe3RoaXMudXBkYXRlUHJvcHMoKTtmb3IoY29uc3QgdCBvZiB0aGlzLmluc3RhbmNlLnNsaWRlc3x8W10pdGhpcy5yZXNpemVNb2Rlcm5TbGlkZSh0KTt0aGlzLnNoaWZ0TW9kZXJuKCl9aXNEaXNhYmxlZCgpe2NvbnN0IHQ9dGhpcy5vcHRpb24oXCJtaW5Db3VudFwiKXx8MDtpZih0KXtjb25zdCBlPXRoaXMuaW5zdGFuY2U7bGV0IGk9MDtmb3IoY29uc3QgdCBvZiBlLnNsaWRlc3x8W10pdC50aHVtYlNyYyYmaSsrO2lmKGk8dClyZXR1cm4hMH1jb25zdCBlPXRoaXMub3B0aW9uKFwidHlwZVwiKTtyZXR1cm5bXCJtb2Rlcm5cIixcImNsYXNzaWNcIl0uaW5kZXhPZihlKTwwfWdldFRodW1iKHQpe2NvbnN0IGU9dGhpcy5vcHRpb24oXCJ0aHVtYlRwbFwiKXx8XCJcIjtyZXR1cm57aHRtbDp0aGlzLmluc3RhbmNlLmxvY2FsaXplKGUsW1tcIiVpXCIsdC5pbmRleF0sW1wiJWRcIix0LmluZGV4KzFdLFtcIiVzXCIsdC50aHVtYlNyY3x8XCJkYXRhOmltYWdlL2dpZjtiYXNlNjQsUjBsR09EbGhBUUFCQUlBQUFBQUFBUC8vL3lINUJBRUFBQUFBTEFBQUFBQUJBQUVBQUFJQlJBQTdcIl1dKX19YWRkU2xpZGUodCl7Y29uc3QgZT10aGlzLmNhcm91c2VsO2UmJmUuYWRkU2xpZGUodC5pbmRleCx0aGlzLmdldFRodW1iKHQpKX1nZXRTbGlkZXMoKXtjb25zdCB0PVtdO2Zvcihjb25zdCBlIG9mIHRoaXMuaW5zdGFuY2Uuc2xpZGVzfHxbXSl0LnB1c2godGhpcy5nZXRUaHVtYihlKSk7cmV0dXJuIHR9cmVzaXplTW9kZXJuU2xpZGUodCl7dGhpcy5pc01vZGVybiYmKHRbSHRdPXRbX3RdJiZ0W050XT9NYXRoLnJvdW5kKHRoaXNbTnRdKih0W190XS90W050XSkpOnRoaXNbSHRdKX11cGRhdGVQcm9wcygpe2NvbnN0IHQ9dGhpcy5jb250YWluZXI7aWYoIXQpcmV0dXJuO2NvbnN0IGU9ZT0+cGFyc2VGbG9hdChnZXRDb21wdXRlZFN0eWxlKHQpLmdldFByb3BlcnR5VmFsdWUoXCItLWYtdGh1bWItXCIrZSkpfHwwO3RoaXMudGh1bWJHYXA9ZShcImdhcFwiKSx0aGlzLnRodW1iRXh0cmFHYXA9ZShcImV4dHJhLWdhcFwiKSx0aGlzW0h0XT1lKFwid2lkdGhcIil8fDQwLHRoaXNbX3RdPWUoXCJjbGlwLXdpZHRoXCIpfHw0MCx0aGlzW050XT1lKFwiaGVpZ2h0XCIpfHw0MH1idWlsZCgpe2NvbnN0IHQ9dGhpcztpZih0LnN0YXRlIT09anQuSW5pdClyZXR1cm47aWYodC5pc0Rpc2FibGVkKCkpcmV0dXJuIHZvaWQgdC5lbWl0KFwiZGlzYWJsZWRcIik7Y29uc3QgZT10Lmluc3RhbmNlLGk9ZS5jb250YWluZXIsbj10LmdldFNsaWRlcygpLHM9dC5vcHRpb24oXCJ0eXBlXCIpO3QudHlwZT1zO2NvbnN0IG89dC5vcHRpb24oXCJwYXJlbnRFbFwiKSxhPXQuY24oXCJjb250YWluZXJcIikscj10LmNuKFwidHJhY2tcIik7bGV0IGw9bnVsbD09bz92b2lkIDA6by5xdWVyeVNlbGVjdG9yKFwiLlwiK2EpO2x8fChsPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksQyhsLGEpLG8/by5hcHBlbmRDaGlsZChsKTppLmFmdGVyKGwpKSxDKGwsYGlzLSR7c31gKSxDKGksdC5jbihcImhhc1RodW1ic1wiKSksdC5jb250YWluZXI9bCx0LnVwZGF0ZVByb3BzKCk7bGV0IGM9bC5xdWVyeVNlbGVjdG9yKFwiLlwiK3IpO2N8fChjPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksQyhjLHQuY24oXCJ0cmFja1wiKSksbC5hcHBlbmRDaGlsZChjKSksdC50cmFjaz1jO2NvbnN0IGg9Zih7fSx7dHJhY2s6YyxpbmZpbml0ZTohMSxjZW50ZXI6ITAsZmlsbDpcImNsYXNzaWNcIj09PXMsZHJhZ0ZyZWU6ITAsc2xpZGVzUGVyUGFnZToxLHRyYW5zaXRpb246ITEscHJlbG9hZDouMjUsZnJpY3Rpb246LjEyLFBhbnpvb206e21heFZlbG9jaXR5OjB9LERvdHM6ITEsTmF2aWdhdGlvbjohMSxjbGFzc2VzOntjb250YWluZXI6XCJmLXRodW1ic1wiLHZpZXdwb3J0OlwiZi10aHVtYnNfX3ZpZXdwb3J0XCIsdHJhY2s6XCJmLXRodW1ic19fdHJhY2tcIixzbGlkZTpcImYtdGh1bWJzX19zbGlkZVwifX0sdC5vcHRpb24oXCJDYXJvdXNlbFwiKXx8e30se1N5bmM6e3RhcmdldDplfSxzbGlkZXM6bn0pLGQ9bmV3IGUuY29uc3RydWN0b3IobCxoKTtkLm9uKFwiY3JlYXRlU2xpZGVcIiwoKGUsaSk9Pnt0LnNldFByb3BzKGkuaW5kZXgpLHQuZW1pdChcImNyZWF0ZVNsaWRlXCIsaSxpLmVsKX0pKSxkLm9uKFwicmVhZHlcIiwoKCk9Pnt0LnNoaWZ0TW9kZXJuKCksdC5lbWl0KFwicmVhZHlcIil9KSksZC5vbihcInJlZnJlc2hcIiwoKCk9Pnt0LnNoaWZ0TW9kZXJuKCl9KSksZC5vbihcIlBhbnpvb20uY2xpY2tcIiwoKGUsaSxuKT0+e3Qub25DbGljayhuKX0pKSx0LmNhcm91c2VsPWQsdC5zdGF0ZT1qdC5SZWFkeX1vbkNsaWNrKHQpe3QucHJldmVudERlZmF1bHQoKSx0LnN0b3BQcm9wYWdhdGlvbigpO2NvbnN0IGU9dGhpcy5pbnN0YW5jZSx7cGFnZXM6aSxwYWdlOm59PWUscz10PT57aWYodCl7Y29uc3QgZT10LmNsb3Nlc3QoXCJbZGF0YS1jYXJvdXNlbC1pbmRleF1cIik7aWYoZSlyZXR1cm5bcGFyc2VJbnQoZS5kYXRhc2V0LmNhcm91c2VsSW5kZXh8fFwiXCIsMTApfHwwLGVdfXJldHVyblstMSx2b2lkIDBdfSxvPSh0LGUpPT57Y29uc3QgaT1kb2N1bWVudC5lbGVtZW50RnJvbVBvaW50KHQsZSk7cmV0dXJuIGk/cyhpKTpbLTEsdm9pZCAwXX07bGV0W2Escl09cyh0LnRhcmdldCk7aWYoYT4tMSlyZXR1cm47Y29uc3QgbD10aGlzW190XSxjPXQuY2xpZW50WCxoPXQuY2xpZW50WTtsZXRbZCx1XT1vKGMtbCxoKSxbZixwXT1vKGMrbCxoKTt1JiZwPyhhPU1hdGguYWJzKGMtdS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5yaWdodCk8TWF0aC5hYnMoYy1wLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQpP2Q6ZixhPT09biYmKGE9YT09PWQ/ZjpkKSk6dT9hPWQ6cCYmKGE9ZiksYT4tMSYmaVthXSYmZS5zbGlkZVRvKGEpfWdldFNoaWZ0KHQpe3ZhciBlO2NvbnN0IGk9dGhpcyx7aW5zdGFuY2U6bn09aSxzPWkuY2Fyb3VzZWw7aWYoIW58fCFzKXJldHVybiAwO2NvbnN0IG89aVtIdF0sYT1pW190XSxyPWkudGh1bWJHYXAsbD1pLnRodW1iRXh0cmFHYXA7aWYoIShudWxsPT09KGU9cy5zbGlkZXNbdF0pfHx2b2lkIDA9PT1lP3ZvaWQgMDplLmVsKSlyZXR1cm4gMDtjb25zdCBjPS41KihvLWEpLGg9bi5wYWdlcy5sZW5ndGgtMTtsZXQgZD1uLmdldFByb2dyZXNzKDApLHU9bi5nZXRQcm9ncmVzcyhoKSxmPW4uZ2V0UHJvZ3Jlc3ModCwhMSwhMCkscD0wLGc9YytsK3I7Y29uc3QgbT1kPDAmJmQ+LTEsdj11PjAmJnU8MTtyZXR1cm4gMD09PXQ/KHA9ZypNYXRoLmFicyhkKSx2JiYxPT09ZCYmKHAtPWcqTWF0aC5hYnModSkpKTp0PT09aD8ocD1nKk1hdGguYWJzKHUpKi0xLG0mJi0xPT09dSYmKHArPWcqTWF0aC5hYnMoZCkpKTptfHx2PyhwPS0xKmcscCs9ZypNYXRoLmFicyhkKSxwKz1nKigxLU1hdGguYWJzKHUpKSk6cD1nKmYscH1zZXRQcm9wcyh0KXt2YXIgaTtjb25zdCBuPXRoaXM7aWYoIW4uaXNNb2Rlcm4pcmV0dXJuO2NvbnN0e2luc3RhbmNlOnN9PW4sbz1uLmNhcm91c2VsO2lmKHMmJm8pe2NvbnN0IGE9bnVsbD09PShpPW8uc2xpZGVzW3RdKXx8dm9pZCAwPT09aT92b2lkIDA6aS5lbDtpZihhJiZhLmNoaWxkTm9kZXMubGVuZ3RoKXtsZXQgaT1lKDEtTWF0aC5hYnMocy5nZXRQcm9ncmVzcyh0KSkpLG89ZShuLmdldFNoaWZ0KHQpKTthLnN0eWxlLnNldFByb3BlcnR5KFwiLS1wcm9ncmVzc1wiLGk/aStcIlwiOlwiXCIpLGEuc3R5bGUuc2V0UHJvcGVydHkoXCItLXNoaWZ0XCIsbytcIlwiKX19fXNoaWZ0TW9kZXJuKCl7Y29uc3QgdD10aGlzO2lmKCF0LmlzTW9kZXJuKXJldHVybjtjb25zdHtpbnN0YW5jZTplLHRyYWNrOml9PXQsbj1lLnBhbnpvb20scz10LmNhcm91c2VsO2lmKCEoZSYmaSYmbiYmcykpcmV0dXJuO2lmKG4uc3RhdGU9PT12LkluaXR8fG4uc3RhdGU9PT12LkRlc3Ryb3kpcmV0dXJuO2Zvcihjb25zdCBpIG9mIGUuc2xpZGVzKXQuc2V0UHJvcHMoaS5pbmRleCk7bGV0IG89KHRbX3RdK3QudGh1bWJHYXApKihzLnNsaWRlcy5sZW5ndGh8fDApO2kuc3R5bGUuc2V0UHJvcGVydHkoXCItLXdpZHRoXCIsbytcIlwiKX1jbGVhbnVwKCl7Y29uc3QgdD10aGlzO3QuY2Fyb3VzZWwmJnQuY2Fyb3VzZWwuZGVzdHJveSgpLHQuY2Fyb3VzZWw9bnVsbCx0LmNvbnRhaW5lciYmdC5jb250YWluZXIucmVtb3ZlKCksdC5jb250YWluZXI9bnVsbCx0LnRyYWNrJiZ0LnRyYWNrLnJlbW92ZSgpLHQudHJhY2s9bnVsbCx0LnN0YXRlPWp0LkluaXQsUCh0Lmluc3RhbmNlLmNvbnRhaW5lcix0LmNuKFwiaGFzVGh1bWJzXCIpKX1hdHRhY2goKXtjb25zdCB0PXRoaXMsZT10Lmluc3RhbmNlO2Uub24oXCJpbml0U2xpZGVcIix0Lm9uSW5pdFNsaWRlKSxlLnN0YXRlPT09Qi5Jbml0P2Uub24oXCJpbml0U2xpZGVzXCIsdC5vbkluaXRTbGlkZXMpOnQub25Jbml0U2xpZGVzKCksZS5vbihbXCJjaGFuZ2VcIixcIlBhbnpvb20uYWZ0ZXJUcmFuc2Zvcm1cIl0sdC5vbkNoYW5nZSksZS5vbihcIlBhbnpvb20ucmVmcmVzaFwiLHQub25SZWZyZXNoKX1kZXRhY2goKXtjb25zdCB0PXRoaXMsZT10Lmluc3RhbmNlO2Uub2ZmKFwiaW5pdFNsaWRlXCIsdC5vbkluaXRTbGlkZSksZS5vZmYoXCJpbml0U2xpZGVzXCIsdC5vbkluaXRTbGlkZXMpLGUub2ZmKFtcImNoYW5nZVwiLFwiUGFuem9vbS5hZnRlclRyYW5zZm9ybVwiXSx0Lm9uQ2hhbmdlKSxlLm9mZihcIlBhbnpvb20ucmVmcmVzaFwiLHQub25SZWZyZXNoKSx0LmNsZWFudXAoKX19O09iamVjdC5kZWZpbmVQcm9wZXJ0eSgkdCxcImRlZmF1bHRzXCIse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOkZ0fSk7Y29uc3QgV3Q9T2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LEZ0KSx7a2V5OlwidFwiLHNob3dPblN0YXJ0OiEwLHBhcmVudEVsOm51bGx9KSxYdD1cImlzLW1hc2tlZFwiLHF0PVwiYXJpYS1oaWRkZW5cIjtjbGFzcyBZdCBleHRlbmRzIF97Y29uc3RydWN0b3IoKXtzdXBlciguLi5hcmd1bWVudHMpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwicmVmXCIse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOm51bGx9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxcImhpZGRlblwiLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTohMX0pfWdldCBpc0VuYWJsZWQoKXtjb25zdCB0PXRoaXMucmVmO3JldHVybiB0JiYhdC5pc0Rpc2FibGVkKCl9Z2V0IGlzSGlkZGVuKCl7cmV0dXJuIHRoaXMuaGlkZGVufW9uQ2xpY2sodCxlKXtlLnN0b3BQcm9wYWdhdGlvbigpfW9uQ3JlYXRlU2xpZGUodCxlKXt2YXIgaSxuLHM7Y29uc3Qgbz0obnVsbD09PShzPW51bGw9PT0obj1udWxsPT09KGk9dGhpcy5pbnN0YW5jZSl8fHZvaWQgMD09PWk/dm9pZCAwOmkuY2Fyb3VzZWwpfHx2b2lkIDA9PT1uP3ZvaWQgMDpuLnNsaWRlc1tlLmluZGV4XSl8fHZvaWQgMD09PXM/dm9pZCAwOnMudHlwZSl8fFwiXCIsYT1lLmVsO2lmKGEmJm8pe2xldCB0PWBmb3ItJHtvfWA7W1widmlkZW9cIixcInlvdXR1YmVcIixcInZpbWVvXCIsXCJodG1sNXZpZGVvXCJdLmluY2x1ZGVzKG8pJiYodCs9XCIgZm9yLXZpZGVvXCIpLEMoYSx0KX19b25Jbml0KCl7dmFyIHQ7Y29uc3QgZT10aGlzLGk9ZS5pbnN0YW5jZSxuPWkuY2Fyb3VzZWw7aWYoZS5yZWZ8fCFuKXJldHVybjtjb25zdCBzPWUub3B0aW9uKFwicGFyZW50RWxcIil8fGkuZm9vdGVyfHxpLmNvbnRhaW5lcjtpZighcylyZXR1cm47Y29uc3Qgbz1mKHt9LGUub3B0aW9ucyx7cGFyZW50RWw6cyxjbGFzc2VzOntjb250YWluZXI6XCJmLXRodW1icyBmYW5jeWJveF9fdGh1bWJzXCJ9LENhcm91c2VsOntTeW5jOntmcmljdGlvbjppLm9wdGlvbihcIkNhcm91c2VsLmZyaWN0aW9uXCIpfHwwfX0sb246e3JlYWR5OnQ9Pntjb25zdCBpPXQuY29udGFpbmVyO2kmJnRoaXMuaGlkZGVuJiYoZS5yZWZyZXNoKCksaS5zdHlsZS50cmFuc2l0aW9uPVwibm9uZVwiLGUuaGlkZSgpLGkub2Zmc2V0SGVpZ2h0LHF1ZXVlTWljcm90YXNrKCgoKT0+e2kuc3R5bGUudHJhbnNpdGlvbj1cIlwiLGUuc2hvdygpfSkpKX19fSk7by5DYXJvdXNlbD1vLkNhcm91c2VsfHx7fSxvLkNhcm91c2VsLm9uPWYoKG51bGw9PT0odD1lLm9wdGlvbnMuQ2Fyb3VzZWwpfHx2b2lkIDA9PT10P3ZvaWQgMDp0Lm9uKXx8e30se2NsaWNrOnRoaXMub25DbGljayxjcmVhdGVTbGlkZTp0aGlzLm9uQ3JlYXRlU2xpZGV9KSxuLm9wdGlvbnMuVGh1bWJzPW8sbi5hdHRhY2hQbHVnaW5zKHtUaHVtYnM6JHR9KSxlLnJlZj1uLnBsdWdpbnMuVGh1bWJzLGUub3B0aW9uKFwic2hvd09uU3RhcnRcIil8fChlLnJlZi5zdGF0ZT1qdC5IaWRkZW4sZS5oaWRkZW49ITApfW9uUmVzaXplKCl7dmFyIHQ7Y29uc3QgZT1udWxsPT09KHQ9dGhpcy5yZWYpfHx2b2lkIDA9PT10P3ZvaWQgMDp0LmNvbnRhaW5lcjtlJiYoZS5zdHlsZS5tYXhIZWlnaHQ9XCJcIil9b25LZXlkb3duKHQsZSl7Y29uc3QgaT10aGlzLm9wdGlvbihcImtleVwiKTtpJiZpPT09ZSYmdGhpcy50b2dnbGUoKX10b2dnbGUoKXtjb25zdCB0PXRoaXMucmVmO2lmKHQmJiF0LmlzRGlzYWJsZWQoKSlyZXR1cm4gdC5zdGF0ZT09PWp0LkhpZGRlbj8odC5zdGF0ZT1qdC5Jbml0LHZvaWQgdC5idWlsZCgpKTp2b2lkKHRoaXMuaGlkZGVuP3RoaXMuc2hvdygpOnRoaXMuaGlkZSgpKX1zaG93KCl7Y29uc3QgdD10aGlzLnJlZjtpZighdHx8dC5pc0Rpc2FibGVkKCkpcmV0dXJuO2NvbnN0IGU9dC5jb250YWluZXI7ZSYmKHRoaXMucmVmcmVzaCgpLGUub2Zmc2V0SGVpZ2h0LGUucmVtb3ZlQXR0cmlidXRlKHF0KSxlLmNsYXNzTGlzdC5yZW1vdmUoWHQpLHRoaXMuaGlkZGVuPSExKX1oaWRlKCl7Y29uc3QgdD10aGlzLnJlZixlPXQmJnQuY29udGFpbmVyO2UmJih0aGlzLnJlZnJlc2goKSxlLm9mZnNldEhlaWdodCxlLmNsYXNzTGlzdC5hZGQoWHQpLGUuc2V0QXR0cmlidXRlKHF0LFwidHJ1ZVwiKSksdGhpcy5oaWRkZW49ITB9cmVmcmVzaCgpe2NvbnN0IHQ9dGhpcy5yZWY7aWYoIXR8fCF0LnN0YXRlKXJldHVybjtjb25zdCBlPXQuY29udGFpbmVyLGk9KG51bGw9PWU/dm9pZCAwOmUuZmlyc3RDaGlsZCl8fG51bGw7ZSYmaSYmaS5jaGlsZE5vZGVzLmxlbmd0aCYmKGUuc3R5bGUubWF4SGVpZ2h0PWAke2kuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0fXB4YCl9YXR0YWNoKCl7Y29uc3QgdD10aGlzLGU9dC5pbnN0YW5jZTtlLnN0YXRlPT09cnQuSW5pdD9lLm9uKFwiQ2Fyb3VzZWwuaW5pdFwiLHQub25Jbml0KTp0Lm9uSW5pdCgpLGUub24oXCJyZXNpemVcIix0Lm9uUmVzaXplKSxlLm9uKFwia2V5ZG93blwiLHQub25LZXlkb3duKX1kZXRhY2goKXt2YXIgdDtjb25zdCBlPXRoaXMsaT1lLmluc3RhbmNlO2kub2ZmKFwiQ2Fyb3VzZWwuaW5pdFwiLGUub25Jbml0KSxpLm9mZihcInJlc2l6ZVwiLGUub25SZXNpemUpLGkub2ZmKFwia2V5ZG93blwiLGUub25LZXlkb3duKSxudWxsPT09KHQ9aS5jYXJvdXNlbCl8fHZvaWQgMD09PXR8fHQuZGV0YWNoUGx1Z2lucyhbXCJUaHVtYnNcIl0pLGUucmVmPW51bGx9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eShZdCxcImRlZmF1bHRzXCIse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOld0fSk7Y29uc3QgVnQ9e3BhbkxlZnQ6e2ljb246Jzxzdmc+PHBhdGggZD1cIk01IDEyaDE0TTUgMTJsNiA2TTUgMTJsNi02XCIvPjwvc3ZnPicsY2hhbmdlOntwYW5YOi0xMDB9fSxwYW5SaWdodDp7aWNvbjonPHN2Zz48cGF0aCBkPVwiTTUgMTJoMTRNMTMgMThsNi02TTEzIDZsNiA2XCIvPjwvc3ZnPicsY2hhbmdlOntwYW5YOjEwMH19LHBhblVwOntpY29uOic8c3ZnPjxwYXRoIGQ9XCJNMTIgNXYxNE0xOCAxMWwtNi02TTYgMTFsNi02XCIvPjwvc3ZnPicsY2hhbmdlOntwYW5ZOi0xMDB9fSxwYW5Eb3duOntpY29uOic8c3ZnPjxwYXRoIGQ9XCJNMTIgNXYxNE0xOCAxM2wtNiA2TTYgMTNsNiA2XCIvPjwvc3ZnPicsY2hhbmdlOntwYW5ZOjEwMH19LHpvb21Jbjp7aWNvbjonPHN2Zz48Y2lyY2xlIGN4PVwiMTFcIiBjeT1cIjExXCIgcj1cIjcuNVwiLz48cGF0aCBkPVwibTIxIDIxLTQuMzUtNC4zNU0xMSA4djZNOCAxMWg2XCIvPjwvc3ZnPicsYWN0aW9uOlwiem9vbUluXCJ9LHpvb21PdXQ6e2ljb246Jzxzdmc+PGNpcmNsZSBjeD1cIjExXCIgY3k9XCIxMVwiIHI9XCI3LjVcIi8+PHBhdGggZD1cIm0yMSAyMS00LjM1LTQuMzVNOCAxMWg2XCIvPjwvc3ZnPicsYWN0aW9uOlwiem9vbU91dFwifSx0b2dnbGUxdG8xOntpY29uOic8c3ZnPjxwYXRoIGQ9XCJNMy41MSAzLjA3YzUuNzQuMDIgMTEuNDgtLjAyIDE3LjIyLjAyIDEuMzcuMSAyLjM0IDEuNjQgMi4xOCAzLjEzIDAgNC4wOC4wMiA4LjE2IDAgMTIuMjMtLjEgMS41NC0xLjQ3IDIuNjQtMi43OSAyLjQ2LTUuNjEtLjAxLTExLjI0LjAyLTE2Ljg2LS4wMS0xLjM2LS4xMi0yLjMzLTEuNjUtMi4xNy0zLjE0IDAtNC4wNy0uMDItOC4xNiAwLTEyLjIzLjEtMS4zNiAxLjIyLTIuNDggMi40Mi0yLjQ2WlwiLz48cGF0aCBkPVwiTTUuNjUgOC41NGgxLjQ5djYuOTJtOC45NC02LjkyaDEuNDl2Ni45Mk0xMS41IDkuNHYuMDJtMCA1LjE4djBcIi8+PC9zdmc+JyxhY3Rpb246XCJ0b2dnbGVab29tXCJ9LHRvZ2dsZVpvb206e2ljb246Jzxzdmc+PGc+PGxpbmUgeDE9XCIxMVwiIHkxPVwiOFwiIHgyPVwiMTFcIiB5Mj1cIjE0XCI+PC9saW5lPjwvZz48Y2lyY2xlIGN4PVwiMTFcIiBjeT1cIjExXCIgcj1cIjcuNVwiLz48cGF0aCBkPVwibTIxIDIxLTQuMzUtNC4zNU04IDExaDZcIi8+PC9zdmc+JyxhY3Rpb246XCJ0b2dnbGVab29tXCJ9LGl0ZXJhdGVab29tOntpY29uOic8c3ZnPjxnPjxsaW5lIHgxPVwiMTFcIiB5MT1cIjhcIiB4Mj1cIjExXCIgeTI9XCIxNFwiPjwvbGluZT48L2c+PGNpcmNsZSBjeD1cIjExXCIgY3k9XCIxMVwiIHI9XCI3LjVcIi8+PHBhdGggZD1cIm0yMSAyMS00LjM1LTQuMzVNOCAxMWg2XCIvPjwvc3ZnPicsYWN0aW9uOlwiaXRlcmF0ZVpvb21cIn0scm90YXRlQ0NXOntpY29uOic8c3ZnPjxwYXRoIGQ9XCJNMTUgNC41NWE4IDggMCAwIDAtNiAxNC45TTkgMTV2NUg0TTE4LjM3IDcuMTZ2LjAxTTEzIDE5Ljk0di4wMU0xNi44NCAxOC4zN3YuMDFNMTkuMzcgMTUuMXYuMDFNMTkuOTQgMTF2LjAxXCIvPjwvc3ZnPicsYWN0aW9uOlwicm90YXRlQ0NXXCJ9LHJvdGF0ZUNXOntpY29uOic8c3ZnPjxwYXRoIGQ9XCJNOSA0LjU1YTggOCAwIDAgMSA2IDE0LjlNMTUgMTV2NWg1TTUuNjMgNy4xNnYuMDFNNC4wNiAxMXYuMDFNNC42MyAxNS4xdi4wMU03LjE2IDE4LjM3di4wMU0xMSAxOS45NHYuMDFcIi8+PC9zdmc+JyxhY3Rpb246XCJyb3RhdGVDV1wifSxmbGlwWDp7aWNvbjonPHN2ZyBzdHlsZT1cInN0cm9rZS13aWR0aDogMS4zXCI+PHBhdGggZD1cIk0xMiAzdjE4TTE2IDd2MTBoNUwxNiA3TTggN3YxMEgzTDggN1wiLz48L3N2Zz4nLGFjdGlvbjpcImZsaXBYXCJ9LGZsaXBZOntpY29uOic8c3ZnIHN0eWxlPVwic3Ryb2tlLXdpZHRoOiAxLjNcIj48cGF0aCBkPVwiTTMgMTJoMThNNyAxNmgxMEw3IDIxdi01TTcgOGgxMEw3IDN2NVwiLz48L3N2Zz4nLGFjdGlvbjpcImZsaXBZXCJ9LGZpdFg6e2ljb246Jzxzdmc+PHBhdGggZD1cIk00IDEyVjZhMiAyIDAgMCAxIDItMmgxMmEyIDIgMCAwIDEgMiAydjZNMTAgMThIM00yMSAxOGgtN002IDE1bC0zIDMgMyAzTTE4IDE1bDMgMy0zIDNcIi8+PC9zdmc+JyxhY3Rpb246XCJmaXRYXCJ9LGZpdFk6e2ljb246Jzxzdmc+PHBhdGggZD1cIk0xMiAyMEg2YTIgMiAwIDAgMS0yLTJWNmEyIDIgMCAwIDEgMi0yaDZNMTggMTR2N00xOCAzdjdNMTUgMThsMyAzIDMtM00xNSA2bDMtMyAzIDNcIi8+PC9zdmc+JyxhY3Rpb246XCJmaXRZXCJ9LHJlc2V0OntpY29uOic8c3ZnPjxwYXRoIGQ9XCJNMjAgMTFBOC4xIDguMSAwIDAgMCA0LjUgOU00IDV2NGg0TTQgMTNhOC4xIDguMSAwIDAgMCAxNS41IDJtLjUgNHYtNGgtNFwiLz48L3N2Zz4nLGFjdGlvbjpcInJlc2V0XCJ9LHRvZ2dsZUZTOntpY29uOic8c3ZnPjxnPjxwYXRoIGQ9XCJNMTQuNSA5LjUgMjEgM20wIDBoLTZtNiAwdjZNMyAyMWw2LjUtNi41TTMgMjF2LTZtMCA2aDZcIi8+PC9nPjxnPjxwYXRoIGQ9XCJtMTQgMTAgNy03bS03IDdoNm0tNiAwVjRNMyAyMWw3LTdtMCAwdjZtMC02SDRcIi8+PC9nPjwvc3ZnPicsYWN0aW9uOlwidG9nZ2xlRlNcIn19O3ZhciBadDshZnVuY3Rpb24odCl7dFt0LkluaXQ9MF09XCJJbml0XCIsdFt0LlJlYWR5PTFdPVwiUmVhZHlcIix0W3QuRGlzYWJsZWQ9Ml09XCJEaXNhYmxlZFwifShadHx8KFp0PXt9KSk7Y29uc3QgVXQ9e2Fic29sdXRlOlwiYXV0b1wiLGRpc3BsYXk6e2xlZnQ6W1wiaW5mb2JhclwiXSxtaWRkbGU6W10scmlnaHQ6W1wiaXRlcmF0ZVpvb21cIixcInNsaWRlc2hvd1wiLFwiZnVsbHNjcmVlblwiLFwidGh1bWJzXCIsXCJjbG9zZVwiXX0sZW5hYmxlZDpcImF1dG9cIixpdGVtczp7aW5mb2Jhcjp7dHBsOic8ZGl2IGNsYXNzPVwiZmFuY3lib3hfX2luZm9iYXJcIiB0YWJpbmRleD1cIi0xXCI+PHNwYW4gZGF0YS1mYW5jeWJveC1jdXJyZW50LWluZGV4Pjwvc3Bhbj4vPHNwYW4gZGF0YS1mYW5jeWJveC1jb3VudD48L3NwYW4+PC9kaXY+J30sZG93bmxvYWQ6e3RwbDonPGEgY2xhc3M9XCJmLWJ1dHRvblwiIHRpdGxlPVwie3tET1dOTE9BRH19XCIgZGF0YS1mYW5jeWJveC1kb3dubG9hZCBocmVmPVwiamF2YXNyaXB0OjtcIj48c3ZnPjxwYXRoIGQ9XCJNNCAxN3YyYTIgMiAwIDAgMCAyIDJoMTJhMiAyIDAgMCAwIDItMnYtMk03IDExbDUgNSA1LTVNMTIgNHYxMlwiLz48L3N2Zz48L2E+J30scHJldjp7dHBsOic8YnV0dG9uIGNsYXNzPVwiZi1idXR0b25cIiB0aXRsZT1cInt7UFJFVn19XCIgZGF0YS1mYW5jeWJveC1wcmV2Pjxzdmc+PHBhdGggZD1cIm0xNSA2LTYgNiA2IDZcIi8+PC9zdmc+PC9idXR0b24+J30sbmV4dDp7dHBsOic8YnV0dG9uIGNsYXNzPVwiZi1idXR0b25cIiB0aXRsZT1cInt7TkVYVH19XCIgZGF0YS1mYW5jeWJveC1uZXh0Pjxzdmc+PHBhdGggZD1cIm05IDYgNiA2LTYgNlwiLz48L3N2Zz48L2J1dHRvbj4nfSxzbGlkZXNob3c6e3RwbDonPGJ1dHRvbiBjbGFzcz1cImYtYnV0dG9uXCIgdGl0bGU9XCJ7e1RPR0dMRV9TTElERVNIT1d9fVwiIGRhdGEtZmFuY3lib3gtdG9nZ2xlLXNsaWRlc2hvdz48c3ZnPjxnPjxwYXRoIGQ9XCJNOCA0djE2bDEzIC04elwiPjwvcGF0aD48L2c+PGc+PHBhdGggZD1cIk04IDR2MTVNMTcgNHYxNVwiLz48L2c+PC9zdmc+PC9idXR0b24+J30sZnVsbHNjcmVlbjp7dHBsOic8YnV0dG9uIGNsYXNzPVwiZi1idXR0b25cIiB0aXRsZT1cInt7VE9HR0xFX0ZVTExTQ1JFRU59fVwiIGRhdGEtZmFuY3lib3gtdG9nZ2xlLWZ1bGxzY3JlZW4+PHN2Zz48Zz48cGF0aCBkPVwiTTQgOFY2YTIgMiAwIDAgMSAyLTJoMk00IDE2djJhMiAyIDAgMCAwIDIgMmgyTTE2IDRoMmEyIDIgMCAwIDEgMiAydjJNMTYgMjBoMmEyIDIgMCAwIDAgMi0ydi0yXCIvPjwvZz48Zz48cGF0aCBkPVwiTTE1IDE5di0yYTIgMiAwIDAgMSAyLTJoMk0xNSA1djJhMiAyIDAgMCAwIDIgMmgyTTUgMTVoMmEyIDIgMCAwIDEgMiAydjJNNSA5aDJhMiAyIDAgMCAwIDItMlY1XCIvPjwvZz48L3N2Zz48L2J1dHRvbj4nfSx0aHVtYnM6e3RwbDonPGJ1dHRvbiBjbGFzcz1cImYtYnV0dG9uXCIgdGl0bGU9XCJ7e1RPR0dMRV9USFVNQlN9fVwiIGRhdGEtZmFuY3lib3gtdG9nZ2xlLXRodW1icz48c3ZnPjxjaXJjbGUgY3g9XCI1LjVcIiBjeT1cIjUuNVwiIHI9XCIxXCIvPjxjaXJjbGUgY3g9XCIxMlwiIGN5PVwiNS41XCIgcj1cIjFcIi8+PGNpcmNsZSBjeD1cIjE4LjVcIiBjeT1cIjUuNVwiIHI9XCIxXCIvPjxjaXJjbGUgY3g9XCI1LjVcIiBjeT1cIjEyXCIgcj1cIjFcIi8+PGNpcmNsZSBjeD1cIjEyXCIgY3k9XCIxMlwiIHI9XCIxXCIvPjxjaXJjbGUgY3g9XCIxOC41XCIgY3k9XCIxMlwiIHI9XCIxXCIvPjxjaXJjbGUgY3g9XCI1LjVcIiBjeT1cIjE4LjVcIiByPVwiMVwiLz48Y2lyY2xlIGN4PVwiMTJcIiBjeT1cIjE4LjVcIiByPVwiMVwiLz48Y2lyY2xlIGN4PVwiMTguNVwiIGN5PVwiMTguNVwiIHI9XCIxXCIvPjwvc3ZnPjwvYnV0dG9uPid9LGNsb3NlOnt0cGw6JzxidXR0b24gY2xhc3M9XCJmLWJ1dHRvblwiIHRpdGxlPVwie3tDTE9TRX19XCIgZGF0YS1mYW5jeWJveC1jbG9zZT48c3ZnPjxwYXRoIGQ9XCJtMTkuNSA0LjUtMTUgMTVNNC41IDQuNWwxNSAxNVwiLz48L3N2Zz48L2J1dHRvbj4nfX0scGFyZW50RWw6bnVsbH0sR3Q9e3RhYmluZGV4OlwiLTFcIix3aWR0aDpcIjI0XCIsaGVpZ2h0OlwiMjRcIix2aWV3Qm94OlwiMCAwIDI0IDI0XCIseG1sbnM6XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wifSxLdD1cImhhcy10b29sYmFyXCIsSnQ9XCJmYW5jeWJveF9fdG9vbGJhclwiO2NsYXNzIFF0IGV4dGVuZHMgX3tjb25zdHJ1Y3Rvcigpe3N1cGVyKC4uLmFyZ3VtZW50cyksT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJzdGF0ZVwiLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTpadC5Jbml0fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJjb250YWluZXJcIix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6bnVsbH0pfW9uUmVhZHkodCl7dmFyIGU7aWYoIXQuY2Fyb3VzZWwpcmV0dXJuO2xldCBpPXRoaXMub3B0aW9uKFwiZGlzcGxheVwiKSxuPXRoaXMub3B0aW9uKFwiYWJzb2x1dGVcIikscz10aGlzLm9wdGlvbihcImVuYWJsZWRcIik7aWYoXCJhdXRvXCI9PT1zKXtjb25zdCB0PXRoaXMuaW5zdGFuY2UuY2Fyb3VzZWw7bGV0IGU9MDtpZih0KWZvcihjb25zdCBpIG9mIHQuc2xpZGVzKShpLnBhbnpvb218fFwiaW1hZ2VcIj09PWkudHlwZSkmJmUrKztlfHwocz0hMSl9c3x8KGk9dm9pZCAwKTtsZXQgbz0wO2NvbnN0IGE9e2xlZnQ6W10sbWlkZGxlOltdLHJpZ2h0OltdfTtpZihpKWZvcihjb25zdCB0IG9mW1wibGVmdFwiLFwibWlkZGxlXCIsXCJyaWdodFwiXSlmb3IoY29uc3QgbiBvZiBpW3RdKXtjb25zdCBpPXRoaXMuY3JlYXRlRWwobik7aSYmKG51bGw9PT0oZT1hW3RdKXx8dm9pZCAwPT09ZXx8ZS5wdXNoKGkpLG8rKyl9bGV0IHI9bnVsbDtpZihvJiYocj10aGlzLmNyZWF0ZUNvbnRhaW5lcigpKSxyKXtmb3IoY29uc3RbdCxlXW9mIE9iamVjdC5lbnRyaWVzKGEpKXtjb25zdCBpPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7QyhpLEp0K1wiX19jb2x1bW4gaXMtXCIrdCk7Zm9yKGNvbnN0IHQgb2YgZSlpLmFwcGVuZENoaWxkKHQpO1wiYXV0b1wiIT09bnx8XCJtaWRkbGVcIiE9PXR8fGUubGVuZ3RofHwobj0hMCksci5hcHBlbmRDaGlsZChpKX0hMD09PW4mJkMocixcImlzLWFic29sdXRlXCIpLHRoaXMuc3RhdGU9WnQuUmVhZHksdGhpcy5vblJlZnJlc2goKX1lbHNlIHRoaXMuc3RhdGU9WnQuRGlzYWJsZWR9b25DbGljayh0KXt2YXIgZSxpO2NvbnN0IG49dGhpcy5pbnN0YW5jZSxzPW4uZ2V0U2xpZGUoKSxvPW51bGw9PXM/dm9pZCAwOnMucGFuem9vbSxhPXQudGFyZ2V0LHI9YSYmUyhhKT9hLmRhdGFzZXQ6bnVsbDtpZighcilyZXR1cm47aWYodm9pZCAwIT09ci5mYW5jeWJveFRvZ2dsZVRodW1icylyZXR1cm4gdC5wcmV2ZW50RGVmYXVsdCgpLHQuc3RvcFByb3BhZ2F0aW9uKCksdm9pZChudWxsPT09KGU9bi5wbHVnaW5zLlRodW1icyl8fHZvaWQgMD09PWV8fGUudG9nZ2xlKCkpO2lmKHZvaWQgMCE9PXIuZmFuY3lib3hUb2dnbGVGdWxsc2NyZWVuKXJldHVybiB0LnByZXZlbnREZWZhdWx0KCksdC5zdG9wUHJvcGFnYXRpb24oKSx2b2lkIHRoaXMuaW5zdGFuY2UudG9nZ2xlRnVsbHNjcmVlbigpO2lmKHZvaWQgMCE9PXIuZmFuY3lib3hUb2dnbGVTbGlkZXNob3cpe3QucHJldmVudERlZmF1bHQoKSx0LnN0b3BQcm9wYWdhdGlvbigpO2NvbnN0IGU9bnVsbD09PShpPW4uY2Fyb3VzZWwpfHx2b2lkIDA9PT1pP3ZvaWQgMDppLnBsdWdpbnMuQXV0b3BsYXk7bGV0IHM9ZS5pc0FjdGl2ZTtyZXR1cm4gbyYmXCJtb3VzZW1vdmVcIj09PW8ucGFuTW9kZSYmIXMmJm8ucmVzZXQoKSx2b2lkKHM/ZS5zdG9wKCk6ZS5zdGFydCgpKX1jb25zdCBsPXIucGFuem9vbUFjdGlvbixjPXIucGFuem9vbUNoYW5nZTtpZigoY3x8bCkmJih0LnByZXZlbnREZWZhdWx0KCksdC5zdG9wUHJvcGFnYXRpb24oKSksYyl7bGV0IHQ9e307dHJ5e3Q9SlNPTi5wYXJzZShjKX1jYXRjaCh0KXt9byYmby5hcHBseUNoYW5nZSh0KX1lbHNlIGwmJm8mJm9bbF0mJm9bbF0oKX1vbkNoYW5nZSgpe3RoaXMub25SZWZyZXNoKCl9b25SZWZyZXNoKCl7aWYodGhpcy5pbnN0YW5jZS5pc0Nsb3NpbmcoKSlyZXR1cm47Y29uc3QgdD10aGlzLmNvbnRhaW5lcjtpZighdClyZXR1cm47Y29uc3QgZT10aGlzLmluc3RhbmNlLmdldFNsaWRlKCk7aWYoIWV8fGUuc3RhdGUhPT1sdC5SZWFkeSlyZXR1cm47Y29uc3QgaT1lJiYhZS5lcnJvciYmZS5wYW56b29tO2Zvcihjb25zdCBlIG9mIHQucXVlcnlTZWxlY3RvckFsbChcIltkYXRhLXBhbnpvb20tYWN0aW9uXVwiKSlpPyhlLnJlbW92ZUF0dHJpYnV0ZShcImRpc2FibGVkXCIpLGUucmVtb3ZlQXR0cmlidXRlKFwidGFiaW5kZXhcIikpOihlLnNldEF0dHJpYnV0ZShcImRpc2FibGVkXCIsXCJcIiksZS5zZXRBdHRyaWJ1dGUoXCJ0YWJpbmRleFwiLFwiLTFcIikpO2xldCBuPWkmJmkuY2FuWm9vbUluKCkscz1pJiZpLmNhblpvb21PdXQoKTtmb3IoY29uc3QgZSBvZiB0LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLXBhbnpvb20tYWN0aW9uPVwiem9vbUluXCJdJykpbj8oZS5yZW1vdmVBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKSxlLnJlbW92ZUF0dHJpYnV0ZShcInRhYmluZGV4XCIpKTooZS5zZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiLFwiXCIpLGUuc2V0QXR0cmlidXRlKFwidGFiaW5kZXhcIixcIi0xXCIpKTtmb3IoY29uc3QgZSBvZiB0LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLXBhbnpvb20tYWN0aW9uPVwiem9vbU91dFwiXScpKXM/KGUucmVtb3ZlQXR0cmlidXRlKFwiZGlzYWJsZWRcIiksZS5yZW1vdmVBdHRyaWJ1dGUoXCJ0YWJpbmRleFwiKSk6KGUuc2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIixcIlwiKSxlLnNldEF0dHJpYnV0ZShcInRhYmluZGV4XCIsXCItMVwiKSk7Zm9yKGNvbnN0IGUgb2YgdC5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1wYW56b29tLWFjdGlvbj1cInRvZ2dsZVpvb21cIl0sW2RhdGEtcGFuem9vbS1hY3Rpb249XCJpdGVyYXRlWm9vbVwiXScpKXtzfHxuPyhlLnJlbW92ZUF0dHJpYnV0ZShcImRpc2FibGVkXCIpLGUucmVtb3ZlQXR0cmlidXRlKFwidGFiaW5kZXhcIikpOihlLnNldEF0dHJpYnV0ZShcImRpc2FibGVkXCIsXCJcIiksZS5zZXRBdHRyaWJ1dGUoXCJ0YWJpbmRleFwiLFwiLTFcIikpO2NvbnN0IHQ9ZS5xdWVyeVNlbGVjdG9yKFwiZ1wiKTt0JiYodC5zdHlsZS5kaXNwbGF5PW4/XCJcIjpcIm5vbmVcIil9fW9uRG9uZSh0LGUpe3ZhciBpO251bGw9PT0oaT1lLnBhbnpvb20pfHx2b2lkIDA9PT1pfHxpLm9uKFwiYWZ0ZXJUcmFuc2Zvcm1cIiwoKCk9Pnt0aGlzLmluc3RhbmNlLmlzQ3VycmVudFNsaWRlKGUpJiZ0aGlzLm9uUmVmcmVzaCgpfSkpLHRoaXMuaW5zdGFuY2UuaXNDdXJyZW50U2xpZGUoZSkmJnRoaXMub25SZWZyZXNoKCl9Y3JlYXRlQ29udGFpbmVyKCl7Y29uc3QgdD10aGlzLmluc3RhbmNlLmNvbnRhaW5lcjtpZighdClyZXR1cm4gbnVsbDtjb25zdCBlPXRoaXMub3B0aW9uKFwicGFyZW50RWxcIil8fHQ7bGV0IGk9ZS5xdWVyeVNlbGVjdG9yKFwiLlwiK0p0KTtyZXR1cm4gaXx8KGk9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSxDKGksSnQpLGUucHJlcGVuZChpKSksaS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIix0aGlzLm9uQ2xpY2sse3Bhc3NpdmU6ITEsY2FwdHVyZTohMH0pLHQmJkModCxLdCksdGhpcy5jb250YWluZXI9aSxpfWNyZWF0ZUVsKHQpe2NvbnN0IGU9dGhpcy5pbnN0YW5jZSxpPWUuY2Fyb3VzZWw7aWYoIWkpcmV0dXJuIG51bGw7aWYoXCJ0b2dnbGVGU1wiPT09dClyZXR1cm4gbnVsbDtpZihcImZ1bGxzY3JlZW5cIj09PXQmJiFvdCgpKXJldHVybiBudWxsO2xldCBuPW51bGw7Y29uc3Qgbz1pLnNsaWRlcy5sZW5ndGh8fDA7bGV0IGE9MCxyPTA7Zm9yKGNvbnN0IHQgb2YgaS5zbGlkZXMpKHQucGFuem9vbXx8XCJpbWFnZVwiPT09dC50eXBlKSYmYSsrLChcImltYWdlXCI9PT10LnR5cGV8fHQuZG93bmxvYWRTcmMpJiZyKys7aWYobzwyJiZbXCJpbmZvYmFyXCIsXCJwcmV2XCIsXCJuZXh0XCJdLmluY2x1ZGVzKHQpKXJldHVybiBuO2lmKHZvaWQgMCE9PVZ0W3RdJiYhYSlyZXR1cm4gbnVsbDtpZihcImRvd25sb2FkXCI9PT10JiYhcilyZXR1cm4gbnVsbDtpZihcInRodW1ic1wiPT09dCl7Y29uc3QgdD1lLnBsdWdpbnMuVGh1bWJzO2lmKCF0fHwhdC5pc0VuYWJsZWQpcmV0dXJuIG51bGx9aWYoXCJzbGlkZXNob3dcIj09PXQpe2lmKCFpLnBsdWdpbnMuQXV0b3BsYXl8fG88MilyZXR1cm4gbnVsbH1pZih2b2lkIDAhPT1WdFt0XSl7Y29uc3QgZT1WdFt0XTtuPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIiksbi5zZXRBdHRyaWJ1dGUoXCJ0aXRsZVwiLHRoaXMuaW5zdGFuY2UubG9jYWxpemUoYHt7JHt0LnRvVXBwZXJDYXNlKCl9fX1gKSksQyhuLFwiZi1idXR0b25cIiksZS5hY3Rpb24mJihuLmRhdGFzZXQucGFuem9vbUFjdGlvbj1lLmFjdGlvbiksZS5jaGFuZ2UmJihuLmRhdGFzZXQucGFuem9vbUNoYW5nZT1KU09OLnN0cmluZ2lmeShlLmNoYW5nZSkpLG4uYXBwZW5kQ2hpbGQocyh0aGlzLmluc3RhbmNlLmxvY2FsaXplKGUuaWNvbikpKX1lbHNle2NvbnN0IGU9KHRoaXMub3B0aW9uKFwiaXRlbXNcIil8fFtdKVt0XTtlJiYobj1zKHRoaXMuaW5zdGFuY2UubG9jYWxpemUoZS50cGwpKSxcImZ1bmN0aW9uXCI9PXR5cGVvZiBlLmNsaWNrJiZuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCh0PT57dC5wcmV2ZW50RGVmYXVsdCgpLHQuc3RvcFByb3BhZ2F0aW9uKCksXCJmdW5jdGlvblwiPT10eXBlb2YgZS5jbGljayYmZS5jbGljay5jYWxsKHRoaXMsdGhpcyx0KX0pKSl9Y29uc3QgbD1udWxsPT1uP3ZvaWQgMDpuLnF1ZXJ5U2VsZWN0b3IoXCJzdmdcIik7aWYobClmb3IoY29uc3RbdCxlXW9mIE9iamVjdC5lbnRyaWVzKEd0KSlsLmdldEF0dHJpYnV0ZSh0KXx8bC5zZXRBdHRyaWJ1dGUodCxTdHJpbmcoZSkpO3JldHVybiBufXJlbW92ZUNvbnRhaW5lcigpe2NvbnN0IHQ9dGhpcy5jb250YWluZXI7dCYmdC5yZW1vdmUoKSx0aGlzLmNvbnRhaW5lcj1udWxsLHRoaXMuc3RhdGU9WnQuRGlzYWJsZWQ7Y29uc3QgZT10aGlzLmluc3RhbmNlLmNvbnRhaW5lcjtlJiZQKGUsS3QpfWF0dGFjaCgpe2NvbnN0IHQ9dGhpcyxlPXQuaW5zdGFuY2U7ZS5vbihcIkNhcm91c2VsLmluaXRTbGlkZXNcIix0Lm9uUmVhZHkpLGUub24oXCJkb25lXCIsdC5vbkRvbmUpLGUub24oW1wicmV2ZWFsXCIsXCJDYXJvdXNlbC5jaGFuZ2VcIl0sdC5vbkNoYW5nZSksdC5vblJlYWR5KHQuaW5zdGFuY2UpfWRldGFjaCgpe2NvbnN0IHQ9dGhpcyxlPXQuaW5zdGFuY2U7ZS5vZmYoXCJDYXJvdXNlbC5pbml0U2xpZGVzXCIsdC5vblJlYWR5KSxlLm9mZihcImRvbmVcIix0Lm9uRG9uZSksZS5vZmYoW1wicmV2ZWFsXCIsXCJDYXJvdXNlbC5jaGFuZ2VcIl0sdC5vbkNoYW5nZSksdC5yZW1vdmVDb250YWluZXIoKX19T2JqZWN0LmRlZmluZVByb3BlcnR5KFF0LFwiZGVmYXVsdHNcIix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6VXR9KTtjb25zdCB0ZT17SGFzaDpjbGFzcyBleHRlbmRzIF97b25SZWFkeSgpe2h0PSExfW9uQ2hhbmdlKHQpe3V0JiZjbGVhclRpbWVvdXQodXQpO2NvbnN0e2hhc2g6ZX09ZnQoKSx7aGFzaDppfT1wdCgpLG49dC5pc09wZW5pbmdTbGlkZSh0LmdldFNsaWRlKCkpO24mJihjdD1pPT09ZT9cIlwiOmkpLGUmJmUhPT1pJiYodXQ9c2V0VGltZW91dCgoKCk9Pnt0cnl7aWYodC5zdGF0ZT09PXJ0LlJlYWR5KXtsZXQgdD1cInJlcGxhY2VTdGF0ZVwiO24mJiFkdCYmKHQ9XCJwdXNoU3RhdGVcIixkdD0hMCksd2luZG93Lmhpc3RvcnlbdF0oe30sZG9jdW1lbnQudGl0bGUsd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lK3dpbmRvdy5sb2NhdGlvbi5zZWFyY2grZSl9fWNhdGNoKHQpe319KSwzMDApKX1vbkNsb3NlKHQpe2lmKHV0JiZjbGVhclRpbWVvdXQodXQpLCFodCYmZHQpcmV0dXJuIGR0PSExLGh0PSExLHZvaWQgd2luZG93Lmhpc3RvcnkuYmFjaygpO2lmKCFodCl0cnl7d2luZG93Lmhpc3RvcnkucmVwbGFjZVN0YXRlKHt9LGRvY3VtZW50LnRpdGxlLHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSt3aW5kb3cubG9jYXRpb24uc2VhcmNoKyhjdHx8XCJcIikpfWNhdGNoKHQpe319YXR0YWNoKCl7Y29uc3QgdD10aGlzLmluc3RhbmNlO3Qub24oXCJyZWFkeVwiLHRoaXMub25SZWFkeSksdC5vbihbXCJDYXJvdXNlbC5yZWFkeVwiLFwiQ2Fyb3VzZWwuY2hhbmdlXCJdLHRoaXMub25DaGFuZ2UpLHQub24oXCJjbG9zZVwiLHRoaXMub25DbG9zZSl9ZGV0YWNoKCl7Y29uc3QgdD10aGlzLmluc3RhbmNlO3Qub2ZmKFwicmVhZHlcIix0aGlzLm9uUmVhZHkpLHQub2ZmKFtcIkNhcm91c2VsLnJlYWR5XCIsXCJDYXJvdXNlbC5jaGFuZ2VcIl0sdGhpcy5vbkNoYW5nZSksdC5vZmYoXCJjbG9zZVwiLHRoaXMub25DbG9zZSl9c3RhdGljIHBhcnNlVVJMKCl7cmV0dXJuIHB0KCl9c3RhdGljIHN0YXJ0RnJvbVVybCgpe2d0KCl9c3RhdGljIGRlc3Ryb3koKXt3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImhhc2hjaGFuZ2VcIix2dCwhMSl9fSxIdG1sOkx0LEltYWdlczp3dCxTbGlkZXNob3c6RHQsVGh1bWJzOll0LFRvb2xiYXI6UXR9LGVlPVwid2l0aC1mYW5jeWJveFwiLGllPVwiaGlkZS1zY3JvbGxiYXJcIixuZT1cIi0tZmFuY3lib3gtc2Nyb2xsYmFyLWNvbXBlbnNhdGVcIixzZT1cIi0tZmFuY3lib3gtYm9keS1tYXJnaW5cIixvZT1cImFyaWEtaGlkZGVuXCIsYWU9XCJpcy11c2luZy10YWJcIixyZT1cImlzLWFuaW1hdGVkXCIsbGU9XCJpcy1jb21wYWN0XCIsY2U9XCJpcy1sb2FkaW5nXCIsaGU9XCJpcy1vcGVuaW5nXCIsZGU9XCJoYXMtY2FwdGlvblwiLHVlPVwiZGlzYWJsZWRcIixmZT1cInRhYmluZGV4XCIscGU9XCJkb3dubG9hZFwiLGdlPVwiaHJlZlwiLG1lPVwic3JjXCIsdmU9dD0+XCJzdHJpbmdcIj09dHlwZW9mIHQsYmU9ZnVuY3Rpb24oKXt2YXIgdD13aW5kb3cuZ2V0U2VsZWN0aW9uKCk7cmV0dXJuISF0JiZcIlJhbmdlXCI9PT10LnR5cGV9O2xldCB5ZSx3ZT1udWxsLHhlPW51bGwsRWU9MCxTZT0wO2NvbnN0IFBlPW5ldyBNYXA7bGV0IENlPTA7Y2xhc3MgVGUgZXh0ZW5kcyBte2dldCBpc0lkbGUoKXtyZXR1cm4gdGhpcy5pZGxlfWdldCBpc0NvbXBhY3QoKXtyZXR1cm4gdGhpcy5vcHRpb24oXCJjb21wYWN0XCIpfWNvbnN0cnVjdG9yKHQ9W10sZT17fSxpPXt9KXtzdXBlcihlKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxcInVzZXJTbGlkZXNcIix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6W119KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxcInVzZXJQbHVnaW5zXCIse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOnt9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJpZGxlXCIse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOiExfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJpZGxlVGltZXJcIix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6bnVsbH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwiY2xpY2tUaW1lclwiLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTpudWxsfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJwd3RcIix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6MH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwiaWdub3JlRm9jdXNDaGFuZ2VcIix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6ITF9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxcInN0YXJ0ZWRGc1wiLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTohMX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwic3RhdGVcIix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6cnQuSW5pdH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwiaWRcIix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6MH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwiY29udGFpbmVyXCIse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOm51bGx9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxcImNhcHRpb25cIix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6bnVsbH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwiZm9vdGVyXCIse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOm51bGx9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxcImNhcm91c2VsXCIse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOm51bGx9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxcImxhc3RGb2N1c1wiLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTpudWxsfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJwcmV2TW91c2VNb3ZlRXZlbnRcIix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6dm9pZCAwfSkseWV8fCh5ZT1vdCgpKSx0aGlzLmlkPWUuaWR8fCsrQ2UsUGUuc2V0KHRoaXMuaWQsdGhpcyksdGhpcy51c2VyU2xpZGVzPXQsdGhpcy51c2VyUGx1Z2lucz1pLHF1ZXVlTWljcm90YXNrKCgoKT0+e3RoaXMuaW5pdCgpfSkpfWluaXQoKXtpZih0aGlzLnN0YXRlPT09cnQuRGVzdHJveSlyZXR1cm47dGhpcy5zdGF0ZT1ydC5Jbml0LHRoaXMuYXR0YWNoUGx1Z2lucyhPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sVGUuUGx1Z2lucyksdGhpcy51c2VyUGx1Z2lucykpLHRoaXMuZW1pdChcImluaXRcIiksdGhpcy5lbWl0KFwiYXR0YWNoUGx1Z2luc1wiKSwhMD09PXRoaXMub3B0aW9uKFwiaGlkZVNjcm9sbGJhclwiKSYmKCgpPT57aWYoIWV0KXJldHVybjtjb25zdCB0PWRvY3VtZW50LGU9dC5ib2R5LGk9dC5kb2N1bWVudEVsZW1lbnQ7aWYoZS5jbGFzc0xpc3QuY29udGFpbnMoaWUpKXJldHVybjtsZXQgbj13aW5kb3cuaW5uZXJXaWR0aC1pLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoO2NvbnN0IHM9cGFyc2VGbG9hdCh3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShlKS5tYXJnaW5SaWdodCk7bjwwJiYobj0wKSxpLnN0eWxlLnNldFByb3BlcnR5KG5lLGAke259cHhgKSxzJiZlLnN0eWxlLnNldFByb3BlcnR5KHNlLGAke3N9cHhgKSxlLmNsYXNzTGlzdC5hZGQoaWUpfSkoKSx0aGlzLmluaXRMYXlvdXQoKSx0aGlzLnNjYWxlKCk7Y29uc3QgdD0oKT0+e3RoaXMuaW5pdENhcm91c2VsKHRoaXMudXNlclNsaWRlcyksdGhpcy5zdGF0ZT1ydC5SZWFkeSx0aGlzLmF0dGFjaEV2ZW50cygpLHRoaXMuZW1pdChcInJlYWR5XCIpLHNldFRpbWVvdXQoKCgpPT57dGhpcy5jb250YWluZXImJnRoaXMuY29udGFpbmVyLnNldEF0dHJpYnV0ZShvZSxcImZhbHNlXCIpfSksMTYpfTt0aGlzLm9wdGlvbihcIkZ1bGxzY3JlZW4uYXV0b1N0YXJ0XCIpJiZ5ZSYmIXllLmlzRnVsbHNjcmVlbigpP3llLnJlcXVlc3QoKS50aGVuKCgoKT0+e3RoaXMuc3RhcnRlZEZzPSEwLHQoKX0pKS5jYXRjaCgoKCk9PnQoKSkpOnQoKX1pbml0TGF5b3V0KCl7dmFyIHQsZTtjb25zdCBpPXRoaXMub3B0aW9uKFwicGFyZW50RWxcIil8fGRvY3VtZW50LmJvZHksbj1zKHRoaXMubG9jYWxpemUodGhpcy5vcHRpb24oXCJ0cGwubWFpblwiKXx8XCJcIikpO24mJihuLnNldEF0dHJpYnV0ZShcImlkXCIsYGZhbmN5Ym94LSR7dGhpcy5pZH1gKSxuLnNldEF0dHJpYnV0ZShcImFyaWEtbGFiZWxcIix0aGlzLmxvY2FsaXplKFwie3tNT0RBTH19XCIpKSxuLmNsYXNzTGlzdC50b2dnbGUobGUsdGhpcy5pc0NvbXBhY3QpLEMobix0aGlzLm9wdGlvbihcIm1haW5DbGFzc1wiKXx8XCJcIiksQyhuLGhlKSx0aGlzLmNvbnRhaW5lcj1uLHRoaXMuZm9vdGVyPW4ucXVlcnlTZWxlY3RvcihcIi5mYW5jeWJveF9fZm9vdGVyXCIpLGkuYXBwZW5kQ2hpbGQobiksQyhkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsZWUpLHdlJiZ4ZXx8KHdlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpLEMod2UsXCJmYW5jeWJveC1mb2N1cy1ndWFyZFwiKSx3ZS5zZXRBdHRyaWJ1dGUoZmUsXCIwXCIpLHdlLnNldEF0dHJpYnV0ZShvZSxcInRydWVcIiksd2Uuc2V0QXR0cmlidXRlKFwiYXJpYS1sYWJlbFwiLFwiRm9jdXMgZ3VhcmRcIikseGU9d2UuY2xvbmVOb2RlKCksbnVsbD09PSh0PW4ucGFyZW50RWxlbWVudCl8fHZvaWQgMD09PXR8fHQuaW5zZXJ0QmVmb3JlKHdlLG4pLG51bGw9PT0oZT1uLnBhcmVudEVsZW1lbnQpfHx2b2lkIDA9PT1lfHxlLmFwcGVuZCh4ZSkpLG4uYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCh0PT57RWU9dC5wYWdlWCxTZT10LnBhZ2VZLFAobixhZSl9KSksdGhpcy5vcHRpb24oXCJhbmltYXRlZFwiKSYmKEMobixyZSksc2V0VGltZW91dCgoKCk9Pnt0aGlzLmlzQ2xvc2luZygpfHxQKG4scmUpfSksMzUwKSksdGhpcy5lbWl0KFwiaW5pdExheW91dFwiKSl9aW5pdENhcm91c2VsKHQpe2NvbnN0IGU9dGhpcy5jb250YWluZXI7aWYoIWUpcmV0dXJuO2NvbnN0IG49ZS5xdWVyeVNlbGVjdG9yKFwiLmZhbmN5Ym94X19jYXJvdXNlbFwiKTtpZighbilyZXR1cm47Y29uc3Qgcz10aGlzLmNhcm91c2VsPW5ldyBRKG4sZih7fSx7c2xpZGVzOnQsdHJhbnNpdGlvbjpcImZhZGVcIixQYW56b29tOntsb2NrQXhpczp0aGlzLm9wdGlvbihcImRyYWdUb0Nsb3NlXCIpP1wieHlcIjpcInhcIixpbmZpbml0ZTohIXRoaXMub3B0aW9uKFwiZHJhZ1RvQ2xvc2VcIikmJlwieVwifSxEb3RzOiExLE5hdmlnYXRpb246e2NsYXNzZXM6e2NvbnRhaW5lcjpcImZhbmN5Ym94X19uYXZcIixidXR0b246XCJmLWJ1dHRvblwiLGlzTmV4dDpcImlzLW5leHRcIixpc1ByZXY6XCJpcy1wcmV2XCJ9fSxpbml0aWFsUGFnZTp0aGlzLm9wdGlvbihcInN0YXJ0SW5kZXhcIiksbDEwbjp0aGlzLm9wdGlvbihcImwxMG5cIil9LHRoaXMub3B0aW9uKFwiQ2Fyb3VzZWxcIil8fHt9KSk7cy5vbihcIipcIiwoKHQsZSwuLi5pKT0+e3RoaXMuZW1pdChgQ2Fyb3VzZWwuJHtlfWAsdCwuLi5pKX0pKSxzLm9uKFtcInJlYWR5XCIsXCJjaGFuZ2VcIl0sKCgpPT57dGhpcy5tYW5hZ2VDYXB0aW9uKCl9KSksdGhpcy5vbihcIkNhcm91c2VsLnJlbW92ZVNsaWRlXCIsKCh0LGUsaSk9Pnt0aGlzLmNsZWFyQ29udGVudChpKSxpLnN0YXRlPXZvaWQgMH0pKSxzLm9uKFwiUGFuem9vbS50b3VjaFN0YXJ0XCIsKCgpPT57dmFyIHQsZTt0aGlzLmlzQ29tcGFjdHx8dGhpcy5lbmRJZGxlKCksKG51bGw9PT0odD1kb2N1bWVudC5hY3RpdmVFbGVtZW50KXx8dm9pZCAwPT09dD92b2lkIDA6dC5jbG9zZXN0KFwiLmYtdGh1bWJzXCIpKSYmKG51bGw9PT0oZT10aGlzLmNvbnRhaW5lcil8fHZvaWQgMD09PWV8fGUuZm9jdXMoKSl9KSkscy5vbihcInNldHRsZVwiLCgoKT0+e3RoaXMuaWRsZVRpbWVyfHx0aGlzLmlzQ29tcGFjdHx8IXRoaXMub3B0aW9uKFwiaWRsZVwiKXx8dGhpcy5zZXRJZGxlKCksdGhpcy5vcHRpb24oXCJhdXRvRm9jdXNcIikmJiF0aGlzLmlzQ2xvc2luZyYmdGhpcy5jaGVja0ZvY3VzKCl9KSksdGhpcy5vcHRpb24oXCJkcmFnVG9DbG9zZVwiKSYmKHMub24oXCJQYW56b29tLmFmdGVyVHJhbnNmb3JtXCIsKCh0LGUpPT57Y29uc3Qgbj10aGlzLmdldFNsaWRlKCk7aWYobiYmaShuLmVsKSlyZXR1cm47Y29uc3Qgcz10aGlzLmNvbnRhaW5lcjtpZihzKXtjb25zdCB0PU1hdGguYWJzKGUuY3VycmVudC5mKSxpPXQ8MT9cIlwiOk1hdGgubWF4KC41LE1hdGgubWluKDEsMS10L2UuY29udGVudFJlY3QuZml0SGVpZ2h0KjEuNSkpO3Muc3R5bGUuc2V0UHJvcGVydHkoXCItLWZhbmN5Ym94LXRzXCIsaT9cIjBzXCI6XCJcIikscy5zdHlsZS5zZXRQcm9wZXJ0eShcIi0tZmFuY3lib3gtb3BhY2l0eVwiLGkrXCJcIil9fSkpLHMub24oXCJQYW56b29tLnRvdWNoRW5kXCIsKCh0LGUsbik9Pnt2YXIgcztjb25zdCBvPXRoaXMuZ2V0U2xpZGUoKTtpZihvJiZpKG8uZWwpKXJldHVybjtpZihlLmlzTW9iaWxlJiZkb2N1bWVudC5hY3RpdmVFbGVtZW50JiYtMSE9PVtcIlRFWFRBUkVBXCIsXCJJTlBVVFwiXS5pbmRleE9mKG51bGw9PT0ocz1kb2N1bWVudC5hY3RpdmVFbGVtZW50KXx8dm9pZCAwPT09cz92b2lkIDA6cy5ub2RlTmFtZSkpcmV0dXJuO2NvbnN0IGE9TWF0aC5hYnMoZS5kcmFnT2Zmc2V0LnkpO1wieVwiPT09ZS5sb2NrZWRBeGlzJiYoYT49MjAwfHxhPj01MCYmZS5kcmFnT2Zmc2V0LnRpbWU8MzAwKSYmKG4mJm4uY2FuY2VsYWJsZSYmbi5wcmV2ZW50RGVmYXVsdCgpLHRoaXMuY2xvc2UobixcImYtdGhyb3dPdXRcIisoZS5jdXJyZW50LmY8MD9cIlVwXCI6XCJEb3duXCIpKSl9KSkpLHMub24oXCJjaGFuZ2VcIiwodD0+e3ZhciBlO2xldCBpPW51bGw9PT0oZT10aGlzLmdldFNsaWRlKCkpfHx2b2lkIDA9PT1lP3ZvaWQgMDplLnRyaWdnZXJFbDtpZihpKXtjb25zdCBlPW5ldyBDdXN0b21FdmVudChcInNsaWRlVG9cIix7YnViYmxlczohMCxjYW5jZWxhYmxlOiEwLGRldGFpbDp0LnBhZ2V9KTtpLmRpc3BhdGNoRXZlbnQoZSl9fSkpLHMub24oW1wicmVmcmVzaFwiLFwiY2hhbmdlXCJdLCh0PT57Y29uc3QgZT10aGlzLmNvbnRhaW5lcjtpZighZSlyZXR1cm47Zm9yKGNvbnN0IGkgb2YgZS5xdWVyeVNlbGVjdG9yQWxsKFwiW2RhdGEtZmFuY3lib3gtY3VycmVudC1pbmRleF1cIikpaS5pbm5lckhUTUw9dC5wYWdlKzE7Zm9yKGNvbnN0IGkgb2YgZS5xdWVyeVNlbGVjdG9yQWxsKFwiW2RhdGEtZmFuY3lib3gtY291bnRdXCIpKWkuaW5uZXJIVE1MPXQucGFnZXMubGVuZ3RoO2lmKCF0LmlzSW5maW5pdGUpe2Zvcihjb25zdCBpIG9mIGUucXVlcnlTZWxlY3RvckFsbChcIltkYXRhLWZhbmN5Ym94LW5leHRdXCIpKXQucGFnZTx0LnBhZ2VzLmxlbmd0aC0xPyhpLnJlbW92ZUF0dHJpYnV0ZSh1ZSksaS5yZW1vdmVBdHRyaWJ1dGUoZmUpKTooaS5zZXRBdHRyaWJ1dGUodWUsXCJcIiksaS5zZXRBdHRyaWJ1dGUoZmUsXCItMVwiKSk7Zm9yKGNvbnN0IGkgb2YgZS5xdWVyeVNlbGVjdG9yQWxsKFwiW2RhdGEtZmFuY3lib3gtcHJldl1cIikpdC5wYWdlPjA/KGkucmVtb3ZlQXR0cmlidXRlKHVlKSxpLnJlbW92ZUF0dHJpYnV0ZShmZSkpOihpLnNldEF0dHJpYnV0ZSh1ZSxcIlwiKSxpLnNldEF0dHJpYnV0ZShmZSxcIi0xXCIpKX1jb25zdCBpPXRoaXMuZ2V0U2xpZGUoKTtpZighaSlyZXR1cm47bGV0IG49aS5kb3dubG9hZFNyY3x8XCJcIjtufHxcImltYWdlXCIhPT1pLnR5cGV8fGkuZXJyb3J8fCF2ZShpW21lXSl8fChuPWlbbWVdKTtmb3IoY29uc3QgdCBvZiBlLnF1ZXJ5U2VsZWN0b3JBbGwoXCJbZGF0YS1mYW5jeWJveC1kb3dubG9hZF1cIikpe2NvbnN0IGU9aS5kb3dubG9hZEZpbGVuYW1lO24/KHQucmVtb3ZlQXR0cmlidXRlKHVlKSx0LnJlbW92ZUF0dHJpYnV0ZShmZSksdC5zZXRBdHRyaWJ1dGUoZ2UsbiksdC5zZXRBdHRyaWJ1dGUocGUsZXx8biksdC5zZXRBdHRyaWJ1dGUoXCJ0YXJnZXRcIixcIl9ibGFua1wiKSk6KHQuc2V0QXR0cmlidXRlKHVlLFwiXCIpLHQuc2V0QXR0cmlidXRlKGZlLFwiLTFcIiksdC5yZW1vdmVBdHRyaWJ1dGUoZ2UpLHQucmVtb3ZlQXR0cmlidXRlKHBlKSl9fSkpLHRoaXMuZW1pdChcImluaXRDYXJvdXNlbFwiKX1hdHRhY2hFdmVudHMoKXtjb25zdCB0PXRoaXMsZT10LmNvbnRhaW5lcjtpZighZSlyZXR1cm47ZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIix0Lm9uQ2xpY2sse3Bhc3NpdmU6ITEsY2FwdHVyZTohMX0pLGUuYWRkRXZlbnRMaXN0ZW5lcihcIndoZWVsXCIsdC5vbldoZWVsLHtwYXNzaXZlOiExLGNhcHR1cmU6ITF9KSxkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLHQub25LZXlkb3duLHtwYXNzaXZlOiExLGNhcHR1cmU6ITB9KSxkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwidmlzaWJpbGl0eWNoYW5nZVwiLHQub25WaXNpYmlsaXR5Q2hhbmdlLCExKSxkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsdC5vbk1vdXNlbW92ZSksdC5vcHRpb24oXCJ0cmFwRm9jdXNcIikmJmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJmb2N1c1wiLHQub25Gb2N1cywhMCksd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIix0Lm9uUmVzaXplKTtjb25zdCBpPXdpbmRvdy52aXN1YWxWaWV3cG9ydDtpJiYoaS5hZGRFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsdC5vblJlc2l6ZSksaS5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsdC5vblJlc2l6ZSkpfWRldGFjaEV2ZW50cygpe2NvbnN0IHQ9dGhpcyxlPXQuY29udGFpbmVyO2lmKCFlKXJldHVybjtkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLHQub25LZXlkb3duLHtwYXNzaXZlOiExLGNhcHR1cmU6ITB9KSxlLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ3aGVlbFwiLHQub25XaGVlbCx7cGFzc2l2ZTohMSxjYXB0dXJlOiExfSksZS5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIix0Lm9uQ2xpY2sse3Bhc3NpdmU6ITEsY2FwdHVyZTohMX0pLGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIix0Lm9uTW91c2Vtb3ZlKSx3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLHQub25SZXNpemUpO2NvbnN0IGk9d2luZG93LnZpc3VhbFZpZXdwb3J0O2kmJihpLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIix0Lm9uUmVzaXplKSxpLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIix0Lm9uUmVzaXplKSksZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInZpc2liaWxpdHljaGFuZ2VcIix0Lm9uVmlzaWJpbGl0eUNoYW5nZSwhMSksZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImZvY3VzXCIsdC5vbkZvY3VzLCEwKX1zY2FsZSgpe2NvbnN0IHQ9dGhpcy5jb250YWluZXI7aWYoIXQpcmV0dXJuO2NvbnN0IGU9d2luZG93LnZpc3VhbFZpZXdwb3J0LGk9TWF0aC5tYXgoMSwobnVsbD09ZT92b2lkIDA6ZS5zY2FsZSl8fDEpO2xldCBuPVwiXCIscz1cIlwiLG89XCJcIjtpZihlJiZpPjEpe2xldCB0PWAke2Uub2Zmc2V0TGVmdH1weGAsYT1gJHtlLm9mZnNldFRvcH1weGA7bj1lLndpZHRoKmkrXCJweFwiLHM9ZS5oZWlnaHQqaStcInB4XCIsbz1gdHJhbnNsYXRlM2QoJHt0fSwgJHthfSwgMCkgc2NhbGUoJHsxL2l9KWB9dC5zdHlsZS50cmFuc2Zvcm09byx0LnN0eWxlLndpZHRoPW4sdC5zdHlsZS5oZWlnaHQ9c31vbkNsaWNrKHQpe3ZhciBlO2NvbnN0e2NvbnRhaW5lcjppLGlzQ29tcGFjdDpufT10aGlzO2lmKCFpfHx0aGlzLmlzQ2xvc2luZygpKXJldHVybjshbiYmdGhpcy5vcHRpb24oXCJpZGxlXCIpJiZ0aGlzLnJlc2V0SWRsZSgpO2NvbnN0IHM9dC5jb21wb3NlZFBhdGgoKVswXTtpZihzLmNsb3Nlc3QoXCIuZmFuY3lib3gtc3Bpbm5lclwiKXx8cy5jbG9zZXN0KFwiW2RhdGEtZmFuY3lib3gtY2xvc2VdXCIpKXJldHVybiB0LnByZXZlbnREZWZhdWx0KCksdm9pZCB0aGlzLmNsb3NlKHQpO2lmKHMuY2xvc2VzdChcIltkYXRhLWZhbmN5Ym94LXByZXZdXCIpKXJldHVybiB0LnByZXZlbnREZWZhdWx0KCksdm9pZCB0aGlzLnByZXYoKTtpZihzLmNsb3Nlc3QoXCJbZGF0YS1mYW5jeWJveC1uZXh0XVwiKSlyZXR1cm4gdC5wcmV2ZW50RGVmYXVsdCgpLHZvaWQgdGhpcy5uZXh0KCk7aWYoXCJjbGlja1wiPT09dC50eXBlJiYwPT09dC5kZXRhaWwpcmV0dXJuO2lmKE1hdGguYWJzKHQucGFnZVgtRWUpPjMwfHxNYXRoLmFicyh0LnBhZ2VZLVNlKT4zMClyZXR1cm47Y29uc3Qgbz1kb2N1bWVudC5hY3RpdmVFbGVtZW50O2lmKGJlKCkmJm8mJmkuY29udGFpbnMobykpcmV0dXJuO2lmKG4mJlwiaW1hZ2VcIj09PShudWxsPT09KGU9dGhpcy5nZXRTbGlkZSgpKXx8dm9pZCAwPT09ZT92b2lkIDA6ZS50eXBlKSlyZXR1cm4gdm9pZCh0aGlzLmNsaWNrVGltZXI/KGNsZWFyVGltZW91dCh0aGlzLmNsaWNrVGltZXIpLHRoaXMuY2xpY2tUaW1lcj1udWxsKTp0aGlzLmNsaWNrVGltZXI9c2V0VGltZW91dCgoKCk9Pnt0aGlzLnRvZ2dsZUlkbGUoKSx0aGlzLmNsaWNrVGltZXI9bnVsbH0pLDM1MCkpO2lmKHRoaXMuZW1pdChcImNsaWNrXCIsdCksdC5kZWZhdWx0UHJldmVudGVkKXJldHVybjtsZXQgYT0hMTtpZihzLmNsb3Nlc3QoXCIuZmFuY3lib3hfX2NvbnRlbnRcIikpe2lmKG8pe2lmKG8uY2xvc2VzdChcIltjb250ZW50ZWRpdGFibGVdXCIpKXJldHVybjtzLm1hdGNoZXMobnQpfHxvLmJsdXIoKX1pZihiZSgpKXJldHVybjthPXRoaXMub3B0aW9uKFwiY29udGVudENsaWNrXCIpfWVsc2Ugcy5jbG9zZXN0KFwiLmZhbmN5Ym94X19jYXJvdXNlbFwiKSYmIXMubWF0Y2hlcyhudCkmJihhPXRoaXMub3B0aW9uKFwiYmFja2Ryb3BDbGlja1wiKSk7XCJjbG9zZVwiPT09YT8odC5wcmV2ZW50RGVmYXVsdCgpLHRoaXMuY2xvc2UodCkpOlwibmV4dFwiPT09YT8odC5wcmV2ZW50RGVmYXVsdCgpLHRoaXMubmV4dCgpKTpcInByZXZcIj09PWEmJih0LnByZXZlbnREZWZhdWx0KCksdGhpcy5wcmV2KCkpfW9uV2hlZWwodCl7Y29uc3QgZT10LnRhcmdldDtsZXQgaT10aGlzLm9wdGlvbihcIndoZWVsXCIsdCk7ZS5jbG9zZXN0KFwiLmZhbmN5Ym94X190aHVtYnNcIikmJihpPVwic2xpZGVcIik7Y29uc3Qgcz1cInNsaWRlXCI9PT1pLG89Wy10LmRlbHRhWHx8MCwtdC5kZWx0YVl8fDAsLXQuZGV0YWlsfHwwXS5yZWR1Y2UoKGZ1bmN0aW9uKHQsZSl7cmV0dXJuIE1hdGguYWJzKGUpPk1hdGguYWJzKHQpP2U6dH0pKSxhPU1hdGgubWF4KC0xLE1hdGgubWluKDEsbykpLHI9RGF0ZS5ub3coKTt0aGlzLnB3dCYmci10aGlzLnB3dDwzMDA/cyYmdC5wcmV2ZW50RGVmYXVsdCgpOih0aGlzLnB3dD1yLHRoaXMuZW1pdChcIndoZWVsXCIsdCxhKSx0LmRlZmF1bHRQcmV2ZW50ZWR8fChcImNsb3NlXCI9PT1pPyh0LnByZXZlbnREZWZhdWx0KCksdGhpcy5jbG9zZSh0KSk6XCJzbGlkZVwiPT09aSYmKG4oZSl8fCh0LnByZXZlbnREZWZhdWx0KCksdGhpc1thPjA/XCJwcmV2XCI6XCJuZXh0XCJdKCkpKSkpfW9uS2V5ZG93bih0KXtpZighdGhpcy5pc1RvcG1vc3QoKSlyZXR1cm47dGhpcy5pc0NvbXBhY3R8fCF0aGlzLm9wdGlvbihcImlkbGVcIil8fHRoaXMuaXNDbG9zaW5nKCl8fHRoaXMucmVzZXRJZGxlKCk7Y29uc3QgZT10LmtleSxpPXRoaXMub3B0aW9uKFwia2V5Ym9hcmRcIik7aWYoIWkpcmV0dXJuO2NvbnN0IG49dC5jb21wb3NlZFBhdGgoKVswXSxzPWRvY3VtZW50LmFjdGl2ZUVsZW1lbnQmJmRvY3VtZW50LmFjdGl2ZUVsZW1lbnQuY2xhc3NMaXN0LG89cyYmcy5jb250YWlucyhcImYtYnV0dG9uXCIpfHxuLmRhdGFzZXQuY2Fyb3VzZWxQYWdlfHxuLmRhdGFzZXQuY2Fyb3VzZWxJbmRleDtpZihcIkVzY2FwZVwiIT09ZSYmIW8mJlMobikpe2lmKG4uaXNDb250ZW50RWRpdGFibGV8fC0xIT09W1wiVEVYVEFSRUFcIixcIk9QVElPTlwiLFwiSU5QVVRcIixcIlNFTEVDVFwiLFwiVklERU9cIl0uaW5kZXhPZihuLm5vZGVOYW1lKSlyZXR1cm59aWYoXCJUYWJcIj09PXQua2V5P0ModGhpcy5jb250YWluZXIsYWUpOlAodGhpcy5jb250YWluZXIsYWUpLHQuY3RybEtleXx8dC5hbHRLZXl8fHQuc2hpZnRLZXkpcmV0dXJuO3RoaXMuZW1pdChcImtleWRvd25cIixlLHQpO2NvbnN0IGE9aVtlXTthJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiB0aGlzW2FdJiYodC5wcmV2ZW50RGVmYXVsdCgpLHRoaXNbYV0oKSl9b25SZXNpemUoKXtjb25zdCB0PXRoaXMuY29udGFpbmVyO2lmKCF0KXJldHVybjtjb25zdCBlPXRoaXMuaXNDb21wYWN0O3QuY2xhc3NMaXN0LnRvZ2dsZShsZSxlKSx0aGlzLm1hbmFnZUNhcHRpb24odGhpcy5nZXRTbGlkZSgpKSx0aGlzLmlzQ29tcGFjdD90aGlzLmNsZWFySWRsZSgpOnRoaXMuZW5kSWRsZSgpLHRoaXMuc2NhbGUoKSx0aGlzLmVtaXQoXCJyZXNpemVcIil9b25Gb2N1cyh0KXt0aGlzLmlzVG9wbW9zdCgpJiZ0aGlzLmNoZWNrRm9jdXModCl9b25Nb3VzZW1vdmUodCl7dGhpcy5wcmV2TW91c2VNb3ZlRXZlbnQ9dCwhdGhpcy5pc0NvbXBhY3QmJnRoaXMub3B0aW9uKFwiaWRsZVwiKSYmdGhpcy5yZXNldElkbGUoKX1vblZpc2liaWxpdHlDaGFuZ2UoKXtcInZpc2libGVcIj09PWRvY3VtZW50LnZpc2liaWxpdHlTdGF0ZT90aGlzLmNoZWNrRm9jdXMoKTp0aGlzLmVuZElkbGUoKX1tYW5hZ2VDbG9zZUJ0bih0KXtjb25zdCBlPXRoaXMub3B0aW9uRm9yKHQsXCJjbG9zZUJ1dHRvblwiKXx8ITE7aWYoXCJhdXRvXCI9PT1lKXtjb25zdCB0PXRoaXMucGx1Z2lucy5Ub29sYmFyO2lmKHQmJnQuc3RhdGU9PT1adC5SZWFkeSlyZXR1cm59aWYoIWUpcmV0dXJuO2lmKCF0LmNvbnRlbnRFbHx8dC5jbG9zZUJ0bkVsKXJldHVybjtjb25zdCBpPXRoaXMub3B0aW9uKFwidHBsLmNsb3NlQnV0dG9uXCIpO2lmKGkpe2NvbnN0IGU9cyh0aGlzLmxvY2FsaXplKGkpKTt0LmNsb3NlQnRuRWw9dC5jb250ZW50RWwuYXBwZW5kQ2hpbGQoZSksdC5lbCYmQyh0LmVsLFwiaGFzLWNsb3NlLWJ0blwiKX19bWFuYWdlQ2FwdGlvbih0PXZvaWQgMCl7dmFyIGUsaTtjb25zdCBuPVwiZmFuY3lib3hfX2NhcHRpb25cIixzPXRoaXMuY29udGFpbmVyO2lmKCFzKXJldHVybjtQKHMsZGUpO2NvbnN0IG89dGhpcy5pc0NvbXBhY3R8fHRoaXMub3B0aW9uKFwiY29tbW9uQ2FwdGlvblwiKSxhPSFvO2lmKHRoaXMuY2FwdGlvbiYmdGhpcy5zdG9wKHRoaXMuY2FwdGlvbiksYSYmdGhpcy5jYXB0aW9uJiYodGhpcy5jYXB0aW9uLnJlbW92ZSgpLHRoaXMuY2FwdGlvbj1udWxsKSxvJiYhdGhpcy5jYXB0aW9uKWZvcihjb25zdCB0IG9mKG51bGw9PT0oZT10aGlzLmNhcm91c2VsKXx8dm9pZCAwPT09ZT92b2lkIDA6ZS5zbGlkZXMpfHxbXSl0LmNhcHRpb25FbCYmKHQuY2FwdGlvbkVsLnJlbW92ZSgpLHQuY2FwdGlvbkVsPXZvaWQgMCxQKHQuZWwsZGUpLG51bGw9PT0oaT10LmVsKXx8dm9pZCAwPT09aXx8aS5yZW1vdmVBdHRyaWJ1dGUoXCJhcmlhLWxhYmVsbGVkYnlcIikpO2lmKHR8fCh0PXRoaXMuZ2V0U2xpZGUoKSksIXR8fG8mJiF0aGlzLmlzQ3VycmVudFNsaWRlKHQpKXJldHVybjtjb25zdCByPXQuZWw7bGV0IGw9dGhpcy5vcHRpb25Gb3IodCxcImNhcHRpb25cIixcIlwiKTtpZighbClyZXR1cm4gdm9pZChvJiZ0aGlzLmNhcHRpb24mJnRoaXMuYW5pbWF0ZSh0aGlzLmNhcHRpb24sXCJmLWZhZGVPdXRcIiwoKCk9Pnt0aGlzLmNhcHRpb24mJih0aGlzLmNhcHRpb24uaW5uZXJIVE1MPVwiXCIpfSkpKTtsZXQgYz1udWxsO2lmKGEpe2lmKGM9dC5jYXB0aW9uRWx8fG51bGwsciYmIWMpe2NvbnN0IGU9bitgXyR7dGhpcy5pZH1fJHt0LmluZGV4fWA7Yz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLEMoYyxuKSxjLnNldEF0dHJpYnV0ZShcImlkXCIsZSksdC5jYXB0aW9uRWw9ci5hcHBlbmRDaGlsZChjKSxDKHIsZGUpLHIuc2V0QXR0cmlidXRlKFwiYXJpYS1sYWJlbGxlZGJ5XCIsZSl9fWVsc2V7aWYoYz10aGlzLmNhcHRpb24sY3x8KGM9cy5xdWVyeVNlbGVjdG9yKFwiLlwiK24pKSwhYyl7Yz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLGMuZGF0YXNldC5mYW5jeWJveENhcHRpb249XCJcIixDKGMsbik7KHRoaXMuZm9vdGVyfHxzKS5wcmVwZW5kKGMpfUMocyxkZSksdGhpcy5jYXB0aW9uPWN9YyYmKGMuaW5uZXJIVE1MPVwiXCIsdmUobCl8fFwibnVtYmVyXCI9PXR5cGVvZiBsP2MuaW5uZXJIVE1MPWwrXCJcIjpsIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQmJmMuYXBwZW5kQ2hpbGQobCkpfWNoZWNrRm9jdXModCl7dGhpcy5mb2N1cyh0KX1mb2N1cyh0KXt2YXIgZTtpZih0aGlzLmlnbm9yZUZvY3VzQ2hhbmdlKXJldHVybjtjb25zdCBpPWRvY3VtZW50LmFjdGl2ZUVsZW1lbnR8fG51bGwsbj0obnVsbD09dD92b2lkIDA6dC50YXJnZXQpfHxudWxsLHM9dGhpcy5jb250YWluZXIsbz1udWxsPT09KGU9dGhpcy5jYXJvdXNlbCl8fHZvaWQgMD09PWU/dm9pZCAwOmUudmlld3BvcnQ7aWYoIXN8fCFvKXJldHVybjtpZighdCYmaSYmcy5jb250YWlucyhpKSlyZXR1cm47Y29uc3QgYT10aGlzLmdldFNsaWRlKCkscj1hJiZhLnN0YXRlPT09bHQuUmVhZHk/YS5lbDpudWxsO2lmKCFyfHxyLmNvbnRhaW5zKGkpfHxzPT09aSlyZXR1cm47dCYmdC5jYW5jZWxhYmxlJiZ0LnByZXZlbnREZWZhdWx0KCksdGhpcy5pZ25vcmVGb2N1c0NoYW5nZT0hMDtjb25zdCBsPUFycmF5LmZyb20ocy5xdWVyeVNlbGVjdG9yQWxsKG50KSk7bGV0IGM9W10saD1udWxsO2ZvcihsZXQgdCBvZiBsKXtjb25zdCBlPSF0Lm9mZnNldFBhcmVudHx8ISF0LmNsb3Nlc3QoJ1thcmlhLWhpZGRlbj1cInRydWVcIl0nKSxpPXImJnIuY29udGFpbnModCksbj0hby5jb250YWlucyh0KTtpZih0PT09c3x8KGl8fG4pJiYhZSl7Yy5wdXNoKHQpO2NvbnN0IGU9dC5kYXRhc2V0Lm9yaWdUYWJpbmRleDt2b2lkIDAhPT1lJiZlJiYodC50YWJJbmRleD1wYXJzZUZsb2F0KGUpKSx0LnJlbW92ZUF0dHJpYnV0ZShcImRhdGEtb3JpZy10YWJpbmRleFwiKSwhdC5oYXNBdHRyaWJ1dGUoXCJhdXRvRm9jdXNcIikmJmh8fChoPXQpfWVsc2V7Y29uc3QgZT12b2lkIDA9PT10LmRhdGFzZXQub3JpZ1RhYmluZGV4P3QuZ2V0QXR0cmlidXRlKFwidGFiaW5kZXhcIil8fFwiXCI6dC5kYXRhc2V0Lm9yaWdUYWJpbmRleDtlJiYodC5kYXRhc2V0Lm9yaWdUYWJpbmRleD1lKSx0LnRhYkluZGV4PS0xfX1sZXQgZD1udWxsO3Q/KCFufHxjLmluZGV4T2Yobik8MCkmJihkPWh8fHMsYy5sZW5ndGgmJihpPT09eGU/ZD1jWzBdOnRoaXMubGFzdEZvY3VzIT09cyYmaSE9PXdlfHwoZD1jW2MubGVuZ3RoLTFdKSkpOmQ9YSYmXCJpbWFnZVwiPT09YS50eXBlP3M6aHx8cyxkJiZzdChkKSx0aGlzLmxhc3RGb2N1cz1kb2N1bWVudC5hY3RpdmVFbGVtZW50LHRoaXMuaWdub3JlRm9jdXNDaGFuZ2U9ITF9bmV4dCgpe2NvbnN0IHQ9dGhpcy5jYXJvdXNlbDt0JiZ0LnBhZ2VzLmxlbmd0aD4xJiZ0LnNsaWRlTmV4dCgpfXByZXYoKXtjb25zdCB0PXRoaXMuY2Fyb3VzZWw7dCYmdC5wYWdlcy5sZW5ndGg+MSYmdC5zbGlkZVByZXYoKX1qdW1wVG8oLi4udCl7dGhpcy5jYXJvdXNlbCYmdGhpcy5jYXJvdXNlbC5zbGlkZVRvKC4uLnQpfWlzVG9wbW9zdCgpe3ZhciB0O3JldHVybihudWxsPT09KHQ9VGUuZ2V0SW5zdGFuY2UoKSl8fHZvaWQgMD09PXQ/dm9pZCAwOnQuaWQpPT10aGlzLmlkfWFuaW1hdGUodD1udWxsLGU9XCJcIixpKXtpZighdHx8IWUpcmV0dXJuIHZvaWQoaSYmaSgpKTt0aGlzLnN0b3AodCk7Y29uc3Qgbj1zPT57cy50YXJnZXQ9PT10JiZ0LmRhdGFzZXQuYW5pbWF0aW9uTmFtZSYmKHQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImFuaW1hdGlvbmVuZFwiLG4pLGRlbGV0ZSB0LmRhdGFzZXQuYW5pbWF0aW9uTmFtZSxpJiZpKCksUCh0LGUpKX07dC5kYXRhc2V0LmFuaW1hdGlvbk5hbWU9ZSx0LmFkZEV2ZW50TGlzdGVuZXIoXCJhbmltYXRpb25lbmRcIixuKSxDKHQsZSl9c3RvcCh0KXt0JiZ0LmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KFwiYW5pbWF0aW9uZW5kXCIse2J1YmJsZXM6ITEsY2FuY2VsYWJsZTohMCxjdXJyZW50VGFyZ2V0OnR9KSl9c2V0Q29udGVudCh0LGU9XCJcIixpPSEwKXtpZih0aGlzLmlzQ2xvc2luZygpKXJldHVybjtjb25zdCBuPXQuZWw7aWYoIW4pcmV0dXJuO2xldCBvPW51bGw7aWYoUyhlKT9vPWU6KG89cyhlK1wiXCIpLFMobyl8fChvPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksby5pbm5lckhUTUw9ZStcIlwiKSksW1wiaW1nXCIsXCJwaWN0dXJlXCIsXCJpZnJhbWVcIixcInZpZGVvXCIsXCJhdWRpb1wiXS5pbmNsdWRlcyhvLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkpKXtjb25zdCB0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7dC5hcHBlbmRDaGlsZChvKSxvPXR9UyhvKSYmdC5maWx0ZXImJiF0LmVycm9yJiYobz1vLnF1ZXJ5U2VsZWN0b3IodC5maWx0ZXIpKSxvJiZTKG8pPyhDKG8sXCJmYW5jeWJveF9fY29udGVudFwiKSx0LmlkJiZvLnNldEF0dHJpYnV0ZShcImlkXCIsdC5pZCksXCJub25lXCIhPT1vLnN0eWxlLmRpc3BsYXkmJlwibm9uZVwiIT09Z2V0Q29tcHV0ZWRTdHlsZShvKS5nZXRQcm9wZXJ0eVZhbHVlKFwiZGlzcGxheVwiKXx8KG8uc3R5bGUuZGlzcGxheT10LmRpc3BsYXl8fHRoaXMub3B0aW9uKFwiZGVmYXVsdERpc3BsYXlcIil8fFwiZmxleFwiKSxuLmNsYXNzTGlzdC5hZGQoYGhhcy0ke3QuZXJyb3I/XCJlcnJvclwiOnQudHlwZXx8XCJ1bmtub3duXCJ9YCksbi5wcmVwZW5kKG8pLHQuY29udGVudEVsPW8saSYmdGhpcy5yZXZlYWxDb250ZW50KHQpLHRoaXMubWFuYWdlQ2xvc2VCdG4odCksdGhpcy5tYW5hZ2VDYXB0aW9uKHQpKTp0aGlzLnNldEVycm9yKHQsXCJ7e0VMRU1FTlRfTk9UX0ZPVU5EfX1cIil9cmV2ZWFsQ29udGVudCh0LGUpe2NvbnN0IGk9dC5lbCxuPXQuY29udGVudEVsO2kmJm4mJih0aGlzLmVtaXQoXCJyZXZlYWxcIix0KSx0aGlzLmhpZGVMb2FkaW5nKHQpLHQuc3RhdGU9bHQuT3BlbmluZywoZT10aGlzLmlzT3BlbmluZ1NsaWRlKHQpP3ZvaWQgMD09PWU/dGhpcy5vcHRpb25Gb3IodCxcInNob3dDbGFzc1wiKTplOlwiZi1mYWRlSW5cIik/dGhpcy5hbmltYXRlKG4sZSwoKCk9Pnt0aGlzLmRvbmUodCl9KSk6dGhpcy5kb25lKHQpKX1kb25lKHQpe3RoaXMuaXNDbG9zaW5nKCl8fCh0LnN0YXRlPWx0LlJlYWR5LHRoaXMuZW1pdChcImRvbmVcIix0KSxDKHQuZWwsXCJpcy1kb25lXCIpLHRoaXMuaXNDdXJyZW50U2xpZGUodCkmJnRoaXMub3B0aW9uKFwiYXV0b0ZvY3VzXCIpJiZxdWV1ZU1pY3JvdGFzaygoKCk9Pnt2YXIgZTtudWxsPT09KGU9dC5wYW56b29tKXx8dm9pZCAwPT09ZXx8ZS51cGRhdGVDb250cm9scygpLHRoaXMub3B0aW9uKFwiYXV0b0ZvY3VzXCIpJiZ0aGlzLmZvY3VzKCl9KSksdGhpcy5pc09wZW5pbmdTbGlkZSh0KSYmKFAodGhpcy5jb250YWluZXIsaGUpLCF0aGlzLmlzQ29tcGFjdCYmdGhpcy5vcHRpb24oXCJpZGxlXCIpJiZ0aGlzLnNldElkbGUoKSkpfWlzQ3VycmVudFNsaWRlKHQpe2NvbnN0IGU9dGhpcy5nZXRTbGlkZSgpO3JldHVybiEoIXR8fCFlKSYmZS5pbmRleD09PXQuaW5kZXh9aXNPcGVuaW5nU2xpZGUodCl7dmFyIGUsaTtyZXR1cm4gbnVsbD09PShudWxsPT09KGU9dGhpcy5jYXJvdXNlbCl8fHZvaWQgMD09PWU/dm9pZCAwOmUucHJldlBhZ2UpJiZ0JiZ0LmluZGV4PT09KG51bGw9PT0oaT10aGlzLmdldFNsaWRlKCkpfHx2b2lkIDA9PT1pP3ZvaWQgMDppLmluZGV4KX1zaG93TG9hZGluZyh0KXt0LnN0YXRlPWx0LkxvYWRpbmc7Y29uc3QgZT10LmVsO2lmKCFlKXJldHVybjtDKGUsY2UpLHRoaXMuZW1pdChcImxvYWRpbmdcIix0KSx0LnNwaW5uZXJFbHx8c2V0VGltZW91dCgoKCk9PntpZighdGhpcy5pc0Nsb3NpbmcoKSYmIXQuc3Bpbm5lckVsJiZ0LnN0YXRlPT09bHQuTG9hZGluZyl7bGV0IGk9cyhFKTtDKGksXCJmYW5jeWJveC1zcGlubmVyXCIpLHQuc3Bpbm5lckVsPWksZS5wcmVwZW5kKGkpLHRoaXMuYW5pbWF0ZShpLFwiZi1mYWRlSW5cIil9fSksMjUwKX1oaWRlTG9hZGluZyh0KXtjb25zdCBlPXQuZWw7aWYoIWUpcmV0dXJuO2NvbnN0IGk9dC5zcGlubmVyRWw7dGhpcy5pc0Nsb3NpbmcoKT9udWxsPT1pfHxpLnJlbW92ZSgpOihQKGUsY2UpLGkmJnRoaXMuYW5pbWF0ZShpLFwiZi1mYWRlT3V0XCIsKCgpPT57aS5yZW1vdmUoKX0pKSx0LnN0YXRlPT09bHQuTG9hZGluZyYmKHRoaXMuZW1pdChcImxvYWRlZFwiLHQpLHQuc3RhdGU9bHQuUmVhZHkpKX1zZXRFcnJvcih0LGUpe2lmKHRoaXMuaXNDbG9zaW5nKCkpcmV0dXJuO2NvbnN0IGk9bmV3IEV2ZW50KFwiZXJyb3JcIix7YnViYmxlczohMCxjYW5jZWxhYmxlOiEwfSk7aWYodGhpcy5lbWl0KFwiZXJyb3JcIixpLHQpLGkuZGVmYXVsdFByZXZlbnRlZClyZXR1cm47dC5lcnJvcj1lLHRoaXMuaGlkZUxvYWRpbmcodCksdGhpcy5jbGVhckNvbnRlbnQodCk7Y29uc3Qgbj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO24uY2xhc3NMaXN0LmFkZChcImZhbmN5Ym94LWVycm9yXCIpLG4uaW5uZXJIVE1MPXRoaXMubG9jYWxpemUoZXx8XCI8cD57e0VSUk9SfX08L3A+XCIpLHRoaXMuc2V0Q29udGVudCh0LG4pfWNsZWFyQ29udGVudCh0KXtpZih2b2lkIDA9PT10LnN0YXRlKXJldHVybjt0aGlzLmVtaXQoXCJjbGVhckNvbnRlbnRcIix0KSx0LmNvbnRlbnRFbCYmKHQuY29udGVudEVsLnJlbW92ZSgpLHQuY29udGVudEVsPXZvaWQgMCk7Y29uc3QgZT10LmVsO2UmJihQKGUsXCJoYXMtZXJyb3JcIiksUChlLFwiaGFzLXVua25vd25cIiksUChlLGBoYXMtJHt0LnR5cGV8fFwidW5rbm93blwifWApKSx0LmNsb3NlQnRuRWwmJnQuY2xvc2VCdG5FbC5yZW1vdmUoKSx0LmNsb3NlQnRuRWw9dm9pZCAwLHQuY2FwdGlvbkVsJiZ0LmNhcHRpb25FbC5yZW1vdmUoKSx0LmNhcHRpb25FbD12b2lkIDAsdC5zcGlubmVyRWwmJnQuc3Bpbm5lckVsLnJlbW92ZSgpLHQuc3Bpbm5lckVsPXZvaWQgMH1nZXRTbGlkZSgpe3ZhciB0O2NvbnN0IGU9dGhpcy5jYXJvdXNlbDtyZXR1cm4obnVsbD09PSh0PW51bGw9PWU/dm9pZCAwOmUucGFnZXNbbnVsbD09ZT92b2lkIDA6ZS5wYWdlXSl8fHZvaWQgMD09PXQ/dm9pZCAwOnQuc2xpZGVzWzBdKXx8dm9pZCAwfWNsb3NlKHQsZSl7aWYodGhpcy5pc0Nsb3NpbmcoKSlyZXR1cm47Y29uc3QgaT1uZXcgRXZlbnQoXCJzaG91bGRDbG9zZVwiLHtidWJibGVzOiEwLGNhbmNlbGFibGU6ITB9KTtpZih0aGlzLmVtaXQoXCJzaG91bGRDbG9zZVwiLGksdCksaS5kZWZhdWx0UHJldmVudGVkKXJldHVybjt0JiZ0LmNhbmNlbGFibGUmJih0LnByZXZlbnREZWZhdWx0KCksdC5zdG9wUHJvcGFnYXRpb24oKSk7Y29uc3Qgbj0oKT0+e3RoaXMucHJvY2VlZENsb3NlKHQsZSl9O3RoaXMuc3RhcnRlZEZzJiZ5ZSYmeWUuaXNGdWxsc2NyZWVuKCk/UHJvbWlzZS5yZXNvbHZlKHllLmV4aXQoKSkudGhlbigoKCk9Pm4oKSkpOm4oKX1jbGVhcklkbGUoKXt0aGlzLmlkbGVUaW1lciYmY2xlYXJUaW1lb3V0KHRoaXMuaWRsZVRpbWVyKSx0aGlzLmlkbGVUaW1lcj1udWxsfXNldElkbGUodD0hMSl7Y29uc3QgZT0oKT0+e3RoaXMuY2xlYXJJZGxlKCksdGhpcy5pZGxlPSEwLEModGhpcy5jb250YWluZXIsXCJpcy1pZGxlXCIpLHRoaXMuZW1pdChcInNldElkbGVcIil9O2lmKHRoaXMuY2xlYXJJZGxlKCksIXRoaXMuaXNDbG9zaW5nKCkpaWYodCllKCk7ZWxzZXtjb25zdCB0PXRoaXMub3B0aW9uKFwiaWRsZVwiKTt0JiYodGhpcy5pZGxlVGltZXI9c2V0VGltZW91dChlLHQpKX19ZW5kSWRsZSgpe3RoaXMuY2xlYXJJZGxlKCksdGhpcy5pZGxlJiYhdGhpcy5pc0Nsb3NpbmcoKSYmKHRoaXMuaWRsZT0hMSxQKHRoaXMuY29udGFpbmVyLFwiaXMtaWRsZVwiKSx0aGlzLmVtaXQoXCJlbmRJZGxlXCIpKX1yZXNldElkbGUoKXt0aGlzLmVuZElkbGUoKSx0aGlzLnNldElkbGUoKX10b2dnbGVJZGxlKCl7dGhpcy5pZGxlP3RoaXMuZW5kSWRsZSgpOnRoaXMuc2V0SWRsZSghMCl9dG9nZ2xlRnVsbHNjcmVlbigpe3llJiYoeWUuaXNGdWxsc2NyZWVuKCk/eWUuZXhpdCgpOnllLnJlcXVlc3QoKS50aGVuKCgoKT0+e3RoaXMuc3RhcnRlZEZzPSEwfSkpKX1pc0Nsb3NpbmcoKXtyZXR1cm5bcnQuQ2xvc2luZyxydC5DdXN0b21DbG9zaW5nLHJ0LkRlc3Ryb3ldLmluY2x1ZGVzKHRoaXMuc3RhdGUpfXByb2NlZWRDbG9zZSh0LGUpe3ZhciBpLG47dGhpcy5zdGF0ZT1ydC5DbG9zaW5nLHRoaXMuY2xlYXJJZGxlKCksdGhpcy5kZXRhY2hFdmVudHMoKTtjb25zdCBzPXRoaXMuY29udGFpbmVyLG89dGhpcy5jYXJvdXNlbCxhPXRoaXMuZ2V0U2xpZGUoKSxyPWEmJnRoaXMub3B0aW9uKFwicGxhY2VGb2N1c0JhY2tcIik/YS50cmlnZ2VyRWx8fHRoaXMub3B0aW9uKFwidHJpZ2dlckVsXCIpOm51bGw7aWYociYmKHR0KHIpP3N0KHIpOnIuZm9jdXMoKSkscyYmKFAocyxoZSksQyhzLFwiaXMtY2xvc2luZ1wiKSxzLnNldEF0dHJpYnV0ZShvZSxcInRydWVcIiksdGhpcy5vcHRpb24oXCJhbmltYXRlZFwiKSYmQyhzLHJlKSxzLnN0eWxlLnBvaW50ZXJFdmVudHM9XCJub25lXCIpLG8pe28uY2xlYXJUcmFuc2l0aW9ucygpLG51bGw9PT0oaT1vLnBhbnpvb20pfHx2b2lkIDA9PT1pfHxpLmRlc3Ryb3koKSxudWxsPT09KG49by5wbHVnaW5zLk5hdmlnYXRpb24pfHx2b2lkIDA9PT1ufHxuLmRldGFjaCgpO2Zvcihjb25zdCB0IG9mIG8uc2xpZGVzKXt0LnN0YXRlPWx0LkNsb3NpbmcsdGhpcy5oaWRlTG9hZGluZyh0KTtjb25zdCBlPXQuY29udGVudEVsO2UmJnRoaXMuc3RvcChlKTtjb25zdCBpPW51bGw9PXQ/dm9pZCAwOnQucGFuem9vbTtpJiYoaS5zdG9wKCksaS5kZXRhY2hFdmVudHMoKSxpLmRldGFjaE9ic2VydmVyKCkpLHRoaXMuaXNDdXJyZW50U2xpZGUodCl8fG8uZW1pdChcInJlbW92ZVNsaWRlXCIsdCl9fXRoaXMuZW1pdChcImNsb3NlXCIsdCksdGhpcy5zdGF0ZSE9PXJ0LkN1c3RvbUNsb3Npbmc/KHZvaWQgMD09PWUmJmEmJihlPXRoaXMub3B0aW9uRm9yKGEsXCJoaWRlQ2xhc3NcIikpLGUmJmE/KHRoaXMuYW5pbWF0ZShhLmNvbnRlbnRFbCxlLCgoKT0+e28mJm8uZW1pdChcInJlbW92ZVNsaWRlXCIsYSl9KSksc2V0VGltZW91dCgoKCk9Pnt0aGlzLmRlc3Ryb3koKX0pLDUwMCkpOnRoaXMuZGVzdHJveSgpKTpzZXRUaW1lb3V0KCgoKT0+e3RoaXMuZGVzdHJveSgpfSksNTAwKX1kZXN0cm95KCl7dmFyIHQ7aWYodGhpcy5zdGF0ZT09PXJ0LkRlc3Ryb3kpcmV0dXJuO3RoaXMuc3RhdGU9cnQuRGVzdHJveSxudWxsPT09KHQ9dGhpcy5jYXJvdXNlbCl8fHZvaWQgMD09PXR8fHQuZGVzdHJveSgpO2NvbnN0IGU9dGhpcy5jb250YWluZXI7ZSYmZS5yZW1vdmUoKSxQZS5kZWxldGUodGhpcy5pZCk7Y29uc3QgaT1UZS5nZXRJbnN0YW5jZSgpO2k/aS5mb2N1cygpOih3ZSYmKHdlLnJlbW92ZSgpLHdlPW51bGwpLHhlJiYoeGUucmVtb3ZlKCkseGU9bnVsbCksUChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsZWUpLCgoKT0+e2lmKCFldClyZXR1cm47Y29uc3QgdD1kb2N1bWVudCxlPXQuYm9keTtlLmNsYXNzTGlzdC5yZW1vdmUoaWUpLGUuc3R5bGUuc2V0UHJvcGVydHkoc2UsXCJcIiksdC5kb2N1bWVudEVsZW1lbnQuc3R5bGUuc2V0UHJvcGVydHkobmUsXCJcIil9KSgpLHRoaXMuZW1pdChcImRlc3Ryb3lcIikpfXN0YXRpYyBiaW5kKHQsZSxpKXtpZighZXQpcmV0dXJuO2xldCBuLHM9XCJcIixvPXt9O2lmKHZvaWQgMD09PXQ/bj1kb2N1bWVudC5ib2R5OnZlKHQpPyhuPWRvY3VtZW50LmJvZHkscz10LFwib2JqZWN0XCI9PXR5cGVvZiBlJiYobz1lfHx7fSkpOihuPXQsdmUoZSkmJihzPWUpLFwib2JqZWN0XCI9PXR5cGVvZiBpJiYobz1pfHx7fSkpLCFufHwhUyhuKSlyZXR1cm47cz1zfHxcIltkYXRhLWZhbmN5Ym94XVwiO2NvbnN0IGE9VGUub3BlbmVycy5nZXQobil8fG5ldyBNYXA7YS5zZXQocyxvKSxUZS5vcGVuZXJzLnNldChuLGEpLDE9PT1hLnNpemUmJm4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsVGUuZnJvbUV2ZW50KX1zdGF0aWMgdW5iaW5kKHQsZSl7bGV0IGksbj1cIlwiO2lmKHZlKHQpPyhpPWRvY3VtZW50LmJvZHksbj10KTooaT10LHZlKGUpJiYobj1lKSksIWkpcmV0dXJuO2NvbnN0IHM9VGUub3BlbmVycy5nZXQoaSk7cyYmbiYmcy5kZWxldGUobiksbiYmc3x8KFRlLm9wZW5lcnMuZGVsZXRlKGkpLGkucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsVGUuZnJvbUV2ZW50KSl9c3RhdGljIGRlc3Ryb3koKXtsZXQgdDtmb3IoO3Q9VGUuZ2V0SW5zdGFuY2UoKTspdC5kZXN0cm95KCk7Zm9yKGNvbnN0IHQgb2YgVGUub3BlbmVycy5rZXlzKCkpdC5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIixUZS5mcm9tRXZlbnQpO1RlLm9wZW5lcnM9bmV3IE1hcH1zdGF0aWMgZnJvbUV2ZW50KHQpe2lmKHQuZGVmYXVsdFByZXZlbnRlZClyZXR1cm47aWYodC5idXR0b24mJjAhPT10LmJ1dHRvbilyZXR1cm47aWYodC5jdHJsS2V5fHx0Lm1ldGFLZXl8fHQuc2hpZnRLZXkpcmV0dXJuO2xldCBlPXQuY29tcG9zZWRQYXRoKClbMF07Y29uc3QgaT1lLmNsb3Nlc3QoXCJbZGF0YS1mYW5jeWJveC10cmlnZ2VyXVwiKTtpZihpKXtjb25zdCB0PWkuZGF0YXNldC5mYW5jeWJveFRyaWdnZXJ8fFwiXCIsbj1kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGBbZGF0YS1mYW5jeWJveD1cIiR7dH1cIl1gKSxzPXBhcnNlSW50KGkuZGF0YXNldC5mYW5jeWJveEluZGV4fHxcIlwiLDEwKXx8MDtlPW5bc118fGV9aWYoIShlJiZlIGluc3RhbmNlb2YgRWxlbWVudCkpcmV0dXJuO2xldCBuLHMsbyxhO2lmKFsuLi5UZS5vcGVuZXJzXS5yZXZlcnNlKCkuZmluZCgoKFt0LGldKT0+ISghdC5jb250YWlucyhlKXx8IVsuLi5pXS5yZXZlcnNlKCkuZmluZCgoKFtpLHJdKT0+e2xldCBsPWUuY2xvc2VzdChpKTtyZXR1cm4hIWwmJihuPXQscz1pLG89bCxhPXIsITApfSkpKSkpLCFufHwhc3x8IW8pcmV0dXJuO2E9YXx8e30sdC5wcmV2ZW50RGVmYXVsdCgpLGU9bztsZXQgcj1bXSxsPWYoe30sYXQsYSk7bC5ldmVudD10LGwudHJpZ2dlckVsPWUsbC5kZWxlZ2F0ZT1pO2NvbnN0IGM9bC5ncm91cEFsbCxoPWwuZ3JvdXBBdHRyLGQ9aCYmZT9lLmdldEF0dHJpYnV0ZShgJHtofWApOlwiXCI7aWYoKCFlfHxkfHxjKSYmKHI9W10uc2xpY2UuY2FsbChuLnF1ZXJ5U2VsZWN0b3JBbGwocykpKSxlJiYhYyYmKHI9ZD9yLmZpbHRlcigodD0+dC5nZXRBdHRyaWJ1dGUoYCR7aH1gKT09PWQpKTpbZV0pLCFyLmxlbmd0aClyZXR1cm47Y29uc3QgdT1UZS5nZXRJbnN0YW5jZSgpO3JldHVybiB1JiZ1Lm9wdGlvbnMudHJpZ2dlckVsJiZyLmluZGV4T2YodS5vcHRpb25zLnRyaWdnZXJFbCk+LTE/dm9pZCAwOihlJiYobC5zdGFydEluZGV4PXIuaW5kZXhPZihlKSksVGUuZnJvbU5vZGVzKHIsbCkpfXN0YXRpYyBmcm9tU2VsZWN0b3IodCxlLGkpe2xldCBuPW51bGwscz1cIlwiLG89e307aWYodmUodCk/KG49ZG9jdW1lbnQuYm9keSxzPXQsXCJvYmplY3RcIj09dHlwZW9mIGUmJihvPWV8fHt9KSk6dCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50JiZ2ZShlKSYmKG49dCxzPWUsXCJvYmplY3RcIj09dHlwZW9mIGkmJihvPWl8fHt9KSksIW58fCFzKXJldHVybiExO2NvbnN0IGE9VGUub3BlbmVycy5nZXQobik7cmV0dXJuISFhJiYobz1mKHt9LGEuZ2V0KHMpfHx7fSxvKSwhIW8mJlRlLmZyb21Ob2RlcyhBcnJheS5mcm9tKG4ucXVlcnlTZWxlY3RvckFsbChzKSksbykpfXN0YXRpYyBmcm9tTm9kZXModCxlKXtlPWYoe30sYXQsZXx8e30pO2NvbnN0IGk9W107Zm9yKGNvbnN0IG4gb2YgdCl7Y29uc3QgdD1uLmRhdGFzZXR8fHt9LHM9dFttZV18fG4uZ2V0QXR0cmlidXRlKGdlKXx8bi5nZXRBdHRyaWJ1dGUoXCJjdXJyZW50U3JjXCIpfHxuLmdldEF0dHJpYnV0ZShtZSl8fHZvaWQgMDtsZXQgbztjb25zdCBhPWUuZGVsZWdhdGU7bGV0IHI7YSYmaS5sZW5ndGg9PT1lLnN0YXJ0SW5kZXgmJihvPWEgaW5zdGFuY2VvZiBIVE1MSW1hZ2VFbGVtZW50P2E6YS5xdWVyeVNlbGVjdG9yKFwiaW1nOm5vdChbYXJpYS1oaWRkZW5dKVwiKSksb3x8KG89biBpbnN0YW5jZW9mIEhUTUxJbWFnZUVsZW1lbnQ/bjpuLnF1ZXJ5U2VsZWN0b3IoXCJpbWc6bm90KFthcmlhLWhpZGRlbl0pXCIpKSxvJiYocj1vLmN1cnJlbnRTcmN8fG9bbWVdfHx2b2lkIDAsIXImJm8uZGF0YXNldCYmKHI9by5kYXRhc2V0LmxhenlTcmN8fG8uZGF0YXNldFttZV18fHZvaWQgMCkpO2NvbnN0IGw9e3NyYzpzLHRyaWdnZXJFbDpuLHRodW1iRWw6byx0aHVtYkVsU3JjOnIsdGh1bWJTcmM6cn07Zm9yKGNvbnN0IGUgaW4gdCl7bGV0IGk9dFtlXStcIlwiO2k9XCJmYWxzZVwiIT09aSYmKFwidHJ1ZVwiPT09aXx8aSksbFtlXT1pfWkucHVzaChsKX1yZXR1cm4gbmV3IFRlKGksZSl9c3RhdGljIGdldEluc3RhbmNlKHQpe2lmKHQpcmV0dXJuIFBlLmdldCh0KTtyZXR1cm4gQXJyYXkuZnJvbShQZS52YWx1ZXMoKSkucmV2ZXJzZSgpLmZpbmQoKHQ9PiF0LmlzQ2xvc2luZygpJiZ0KSl8fG51bGx9c3RhdGljIGdldFNsaWRlKCl7dmFyIHQ7cmV0dXJuKG51bGw9PT0odD1UZS5nZXRJbnN0YW5jZSgpKXx8dm9pZCAwPT09dD92b2lkIDA6dC5nZXRTbGlkZSgpKXx8bnVsbH1zdGF0aWMgc2hvdyh0PVtdLGU9e30pe3JldHVybiBuZXcgVGUodCxlKX1zdGF0aWMgbmV4dCgpe2NvbnN0IHQ9VGUuZ2V0SW5zdGFuY2UoKTt0JiZ0Lm5leHQoKX1zdGF0aWMgcHJldigpe2NvbnN0IHQ9VGUuZ2V0SW5zdGFuY2UoKTt0JiZ0LnByZXYoKX1zdGF0aWMgY2xvc2UodD0hMCwuLi5lKXtpZih0KWZvcihjb25zdCB0IG9mIFBlLnZhbHVlcygpKXQuY2xvc2UoLi4uZSk7ZWxzZXtjb25zdCB0PVRlLmdldEluc3RhbmNlKCk7dCYmdC5jbG9zZSguLi5lKX19fU9iamVjdC5kZWZpbmVQcm9wZXJ0eShUZSxcInZlcnNpb25cIix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6XCI1LjAuMzJcIn0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShUZSxcImRlZmF1bHRzXCIse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOmF0fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KFRlLFwiUGx1Z2luc1wiLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTp0ZX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShUZSxcIm9wZW5lcnNcIix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6bmV3IE1hcH0pLHQuQ2Fyb3VzZWw9USx0LkZhbmN5Ym94PVRlLHQuUGFuem9vbT1JfSkpOyJdLCJmaWxlIjoibGliL2dhbGxlcnkvZmFuY3lib3gudW1kLmpzIn0=